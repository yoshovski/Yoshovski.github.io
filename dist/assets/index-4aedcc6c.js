import*as G from"https://unpkg.com/three@0.149.0/build/three.module.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function ru(a){if(a&&!(typeof window>"u")){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=a,document.head.appendChild(t),a}}function nn(a,t){var e=a.__state.conversionName.toString(),i=Math.round(a.r),n=Math.round(a.g),s=Math.round(a.b),r=a.a,o=Math.round(a.h),h=a.s.toFixed(1),l=a.v.toFixed(1);if(t||e==="THREE_CHAR_HEX"||e==="SIX_CHAR_HEX"){for(var c=a.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}else{if(e==="CSS_RGB")return"rgb("+i+","+n+","+s+")";if(e==="CSS_RGBA")return"rgba("+i+","+n+","+s+","+r+")";if(e==="HEX")return"0x"+a.hex.toString(16);if(e==="RGB_ARRAY")return"["+i+","+n+","+s+"]";if(e==="RGBA_ARRAY")return"["+i+","+n+","+s+","+r+"]";if(e==="RGB_OBJ")return"{r:"+i+",g:"+n+",b:"+s+"}";if(e==="RGBA_OBJ")return"{r:"+i+",g:"+n+",b:"+s+",a:"+r+"}";if(e==="HSV_OBJ")return"{h:"+o+",s:"+h+",v:"+l+"}";if(e==="HSVA_OBJ")return"{h:"+o+",s:"+h+",v:"+l+",a:"+r+"}"}return"unknown format"}var Ya=Array.prototype.forEach,Pn=Array.prototype.slice,k={BREAK:{},extend:function(t){return this.each(Pn.call(arguments,1),function(e){var i=this.isObject(e)?Object.keys(e):[];i.forEach((function(n){this.isUndefined(e[n])||(t[n]=e[n])}).bind(this))},this),t},defaults:function(t){return this.each(Pn.call(arguments,1),function(e){var i=this.isObject(e)?Object.keys(e):[];i.forEach((function(n){this.isUndefined(t[n])&&(t[n]=e[n])}).bind(this))},this),t},compose:function(){var t=Pn.call(arguments);return function(){for(var e=Pn.call(arguments),i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},each:function(t,e,i){if(t){if(Ya&&t.forEach&&t.forEach===Ya)t.forEach(e,i);else if(t.length===t.length+0){var n=void 0,s=void 0;for(n=0,s=t.length;n<s;n++)if(n in t&&e.call(i,t[n],n)===this.BREAK)return}else for(var r in t)if(e.call(i,t[r],r)===this.BREAK)return}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n=void 0;return function(){var s=this,r=arguments;function o(){n=null,i||t.apply(s,r)}var h=i||!n;clearTimeout(n),n=setTimeout(o,e),h&&t.apply(s,r)}},toArray:function(t){return t.toArray?t.toArray():Pn.call(t)},isUndefined:function(t){return t===void 0},isNull:function(t){return t===null},isNaN:function(a){function t(e){return a.apply(this,arguments)}return t.toString=function(){return a.toString()},t}(function(a){return isNaN(a)}),isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return t instanceof Function}},ou=[{litmus:k.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:nn},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return e===null?!1:{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:nn},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:nn},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return e===null?!1:{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:nn}}},{litmus:k.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:k.isArray,conversions:{RGB_ARRAY:{read:function(t){return t.length!==3?!1:{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return t.length!==4?!1:{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:k.isObject,conversions:{RGBA_OBJ:{read:function(t){return k.isNumber(t.r)&&k.isNumber(t.g)&&k.isNumber(t.b)&&k.isNumber(t.a)?{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return k.isNumber(t.r)&&k.isNumber(t.g)&&k.isNumber(t.b)?{space:"RGB",r:t.r,g:t.g,b:t.b}:!1},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return k.isNumber(t.h)&&k.isNumber(t.s)&&k.isNumber(t.v)&&k.isNumber(t.a)?{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return k.isNumber(t.h)&&k.isNumber(t.s)&&k.isNumber(t.v)?{space:"HSV",h:t.h,s:t.s,v:t.v}:!1},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],Rn=void 0,Ps=void 0,Eo=function(){Ps=!1;var t=arguments.length>1?k.toArray(arguments):arguments[0];return k.each(ou,function(e){if(e.litmus(t))return k.each(e.conversions,function(i,n){if(Rn=i.read(t),Ps===!1&&Rn!==!1)return Ps=Rn,Rn.conversionName=n,Rn.conversion=i,k.BREAK}),k.BREAK}),Ps},Ka=void 0,gr={hsv_to_rgb:function(t,e,i){var n=Math.floor(t/60)%6,s=t/60-Math.floor(t/60),r=i*(1-e),o=i*(1-s*e),h=i*(1-(1-s)*e),l=[[i,h,r],[o,i,r],[r,i,h],[r,o,i],[h,r,i],[i,r,o]][n];return{r:l[0]*255,g:l[1]*255,b:l[2]*255}},rgb_to_hsv:function(t,e,i){var n=Math.min(t,e,i),s=Math.max(t,e,i),r=s-n,o=void 0,h=void 0;if(s!==0)h=r/s;else return{h:NaN,s:0,v:0};return t===s?o=(e-i)/r:e===s?o=2+(i-t)/r:o=4+(t-e)/r,o/=6,o<0&&(o+=1),{h:o*360,s:h,v:s/255}},rgb_to_hex:function(t,e,i){var n=this.hex_with_component(0,2,t);return n=this.hex_with_component(n,1,e),n=this.hex_with_component(n,0,i),n},component_from_hex:function(t,e){return t>>e*8&255},hex_with_component:function(t,e,i){return i<<(Ka=e*8)|t&~(255<<Ka)}},au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},be=function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")},we=function(){function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}}(),oi=function a(t,e,i){t===null&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(n===void 0){var s=Object.getPrototypeOf(t);return s===null?void 0:a(s,e,i)}else{if("value"in n)return n.value;var r=n.get;return r===void 0?void 0:r.call(i)}},li=function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(a,t):a.__proto__=t)},ci=function(a,t){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:a},Tt=function(){function a(){if(be(this,a),this.__state=Eo.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return we(a,[{key:"toString",value:function(){return nn(this)}},{key:"toHexString",value:function(){return nn(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),a}();function la(a,t,e){Object.defineProperty(a,t,{get:function(){return this.__state.space==="RGB"?this.__state[t]:(Tt.recalculateRGB(this,t,e),this.__state[t])},set:function(n){this.__state.space!=="RGB"&&(Tt.recalculateRGB(this,t,e),this.__state.space="RGB"),this.__state[t]=n}})}function ca(a,t){Object.defineProperty(a,t,{get:function(){return this.__state.space==="HSV"?this.__state[t]:(Tt.recalculateHSV(this),this.__state[t])},set:function(i){this.__state.space!=="HSV"&&(Tt.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=i}})}Tt.recalculateRGB=function(a,t,e){if(a.__state.space==="HEX")a.__state[t]=gr.component_from_hex(a.__state.hex,e);else if(a.__state.space==="HSV")k.extend(a.__state,gr.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw new Error("Corrupted color state")};Tt.recalculateHSV=function(a){var t=gr.rgb_to_hsv(a.r,a.g,a.b);k.extend(a.__state,{s:t.s,v:t.v}),k.isNaN(t.h)?k.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=t.h};Tt.COMPONENTS=["r","g","b","h","s","v","hex","a"];la(Tt.prototype,"r",2);la(Tt.prototype,"g",1);la(Tt.prototype,"b",0);ca(Tt.prototype,"h");ca(Tt.prototype,"s");ca(Tt.prototype,"v");Object.defineProperty(Tt.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}});Object.defineProperty(Tt.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=gr.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var Pi=function(){function a(t,e){be(this,a),this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0}return we(a,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),a}(),hu={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},gl={};k.each(hu,function(a,t){k.each(a,function(e){gl[e]=t})});var lu=/(\d+(\.\d+)?)px/;function ve(a){if(a==="0"||k.isUndefined(a))return 0;var t=a.match(lu);return k.isNull(t)?0:parseFloat(t[1])}var S={makeSelectable:function(t,e){t===void 0||t.style===void 0||(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,i){var n=i,s=e;k.isUndefined(s)&&(s=!0),k.isUndefined(n)&&(n=!0),t.style.position="absolute",s&&(t.style.left=0,t.style.right=0),n&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,i,n){var s=i||{},r=gl[e];if(!r)throw new Error("Event type "+e+" not supported.");var o=document.createEvent(r);switch(r){case"MouseEvents":{var h=s.x||s.clientX||0,l=s.y||s.clientY||0;o.initMouseEvent(e,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,h,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var c=o.initKeyboardEvent||o.initKeyEvent;k.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{o.initEvent(e,s.bubbles||!1,s.cancelable||!0);break}}k.defaults(o,n),t.dispatchEvent(o)},bind:function(t,e,i,n){var s=n||!1;return t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&t.attachEvent("on"+e,i),S},unbind:function(t,e,i,n){var s=n||!1;return t.removeEventListener?t.removeEventListener(e,i,s):t.detachEvent&&t.detachEvent("on"+e,i),S},addClass:function(t,e){if(t.className===void 0)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);i.indexOf(e)===-1&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return S},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);n!==-1&&(i.splice(n,1),t.className=i.join(" "))}else t.className=void 0;return S},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return ve(e["border-left-width"])+ve(e["border-right-width"])+ve(e["padding-left"])+ve(e["padding-right"])+ve(e.width)},getHeight:function(t){var e=getComputedStyle(t);return ve(e["border-top-width"])+ve(e["border-bottom-width"])+ve(e["padding-top"])+ve(e["padding-bottom"])+ve(e.height)},getOffset:function(t){var e=t,i={left:0,top:0};if(e.offsetParent)do i.left+=e.offsetLeft,i.top+=e.offsetTop,e=e.offsetParent;while(e);return i},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},yl=function(a){li(t,a);function t(e,i){be(this,t);var n=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=n;n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox");function r(){s.setValue(!s.__prev)}return S.bind(n.__checkbox,"change",r,!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return we(t,[{key:"setValue",value:function(i){var n=oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Pi),cu=function(a){li(t,a);function t(e,i,n){be(this,t);var s=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),r=n,o=s;if(s.__select=document.createElement("select"),k.isArray(r)){var h={};k.each(r,function(l){h[l]=l}),r=h}return k.each(r,function(l,c){var u=document.createElement("option");u.innerHTML=c,u.setAttribute("value",l),o.__select.appendChild(u)}),s.updateDisplay(),S.bind(s.__select,"change",function(){var l=this.options[this.selectedIndex].value;o.setValue(l)}),s.domElement.appendChild(s.__select),s}return we(t,[{key:"setValue",value:function(i){var n=oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return S.isActive(this.__select)?this:(this.__select.value=this.getValue(),oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(Pi),uu=function(a){li(t,a);function t(e,i){be(this,t);var n=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=n;function r(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),S.bind(n.__input,"keyup",r),S.bind(n.__input,"change",r),S.bind(n.__input,"blur",o),S.bind(n.__input,"keydown",function(h){h.keyCode===13&&this.blur()}),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return we(t,[{key:"updateDisplay",value:function(){return S.isActive(this.__input)||(this.__input.value=this.getValue()),oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Pi);function Ja(a){var t=a.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var _l=function(a){li(t,a);function t(e,i,n){be(this,t);var s=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),r=n||{};return s.__min=r.min,s.__max=r.max,s.__step=r.step,k.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=Ja(s.__impliedStep),s}return we(t,[{key:"setValue",value:function(i){var n=i;return this.__min!==void 0&&n<this.__min?n=this.__min:this.__max!==void 0&&n>this.__max&&(n=this.__max),this.__step!==void 0&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(i){return this.__min=i,this}},{key:"max",value:function(i){return this.__max=i,this}},{key:"step",value:function(i){return this.__step=i,this.__impliedStep=i,this.__precision=Ja(i),this}}]),t}(Pi);function du(a,t){var e=Math.pow(10,t);return Math.round(a*e)/e}var yr=function(a){li(t,a);function t(e,i,n){be(this,t);var s=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));s.__truncationSuspended=!1;var r=s,o=void 0;function h(){var m=parseFloat(r.__input.value);k.isNaN(m)||r.setValue(m)}function l(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function c(){l()}function u(m){var p=o-m.clientY;r.setValue(r.getValue()+p*r.__impliedStep),o=m.clientY}function d(){S.unbind(window,"mousemove",u),S.unbind(window,"mouseup",d),l()}function f(m){S.bind(window,"mousemove",u),S.bind(window,"mouseup",d),o=m.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),S.bind(s.__input,"change",h),S.bind(s.__input,"blur",c),S.bind(s.__input,"mousedown",f),S.bind(s.__input,"keydown",function(m){m.keyCode===13&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,l())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return we(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():du(this.getValue(),this.__precision),oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(_l);function Za(a,t,e,i,n){return i+(n-i)*((a-t)/(e-t))}var Co=function(a){li(t,a);function t(e,i,n,s,r){be(this,t);var o=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{min:n,max:s,step:r})),h=o;o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),S.bind(o.__background,"mousedown",l),S.bind(o.__background,"touchstart",d),S.addClass(o.__background,"slider"),S.addClass(o.__foreground,"slider-fg");function l(p){document.activeElement.blur(),S.bind(window,"mousemove",c),S.bind(window,"mouseup",u),c(p)}function c(p){p.preventDefault();var g=h.__background.getBoundingClientRect();return h.setValue(Za(p.clientX,g.left,g.right,h.__min,h.__max)),!1}function u(){S.unbind(window,"mousemove",c),S.unbind(window,"mouseup",u),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function d(p){p.touches.length===1&&(S.bind(window,"touchmove",f),S.bind(window,"touchend",m),f(p))}function f(p){var g=p.touches[0].clientX,y=h.__background.getBoundingClientRect();h.setValue(Za(g,y.left,y.right,h.__min,h.__max))}function m(){S.unbind(window,"touchmove",f),S.unbind(window,"touchend",m),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}return o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return we(t,[{key:"updateDisplay",value:function(){var i=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=i*100+"%",oi(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(_l),xl=function(a){li(t,a);function t(e,i,n){be(this,t);var s=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),r=s;return s.__button=document.createElement("div"),s.__button.innerHTML=n===void 0?"Fire":n,S.bind(s.__button,"click",function(o){return o.preventDefault(),r.fire(),!1}),S.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return we(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(Pi),ko=function(a){li(t,a);function t(e,i){be(this,t);var n=ci(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));n.__color=new Tt(n.getValue()),n.__temp=new Tt(0);var s=n;n.domElement=document.createElement("div"),S.makeSelectable(n.domElement,!1),n.__selector=document.createElement("div"),n.__selector.className="selector",n.__saturation_field=document.createElement("div"),n.__saturation_field.className="saturation-field",n.__field_knob=document.createElement("div"),n.__field_knob.className="field-knob",n.__field_knob_border="2px solid ",n.__hue_knob=document.createElement("div"),n.__hue_knob.className="hue-knob",n.__hue_field=document.createElement("div"),n.__hue_field.className="hue-field",n.__input=document.createElement("input"),n.__input.type="text",n.__input_textShadow="0 1px 1px ",S.bind(n.__input,"keydown",function(p){p.keyCode===13&&u.call(this)}),S.bind(n.__input,"blur",u),S.bind(n.__selector,"mousedown",function(){S.addClass(this,"drag").bind(window,"mouseup",function(){S.removeClass(s.__selector,"drag")})}),S.bind(n.__selector,"touchstart",function(){S.addClass(this,"drag").bind(window,"touchend",function(){S.removeClass(s.__selector,"drag")})});var r=document.createElement("div");k.extend(n.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),k.extend(n.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:n.__field_knob_border+(n.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),k.extend(n.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),k.extend(n.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),k.extend(r.style,{width:"100%",height:"100%",background:"none"}),$a(r,"top","rgba(0,0,0,0)","#000"),k.extend(n.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),pu(n.__hue_field),k.extend(n.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:n.__input_textShadow+"rgba(0,0,0,0.7)"}),S.bind(n.__saturation_field,"mousedown",o),S.bind(n.__saturation_field,"touchstart",o),S.bind(n.__field_knob,"mousedown",o),S.bind(n.__field_knob,"touchstart",o),S.bind(n.__hue_field,"mousedown",h),S.bind(n.__hue_field,"touchstart",h);function o(p){f(p),S.bind(window,"mousemove",f),S.bind(window,"touchmove",f),S.bind(window,"mouseup",l),S.bind(window,"touchend",l)}function h(p){m(p),S.bind(window,"mousemove",m),S.bind(window,"touchmove",m),S.bind(window,"mouseup",c),S.bind(window,"touchend",c)}function l(){S.unbind(window,"mousemove",f),S.unbind(window,"touchmove",f),S.unbind(window,"mouseup",l),S.unbind(window,"touchend",l),d()}function c(){S.unbind(window,"mousemove",m),S.unbind(window,"touchmove",m),S.unbind(window,"mouseup",c),S.unbind(window,"touchend",c),d()}function u(){var p=Eo(this.value);p!==!1?(s.__color.__state=p,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function d(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}n.__saturation_field.appendChild(r),n.__selector.appendChild(n.__field_knob),n.__selector.appendChild(n.__saturation_field),n.__selector.appendChild(n.__hue_field),n.__hue_field.appendChild(n.__hue_knob),n.domElement.appendChild(n.__input),n.domElement.appendChild(n.__selector),n.updateDisplay();function f(p){p.type.indexOf("touch")===-1&&p.preventDefault();var g=s.__saturation_field.getBoundingClientRect(),y=p.touches&&p.touches[0]||p,b=y.clientX,_=y.clientY,x=(b-g.left)/(g.right-g.left),w=1-(_-g.top)/(g.bottom-g.top);return w>1?w=1:w<0&&(w=0),x>1?x=1:x<0&&(x=0),s.__color.v=w,s.__color.s=x,s.setValue(s.__color.toOriginal()),!1}function m(p){p.type.indexOf("touch")===-1&&p.preventDefault();var g=s.__hue_field.getBoundingClientRect(),y=p.touches&&p.touches[0]||p,b=y.clientY,_=1-(b-g.top)/(g.bottom-g.top);return _>1?_=1:_<0&&(_=0),s.__color.h=_*360,s.setValue(s.__color.toOriginal()),!1}return n}return we(t,[{key:"updateDisplay",value:function(){var i=Eo(this.getValue());if(i!==!1){var n=!1;k.each(Tt.COMPONENTS,function(o){if(!k.isUndefined(i[o])&&!k.isUndefined(this.__color.__state[o])&&i[o]!==this.__color.__state[o])return n=!0,{}},this),n&&k.extend(this.__color.__state,i)}k.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,r=255-s;k.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,$a(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),k.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(Pi),fu=["-moz-","-o-","-webkit-","-ms-",""];function $a(a,t,e,i){a.style.background="",k.each(fu,function(n){a.style.cssText+="background: "+n+"linear-gradient("+t+", "+e+" 0%, "+i+" 100%); "})}function pu(a){a.style.background="",a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var mu={load:function(t,e){var i=e||document,n=i.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,i.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){var i=e||document,n=document.createElement("style");n.type="text/css",n.innerHTML=t;var s=i.getElementsByTagName("head")[0];try{s.appendChild(n)}catch{}}},gu=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,yu=function(t,e){var i=t[e];return k.isArray(arguments[2])||k.isObject(arguments[2])?new cu(t,e,arguments[2]):k.isNumber(i)?k.isNumber(arguments[2])&&k.isNumber(arguments[3])?k.isNumber(arguments[4])?new Co(t,e,arguments[2],arguments[3],arguments[4]):new Co(t,e,arguments[2],arguments[3]):k.isNumber(arguments[4])?new yr(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new yr(t,e,{min:arguments[2],max:arguments[3]}):k.isString(i)?new uu(t,e):k.isFunction(i)?new xl(t,e,""):k.isBoolean(i)?new yl(t,e):null};function _u(a){setTimeout(a,1e3/60)}var xu=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||_u,bu=function(){function a(){be(this,a),this.backgroundElement=document.createElement("div"),k.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),S.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),k.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;S.bind(this.backgroundElement,"click",function(){t.hide()})}return we(a,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),k.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,i=function n(){e.domElement.style.display="none",e.backgroundElement.style.display="none",S.unbind(e.domElement,"webkitTransitionEnd",n),S.unbind(e.domElement,"transitionend",n),S.unbind(e.domElement,"oTransitionEnd",n)};S.bind(this.domElement,"webkitTransitionEnd",i),S.bind(this.domElement,"transitionend",i),S.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-S.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-S.getHeight(this.domElement)/2+"px"}}]),a}(),wu=ru(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);mu.inject(wu);var Qa="dg",th=72,eh=20,os="Default",Gn=function(){try{return!!window.localStorage}catch{return!1}}(),Jn=void 0,ih=!0,tn=void 0,Fr=!1,bl=[],st=function a(t){var e=this,i=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),S.addClass(this.domElement,Qa),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=k.defaults(i,{closeOnTop:!1,autoPlace:!0,width:a.DEFAULT_WIDTH}),i=k.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),k.isUndefined(i.load)?i.load={preset:os}:i.preset&&(i.load.preset=i.preset),k.isUndefined(i.parent)&&i.hideable&&bl.push(this),i.resizable=k.isUndefined(i.parent)&&i.resizable,i.autoPlace&&k.isUndefined(i.scrollable)&&(i.scrollable=!0);var n=Gn&&localStorage.getItem(en(this,"isLocal"))==="true",s=void 0,r=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return e.parent?e.getRoot().preset:i.load.preset},set:function(d){e.parent?e.getRoot().preset=d:i.load.preset=d,Su(this),e.revert()}},width:{get:function(){return i.width},set:function(d){i.width=d,Ro(e,d)}},name:{get:function(){return i.name},set:function(d){i.name=d,r&&(r.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(d){i.closed=d,i.closed?S.addClass(e.__ul,a.CLASS_CLOSED):S.removeClass(e.__ul,a.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=d?a.TEXT_OPEN:a.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return n},set:function(d){Gn&&(n=d,d?S.bind(window,"unload",s):S.unbind(window,"unload",s),localStorage.setItem(en(e,"isLocal"),d))}}}),k.isUndefined(i.parent)){if(this.closed=i.closed||!1,S.addClass(this.domElement,a.CLASS_MAIN),S.makeSelectable(this.domElement,!1),Gn&&n){e.useLocalStorage=!0;var o=localStorage.getItem(en(this,"gui"));o&&(i.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=a.TEXT_CLOSED,S.addClass(this.__closeButton,a.CLASS_CLOSE_BUTTON),i.closeOnTop?(S.addClass(this.__closeButton,a.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(S.addClass(this.__closeButton,a.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),S.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{i.closed===void 0&&(i.closed=!0);var h=document.createTextNode(i.name);S.addClass(h,"controller-name"),r=ua(e,h);var l=function(d){return d.preventDefault(),e.closed=!e.closed,!1};S.addClass(this.__ul,a.CLASS_CLOSED),S.addClass(r,"title"),S.bind(r,"click",l),i.closed||(this.closed=!1)}i.autoPlace&&(k.isUndefined(i.parent)&&(ih&&(tn=document.createElement("div"),S.addClass(tn,Qa),S.addClass(tn,a.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(tn),ih=!1),tn.appendChild(this.domElement),S.addClass(this.domElement,a.CLASS_AUTO_PLACE)),this.parent||Ro(e,i.width)),this.__resizeHandler=function(){e.onResizeDebounced()},S.bind(window,"resize",this.__resizeHandler),S.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),S.bind(this.__ul,"transitionend",this.__resizeHandler),S.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&Tu(this),s=function(){Gn&&localStorage.getItem(en(e,"isLocal"))==="true"&&localStorage.setItem(en(e,"gui"),JSON.stringify(e.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function c(){var u=e.getRoot();u.width+=1,k.defer(function(){u.width-=1})}i.parent||c()};st.toggleHide=function(){Fr=!Fr,k.each(bl,function(a){a.domElement.style.display=Fr?"none":""})};st.CLASS_AUTO_PLACE="a";st.CLASS_AUTO_PLACE_CONTAINER="ac";st.CLASS_MAIN="main";st.CLASS_CONTROLLER_ROW="cr";st.CLASS_TOO_TALL="taller-than-window";st.CLASS_CLOSED="closed";st.CLASS_CLOSE_BUTTON="close-button";st.CLASS_CLOSE_TOP="close-top";st.CLASS_CLOSE_BOTTOM="close-bottom";st.CLASS_DRAG="drag";st.DEFAULT_WIDTH=245;st.TEXT_CLOSED="Close Controls";st.TEXT_OPEN="Open Controls";st._keydownHandler=function(a){document.activeElement.type!=="text"&&(a.which===th||a.keyCode===th)&&st.toggleHide()};S.bind(window,"keydown",st._keydownHandler,!1);k.extend(st.prototype,{add:function(t,e){return Zn(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return Zn(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;k.defer(function(){e.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&tn.removeChild(this.domElement);var t=this;k.each(this.__folders,function(e){t.removeFolder(e)}),S.unbind(window,"keydown",st._keydownHandler,!1),nh(this)},addFolder:function(t){if(this.__folders[t]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var i=new st(e);this.__folders[t]=i;var n=ua(this,i.domElement);return S.addClass(n,"folder"),i},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],nh(t);var e=this;k.each(t.__folders,function(i){t.removeFolder(i)}),k.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=S.getOffset(t.__ul).top,i=0;k.each(t.__ul.childNodes,function(n){t.autoPlace&&n===t.__save_row||(i+=S.getHeight(n))}),window.innerHeight-e-eh<i?(S.addClass(t.domElement,st.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-eh+"px"):(S.removeClass(t.domElement,st.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&k.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:k.debounce(function(){this.onResize()},50),remember:function(){if(k.isUndefined(Jn)&&(Jn=new bu,Jn.domElement.innerHTML=gu),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;k.each(Array.prototype.slice.call(arguments),function(e){t.__rememberedObjects.length===0&&Mu(t),t.__rememberedObjects.indexOf(e)===-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&Ro(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=Rs(this)),t.folders={},k.each(this.__folders,function(e,i){t.folders[i]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Rs(this),Oo(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[os]=Rs(this,!0)),this.load.remembered[t]=Rs(this),this.preset=t,Po(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){k.each(this.__controllers,function(e){this.getRoot().load.remembered?wl(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),k.each(this.__folders,function(e){e.revert(e)}),t||Oo(this.getRoot(),!1)},listen:function(t){var e=this.__listening.length===0;this.__listening.push(t),e&&vl(this.__listening)},updateDisplay:function(){k.each(this.__controllers,function(t){t.updateDisplay()}),k.each(this.__folders,function(t){t.updateDisplay()})}});function ua(a,t,e){var i=document.createElement("li");return t&&i.appendChild(t),e?a.__ul.insertBefore(i,e):a.__ul.appendChild(i),a.onResize(),i}function nh(a){S.unbind(window,"resize",a.__resizeHandler),a.saveToLocalStorageIfPossible&&S.unbind(window,"unload",a.saveToLocalStorageIfPossible)}function Oo(a,t){var e=a.__preset_select[a.__preset_select.selectedIndex];t?e.innerHTML=e.value+"*":e.innerHTML=e.value}function vu(a,t,e){if(e.__li=t,e.__gui=a,k.extend(e,{options:function(r){if(arguments.length>1){var o=e.__li.nextElementSibling;return e.remove(),Zn(a,e.object,e.property,{before:o,factoryArgs:[k.toArray(arguments)]})}if(k.isArray(r)||k.isObject(r)){var h=e.__li.nextElementSibling;return e.remove(),Zn(a,e.object,e.property,{before:h,factoryArgs:[r]})}},name:function(r){return e.__li.firstElementChild.firstElementChild.innerHTML=r,e},listen:function(){return e.__gui.listen(e),e},remove:function(){return e.__gui.remove(e),e}}),e instanceof Co){var i=new yr(e.object,e.property,{min:e.__min,max:e.__max,step:e.__step});k.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var r=e[s],o=i[s];e[s]=i[s]=function(){var h=Array.prototype.slice.call(arguments);return o.apply(i,h),r.apply(e,h)}}),S.addClass(t,"has-slider"),e.domElement.insertBefore(i.domElement,e.domElement.firstElementChild)}else if(e instanceof yr){var n=function(r){if(k.isNumber(e.__min)&&k.isNumber(e.__max)){var o=e.__li.firstElementChild.firstElementChild.innerHTML,h=e.__gui.__listening.indexOf(e)>-1;e.remove();var l=Zn(a,e.object,e.property,{before:e.__li.nextElementSibling,factoryArgs:[e.__min,e.__max,e.__step]});return l.name(o),h&&l.listen(),l}return r};e.min=k.compose(n,e.min),e.max=k.compose(n,e.max)}else e instanceof yl?(S.bind(t,"click",function(){S.fakeEvent(e.__checkbox,"click")}),S.bind(e.__checkbox,"click",function(s){s.stopPropagation()})):e instanceof xl?(S.bind(t,"click",function(){S.fakeEvent(e.__button,"click")}),S.bind(t,"mouseover",function(){S.addClass(e.__button,"hover")}),S.bind(t,"mouseout",function(){S.removeClass(e.__button,"hover")})):e instanceof ko&&(S.addClass(t,"color"),e.updateDisplay=k.compose(function(s){return t.style.borderLeftColor=e.__color.toString(),s},e.updateDisplay),e.updateDisplay());e.setValue=k.compose(function(s){return a.getRoot().__preset_select&&e.isModified()&&Oo(a.getRoot(),!0),s},e.setValue)}function wl(a,t){var e=a.getRoot(),i=e.__rememberedObjects.indexOf(t.object);if(i!==-1){var n=e.__rememberedObjectIndecesToControllers[i];if(n===void 0&&(n={},e.__rememberedObjectIndecesToControllers[i]=n),n[t.property]=t,e.load&&e.load.remembered){var s=e.load.remembered,r=void 0;if(s[a.preset])r=s[a.preset];else if(s[os])r=s[os];else return;if(r[i]&&r[i][t.property]!==void 0){var o=r[i][t.property];t.initialValue=o,t.setValue(o)}}}}function Zn(a,t,e,i){if(t[e]===void 0)throw new Error('Object "'+t+'" has no property "'+e+'"');var n=void 0;if(i.color)n=new ko(t,e);else{var s=[t,e].concat(i.factoryArgs);n=yu.apply(a,s)}i.before instanceof Pi&&(i.before=i.before.__li),wl(a,n),S.addClass(n.domElement,"c");var r=document.createElement("span");S.addClass(r,"property-name"),r.innerHTML=n.property;var o=document.createElement("div");o.appendChild(r),o.appendChild(n.domElement);var h=ua(a,o,i.before);return S.addClass(h,st.CLASS_CONTROLLER_ROW),n instanceof ko?S.addClass(h,"color"):S.addClass(h,au(n.getValue())),vu(a,h,n),a.__controllers.push(n),n}function en(a,t){return document.location.href+"."+t}function Po(a,t,e){var i=document.createElement("option");i.innerHTML=t,i.value=t,a.__preset_select.appendChild(i),e&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function sh(a,t){t.style.display=a.useLocalStorage?"block":"none"}function Mu(a){var t=a.__save_row=document.createElement("li");S.addClass(a.domElement,"has-save"),a.__ul.insertBefore(t,a.__ul.firstChild),S.addClass(t,"save-row");var e=document.createElement("span");e.innerHTML="&nbsp;",S.addClass(e,"button gears");var i=document.createElement("span");i.innerHTML="Save",S.addClass(i,"button"),S.addClass(i,"save");var n=document.createElement("span");n.innerHTML="New",S.addClass(n,"button"),S.addClass(n,"save-as");var s=document.createElement("span");s.innerHTML="Revert",S.addClass(s,"button"),S.addClass(s,"revert");var r=a.__preset_select=document.createElement("select");if(a.load&&a.load.remembered?k.each(a.load.remembered,function(u,d){Po(a,d,d===a.preset)}):Po(a,os,!1),S.bind(r,"change",function(){for(var u=0;u<a.__preset_select.length;u++)a.__preset_select[u].innerHTML=a.__preset_select[u].value;a.preset=this.value}),t.appendChild(r),t.appendChild(e),t.appendChild(i),t.appendChild(n),t.appendChild(s),Gn){var o=document.getElementById("dg-local-explain"),h=document.getElementById("dg-local-storage"),l=document.getElementById("dg-save-locally");l.style.display="block",localStorage.getItem(en(a,"isLocal"))==="true"&&h.setAttribute("checked","checked"),sh(a,o),S.bind(h,"change",function(){a.useLocalStorage=!a.useLocalStorage,sh(a,o)})}var c=document.getElementById("dg-new-constructor");S.bind(c,"keydown",function(u){u.metaKey&&(u.which===67||u.keyCode===67)&&Jn.hide()}),S.bind(e,"click",function(){c.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2),Jn.show(),c.focus(),c.select()}),S.bind(i,"click",function(){a.save()}),S.bind(n,"click",function(){var u=prompt("Enter a new preset name.");u&&a.saveAs(u)}),S.bind(s,"click",function(){a.revert()})}function Tu(a){var t=void 0;a.__resize_handle=document.createElement("div"),k.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function e(s){return s.preventDefault(),a.width+=t-s.clientX,a.onResize(),t=s.clientX,!1}function i(){S.removeClass(a.__closeButton,st.CLASS_DRAG),S.unbind(window,"mousemove",e),S.unbind(window,"mouseup",i)}function n(s){return s.preventDefault(),t=s.clientX,S.addClass(a.__closeButton,st.CLASS_DRAG),S.bind(window,"mousemove",e),S.bind(window,"mouseup",i),!1}S.bind(a.__resize_handle,"mousedown",n),S.bind(a.__closeButton,"mousedown",n),a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function Ro(a,t){a.domElement.style.width=t+"px",a.__save_row&&a.autoPlace&&(a.__save_row.style.width=t+"px"),a.__closeButton&&(a.__closeButton.style.width=t+"px")}function Rs(a,t){var e={};return k.each(a.__rememberedObjects,function(i,n){var s={},r=a.__rememberedObjectIndecesToControllers[n];k.each(r,function(o,h){s[h]=t?o.initialValue:o.getValue()}),e[n]=s}),e}function Su(a){for(var t=0;t<a.__preset_select.length;t++)a.__preset_select[t].value===a.preset&&(a.__preset_select.selectedIndex=t)}function vl(a){a.length!==0&&xu.call(window,function(){vl(a)}),k.each(a,function(t){t.updateDisplay()})}function De(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ml(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var qt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},fn={duration:.5,overwrite:!1,delay:0},da,Pt,gt,ae=1e8,nt=1/ae,zo=Math.PI*2,Au=zo/4,Eu=0,Tl=Math.sqrt,Cu=Math.cos,ku=Math.sin,At=function(t){return typeof t=="string"},lt=function(t){return typeof t=="function"},We=function(t){return typeof t=="number"},fa=function(t){return typeof t>"u"},Ae=function(t){return typeof t=="object"},Bt=function(t){return t!==!1},Sl=function(){return typeof window<"u"},zs=function(t){return lt(t)||At(t)},Al=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Rt=Array.isArray,Lo=/(?:-?\.?\d|\.)+/gi,El=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,sn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Dr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Cl=/[+-]=-?[.\d]+/,kl=/[^,'"\[\]\s]+/gi,Ou=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ot,se,Io,pa,Yt={},_r={},Ol,Pl=function(t){return(_r=Ci(t,Yt))&&Kt},ma=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},xr=function(t,e){return!e&&console.warn(t)},Rl=function(t,e){return t&&(Yt[t]=e)&&_r&&(_r[t]=e)||Yt},as=function(){return 0},Pu={suppressEvents:!0,isStart:!0,kill:!1},ar={suppressEvents:!0,kill:!1},Ru={suppressEvents:!0},ga={},si=[],No={},zl,Wt={},Br={},rh=30,hr=[],ya="",_a=function(t){var e=t[0],i,n;if(Ae(e)||lt(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=hr.length;n--&&!hr[n].targetTest(e););i=hr[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new ec(t[n],i)))||t.splice(n,1);return t},Mi=function(t){return t._gsap||_a(he(t))[0]._gsap},Ll=function(t,e,i){return(i=t[e])&&lt(i)?t[e]():fa(i)&&t.getAttribute&&t.getAttribute(e)||i},Vt=function(t,e){return(t=t.split(",")).forEach(e)||t},dt=function(t){return Math.round(t*1e5)/1e5||0},Ct=function(t){return Math.round(t*1e7)/1e7||0},hn=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},zu=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},br=function(){var t=si.length,e=si.slice(0),i,n;for(No={},si.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Il=function(t,e,i,n){si.length&&!Pt&&br(),t.render(e,i,n||Pt&&e<0&&(t._initted||t._startAt)),si.length&&!Pt&&br()},Nl=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(kl).length<2?e:At(t)?t.trim():t},Fl=function(t){return t},ue=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Lu=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Ci=function(t,e){for(var i in e)t[i]=e[i];return t},oh=function a(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Ae(e[i])?a(t[i]||(t[i]={}),e[i]):e[i]);return t},wr=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},$n=function(t){var e=t.parent||ot,i=t.keyframes?Lu(Rt(t.keyframes)):ue;if(Bt(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Iu=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},Dl=function(t,e,i,n,s){i===void 0&&(i="_first"),n===void 0&&(n="_last");var r=t[n],o;if(s)for(o=e[s];r&&r[s]>o;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=r,e.parent=e._dp=t,e},Pr=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,r=e._next;s?s._next=r:t[i]===e&&(t[i]=r),r?r._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},ai=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Ti=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Nu=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Fo=function(t,e,i,n){return t._startAt&&(Pt?t._startAt.revert(ar):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Fu=function a(t){return!t||t._ts&&a(t.parent)},ah=function(t){return t._repeat?pn(t._tTime,t=t.duration()+t._rDelay)*t:0},pn=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},vr=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Rr=function(t){return t._end=Ct(t._start+(t._tDur/Math.abs(t._ts||t._rts||nt)||0))},zr=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ct(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Rr(t),i._dirty||Ti(i,t)),t},Bl=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=vr(t.rawTime(),e),(!e._dur||Ss(0,e.totalDuration(),i)-e._tTime>nt)&&e.render(i,!0)),Ti(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-nt}},Te=function(t,e,i,n){return e.parent&&ai(e),e._start=Ct((We(i)?i:i||t!==ot?ne(t,i,e):t._time)+e._delay),e._end=Ct(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Dl(t,e,"_first","_last",t._sort?"_start":0),Do(e)||(t._recent=e),n||Bl(t,e),t._ts<0&&zr(t,t._tTime),t},Vl=function(t,e){return(Yt.ScrollTrigger||ma("scrollTrigger",e))&&Yt.ScrollTrigger.create(e,t)},Ul=function(t,e,i,n,s){if(ba(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!Pt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&zl!==Gt.frame)return si.push(t),t._lazy=[s,n],1},Du=function a(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||a(e))},Do=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Bu=function(t,e,i,n){var s=t.ratio,r=e<0||!e&&(!t._start&&Du(t)&&!(!t._initted&&Do(t))||(t._ts<0||t._dp._ts<0)&&!Do(t))?0:1,o=t._rDelay,h=0,l,c,u;if(o&&t._repeat&&(h=Ss(0,t._tDur,e),c=pn(h,o),t._yoyo&&c&1&&(r=1-r),c!==pn(t._tTime,o)&&(s=1-r,t.vars.repeatRefresh&&t._initted&&t.invalidate())),r!==s||Pt||n||t._zTime===nt||!e&&t._zTime){if(!t._initted&&Ul(t,e,n,i,h))return;for(u=t._zTime,t._zTime=e||(i?nt:0),i||(i=e&&!u),t.ratio=r,t._from&&(r=1-r),t._time=0,t._tTime=h,l=t._pt;l;)l.r(r,l.d),l=l._next;e<0&&Fo(t,e,i,!0),t._onUpdate&&!i&&le(t,"onUpdate"),h&&t._repeat&&!i&&t.parent&&le(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===r&&(r&&ai(t,1),!i&&!Pt&&(le(t,r?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Vu=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},mn=function(t,e,i,n){var s=t._repeat,r=Ct(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=r/t._dur),t._dur=r,t._tDur=s?s<0?1e10:Ct(r*(s+1)+t._rDelay*s):r,o>0&&!n&&zr(t,t._tTime=t._tDur*o),t.parent&&Rr(t),i||Ti(t.parent,t),t},hh=function(t){return t instanceof Ft?Ti(t):mn(t,t._dur)},Uu={_start:0,endTime:as,totalDuration:as},ne=function a(t,e,i){var n=t.labels,s=t._recent||Uu,r=t.duration()>=ae?s.endTime(!1):t._dur,o,h,l;return At(e)&&(isNaN(e)||e in n)?(h=e.charAt(0),l=e.substr(-1)==="%",o=e.indexOf("="),h==="<"||h===">"?(o>=0&&(e=e.replace(/=/,"")),(h==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(l?(o<0?s:i).totalDuration()/100:1)):o<0?(e in n||(n[e]=r),n[e]):(h=parseFloat(e.charAt(o-1)+e.substr(o+1)),l&&i&&(h=h/100*(Rt(i)?i[0]:i).totalDuration()),o>1?a(t,e.substr(0,o-1),i)+h:r+h)):e==null?r:+e},Qn=function(t,e,i){var n=We(e[1]),s=(n?2:1)+(t<2?0:1),r=e[s],o,h;if(n&&(r.duration=e[1]),r.parent=i,t){for(o=r,h=i;h&&!("immediateRender"in o);)o=h.vars.defaults||{},h=Bt(h.vars.inherit)&&h.parent;r.immediateRender=Bt(o.immediateRender),t<2?r.runBackwards=1:r.startAt=e[s-1]}return new xt(e[0],r,e[s+1])},ui=function(t,e){return t||t===0?e(t):e},Ss=function(t,e,i){return i<t?t:i>e?e:i},Ot=function(t,e){return!At(t)||!(e=Ou.exec(t))?"":e[1]},Hu=function(t,e,i){return ui(i,function(n){return Ss(t,e,n)})},Bo=[].slice,Hl=function(t,e){return t&&Ae(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ae(t[0]))&&!t.nodeType&&t!==se},ju=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return At(n)&&!e||Hl(n,1)?(s=i).push.apply(s,he(n)):i.push(n)})||i},he=function(t,e,i){return gt&&!e&&gt.selector?gt.selector(t):At(t)&&!i&&(Io||!gn())?Bo.call((e||pa).querySelectorAll(t),0):Rt(t)?ju(t,i):Hl(t)?Bo.call(t,0):t?[t]:[]},Vo=function(t){return t=he(t)[0]||xr("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return he(e,i.querySelectorAll?i:i===t?xr("Invalid scope")||pa.createElement("div"):t)}},jl=function(t){return t.sort(function(){return .5-Math.random()})},Wl=function(t){if(lt(t))return t;var e=Ae(t)?t:{each:t},i=Si(e.ease),n=e.from||0,s=parseFloat(e.base)||0,r={},o=n>0&&n<1,h=isNaN(n)||o,l=e.axis,c=n,u=n;return At(n)?c=u={center:.5,edges:.5,end:1}[n]||0:!o&&h&&(c=n[0],u=n[1]),function(d,f,m){var p=(m||e).length,g=r[p],y,b,_,x,w,A,T,E,C;if(!g){if(C=e.grid==="auto"?0:(e.grid||[1,ae])[1],!C){for(T=-ae;T<(T=m[C++].getBoundingClientRect().left)&&C<p;);C--}for(g=r[p]=[],y=h?Math.min(C,p)*c-.5:n%C,b=C===ae?0:h?p*u/C-.5:n/C|0,T=0,E=ae,A=0;A<p;A++)_=A%C-y,x=b-(A/C|0),g[A]=w=l?Math.abs(l==="y"?x:_):Tl(_*_+x*x),w>T&&(T=w),w<E&&(E=w);n==="random"&&jl(g),g.max=T-E,g.min=E,g.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(C>p?p-1:l?l==="y"?p/C:C:Math.max(C,p/C))||0)*(n==="edges"?-1:1),g.b=p<0?s-p:s,g.u=Ot(e.amount||e.each)||0,i=i&&p<0?$l(i):i}return p=(g[d]-g.min)/g.max||0,Ct(g.b+(i?i(p):p)*g.v)+g.u}},Uo=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=Ct(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(We(i)?0:Ot(i))}},Gl=function(t,e){var i=Rt(t),n,s;return!i&&Ae(t)&&(n=i=t.radius||ae,t.values?(t=he(t.values),(s=!We(t[0]))&&(n*=n)):t=Uo(t.increment)),ui(e,i?lt(t)?function(r){return s=t(r),Math.abs(s-r)<=n?s:r}:function(r){for(var o=parseFloat(s?r.x:r),h=parseFloat(s?r.y:0),l=ae,c=0,u=t.length,d,f;u--;)s?(d=t[u].x-o,f=t[u].y-h,d=d*d+f*f):d=Math.abs(t[u]-o),d<l&&(l=d,c=u);return c=!n||l<=n?t[c]:r,s||c===r||We(r)?c:c+Ot(r)}:Uo(t))},ql=function(t,e,i,n){return ui(Rt(t)?!e:i===!0?!!(i=0):!n,function(){return Rt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},Wu=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,r){return r(s)},n)}},Gu=function(t,e){return function(i){return t(parseFloat(i))+(e||Ot(i))}},qu=function(t,e,i){return Yl(t,e,0,1,i)},Xl=function(t,e,i){return ui(i,function(n){return t[~~e(n)]})},Xu=function a(t,e,i){var n=e-t;return Rt(t)?Xl(t,a(0,t.length),e):ui(i,function(s){return(n+(s-t)%n)%n+t})},Yu=function a(t,e,i){var n=e-t,s=n*2;return Rt(t)?Xl(t,a(0,t.length-1),e):ui(i,function(r){return r=(s+(r-t)%s)%s||0,t+(r>n?s-r:r)})},hs=function(t){for(var e=0,i="",n,s,r,o;~(n=t.indexOf("random(",e));)r=t.indexOf(")",n),o=t.charAt(n+7)==="[",s=t.substr(n+7,r-n-7).match(o?kl:Lo),i+=t.substr(e,n-e)+ql(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),e=r+1;return i+t.substr(e,t.length-e)},Yl=function(t,e,i,n,s){var r=e-t,o=n-i;return ui(s,function(h){return i+((h-t)/r*o||0)})},Ku=function a(t,e,i,n){var s=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!s){var r=At(t),o={},h,l,c,u,d;if(i===!0&&(n=1)&&(i=null),r)t={p:t},e={p:e};else if(Rt(t)&&!Rt(e)){for(c=[],u=t.length,d=u-2,l=1;l<u;l++)c.push(a(t[l-1],t[l]));u--,s=function(m){m*=u;var p=Math.min(d,~~m);return c[p](m-p)},i=e}else n||(t=Ci(Rt(t)?[]:{},t));if(!c){for(h in e)xa.call(o,t,h,"get",e[h]);s=function(m){return Ma(m,o)||(r?t.p:t)}}}return ui(i,s)},lh=function(t,e,i){var n=t.labels,s=ae,r,o,h;for(r in n)o=n[r]-e,o<0==!!i&&o&&s>(o=Math.abs(o))&&(h=r,s=o);return h},le=function(t,e,i){var n=t.vars,s=n[e],r=gt,o=t._ctx,h,l,c;if(s)return h=n[e+"Params"],l=n.callbackScope||t,i&&si.length&&br(),o&&(gt=o),c=h?s.apply(l,h):s.call(l),gt=r,c},qn=function(t){return ai(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Pt),t.progress()<1&&le(t,"onInterrupt"),t},rn,Ju=function(t){t=!t.name&&t.default||t;var e=t.name,i=lt(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:as,render:Ma,add:xa,kill:dd,modifier:ud,rawVars:0},r={targetTest:0,get:0,getSetter:va,aliases:{},register:0};if(gn(),t!==n){if(Wt[e])return;ue(n,ue(wr(t,s),r)),Ci(n.prototype,Ci(s,wr(t,r))),Wt[n.prop=e]=n,t.targetTest&&(hr.push(n),ga[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Rl(e,n),t.register&&t.register(Kt,n,Ut)},et=255,Xn={aqua:[0,et,et],lime:[0,et,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,et],navy:[0,0,128],white:[et,et,et],olive:[128,128,0],yellow:[et,et,0],orange:[et,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[et,0,0],pink:[et,192,203],cyan:[0,et,et],transparent:[et,et,et,0]},Vr=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*et+.5|0},Kl=function(t,e,i){var n=t?We(t)?[t>>16,t>>8&et,t&et]:0:Xn.black,s,r,o,h,l,c,u,d,f,m;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Xn[t])n=Xn[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),r=t.charAt(2),o=t.charAt(3),t="#"+s+s+r+r+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&et,n&et,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&et,t&et]}else if(t.substr(0,3)==="hsl"){if(n=m=t.match(Lo),!e)h=+n[0]%360/360,l=+n[1]/100,c=+n[2]/100,r=c<=.5?c*(l+1):c+l-c*l,s=c*2-r,n.length>3&&(n[3]*=1),n[0]=Vr(h+1/3,s,r),n[1]=Vr(h,s,r),n[2]=Vr(h-1/3,s,r);else if(~t.indexOf("="))return n=t.match(El),i&&n.length<4&&(n[3]=1),n}else n=t.match(Lo)||Xn.transparent;n=n.map(Number)}return e&&!m&&(s=n[0]/et,r=n[1]/et,o=n[2]/et,u=Math.max(s,r,o),d=Math.min(s,r,o),c=(u+d)/2,u===d?h=l=0:(f=u-d,l=c>.5?f/(2-u-d):f/(u+d),h=u===s?(r-o)/f+(r<o?6:0):u===r?(o-s)/f+2:(s-r)/f+4,h*=60),n[0]=~~(h+.5),n[1]=~~(l*100+.5),n[2]=~~(c*100+.5)),i&&n.length<4&&(n[3]=1),n},Jl=function(t){var e=[],i=[],n=-1;return t.split(ri).forEach(function(s){var r=s.match(sn)||[];e.push.apply(e,r),i.push(n+=r.length+1)}),e.c=i,e},ch=function(t,e,i){var n="",s=(t+n).match(ri),r=e?"hsla(":"rgba(",o=0,h,l,c,u;if(!s)return t;if(s=s.map(function(d){return(d=Kl(d,e,1))&&r+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(c=Jl(t),h=i.c,h.join(n)!==c.c.join(n)))for(l=t.replace(ri,"1").split(sn),u=l.length-1;o<u;o++)n+=l[o]+(~h.indexOf(o)?s.shift()||r+"0,0,0,0)":(c.length?c:s.length?s:i).shift());if(!l)for(l=t.split(ri),u=l.length-1;o<u;o++)n+=l[o]+s[o];return n+l[u]},ri=function(){var a="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Xn)a+="|"+t+"\\b";return new RegExp(a+")","gi")}(),Zu=/hsl[a]?\(/,Zl=function(t){var e=t.join(" "),i;if(ri.lastIndex=0,ri.test(e))return i=Zu.test(e),t[1]=ch(t[1],i),t[0]=ch(t[0],i,Jl(t[1])),!0},ls,Gt=function(){var a=Date.now,t=500,e=33,i=a(),n=i,s=1e3/240,r=s,o=[],h,l,c,u,d,f,m=function p(g){var y=a()-n,b=g===!0,_,x,w,A;if(y>t&&(i+=y-e),n+=y,w=n-i,_=w-r,(_>0||b)&&(A=++u.frame,d=w-u.time*1e3,u.time=w=w/1e3,r+=_+(_>=s?4:s-_),x=1),b||(h=l(p)),x)for(f=0;f<o.length;f++)o[f](w,d,A,g)};return u={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){Ol&&(!Io&&Sl()&&(se=Io=window,pa=se.document||{},Yt.gsap=Kt,(se.gsapVersions||(se.gsapVersions=[])).push(Kt.version),Pl(_r||se.GreenSockGlobals||!se.gsap&&se||{}),c=se.requestAnimationFrame),h&&u.sleep(),l=c||function(g){return setTimeout(g,r-u.time*1e3+1|0)},ls=1,m(2))},sleep:function(){(c?se.cancelAnimationFrame:clearTimeout)(h),ls=0,l=as},lagSmoothing:function(g,y){t=g||1/0,e=Math.min(y||33,t)},fps:function(g){s=1e3/(g||240),r=u.time*1e3+s},add:function(g,y,b){var _=y?function(x,w,A,T){g(x,w,A,T),u.remove(_)}:g;return u.remove(g),o[b?"unshift":"push"](_),gn(),_},remove:function(g,y){~(y=o.indexOf(g))&&o.splice(y,1)&&f>=y&&f--},_listeners:o},u}(),gn=function(){return!ls&&Gt.wake()},q={},$u=/^[\d.\-M][\d.\-,\s]/,Qu=/["']/g,td=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,r=i.length,o,h,l;s<r;s++)h=i[s],o=s!==r-1?h.lastIndexOf(","):h.length,l=h.substr(0,o),e[n]=isNaN(l)?l.replace(Qu,"").trim():+l,n=h.substr(o+1).trim();return e},ed=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},id=function(t){var e=(t+"").split("("),i=q[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[td(e[1])]:ed(t).split(",").map(Nl)):q._CE&&$u.test(t)?q._CE("",t):i},$l=function(t){return function(e){return 1-t(1-e)}},Ql=function a(t,e){for(var i=t._first,n;i;)i instanceof Ft?a(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?a(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},Si=function(t,e){return t&&(lt(t)?t:q[t]||id(t))||e},Ri=function(t,e,i,n){i===void 0&&(i=function(h){return 1-e(1-h)}),n===void 0&&(n=function(h){return h<.5?e(h*2)/2:1-e((1-h)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},r;return Vt(t,function(o){q[o]=Yt[o]=s,q[r=o.toLowerCase()]=i;for(var h in s)q[r+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=q[o+"."+h]=s[h]}),s},tc=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Ur=function a(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),r=s/zo*(Math.asin(1/n)||0),o=function(c){return c===1?1:n*Math.pow(2,-10*c)*ku((c-r)*s)+1},h=t==="out"?o:t==="in"?function(l){return 1-o(1-l)}:tc(o);return s=zo/s,h.config=function(l,c){return a(t,l,c)},h},Hr=function a(t,e){e===void 0&&(e=1.70158);var i=function(r){return r?--r*r*((e+1)*r+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:tc(i);return n.config=function(s){return a(t,s)},n};Vt("Linear,Quad,Cubic,Quart,Quint,Strong",function(a,t){var e=t<5?t+1:t;Ri(a+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});q.Linear.easeNone=q.none=q.Linear.easeIn;Ri("Elastic",Ur("in"),Ur("out"),Ur());(function(a,t){var e=1/t,i=2*e,n=2.5*e,s=function(o){return o<e?a*o*o:o<i?a*Math.pow(o-1.5/t,2)+.75:o<n?a*(o-=2.25/t)*o+.9375:a*Math.pow(o-2.625/t,2)+.984375};Ri("Bounce",function(r){return 1-s(1-r)},s)})(7.5625,2.75);Ri("Expo",function(a){return a?Math.pow(2,10*(a-1)):0});Ri("Circ",function(a){return-(Tl(1-a*a)-1)});Ri("Sine",function(a){return a===1?1:-Cu(a*Au)+1});Ri("Back",Hr("in"),Hr("out"),Hr());q.SteppedEase=q.steps=Yt.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,r=1-nt;return function(o){return((n*Ss(0,r,o)|0)+s)*i}}};fn.ease=q["quad.out"];Vt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(a){return ya+=a+","+a+"Params,"});var ec=function(t,e){this.id=Eu++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Ll,this.set=e?e.getSetter:va},yn=function(){function a(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,mn(this,+e.duration,1,1),this.data=e.data,gt&&(this._ctx=gt,gt.data.push(this)),ls||Gt.wake()}var t=a.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,mn(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(gn(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(zr(this,i),!s._dp||s.parent||Bl(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Te(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===nt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Il(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ah(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ah(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?pn(this._tTime,s)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-nt?0:this._rts;if(this._rts===i)return this;var n=this.parent&&this._ts?vr(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-nt?0:this._rts,this.totalTime(Ss(-this._delay,this._tDur,n),!0),Rr(this),Nu(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==nt&&(this._tTime-=nt)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Te(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Bt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?vr(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Ru);var n=Pt;return Pt=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Pt=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(n._ts||1),n=n._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,hh(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,hh(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(ne(this,i),Bt(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Bt(n))},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-nt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-nt,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-nt)},t.eventCallback=function(i,n,s){var r=this.vars;return arguments.length>1?(n?(r[i]=n,s&&(r[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete r[i],this):r[i]},t.then=function(i){var n=this;return new Promise(function(s){var r=lt(i)?i:Fl,o=function(){var l=n.then;n.then=null,lt(r)&&(r=r(n))&&(r.then||r===n)&&(n.then=l),s(r),n.then=l};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},t.kill=function(){qn(this)},a}();ue(yn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-nt,_prom:0,_ps:!1,_rts:1});var Ft=function(a){Ml(t,a);function t(i,n){var s;return i===void 0&&(i={}),s=a.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Bt(i.sortChildren),ot&&Te(i.parent||ot,De(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Vl(De(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,r){return Qn(0,arguments,this),this},e.from=function(n,s,r){return Qn(1,arguments,this),this},e.fromTo=function(n,s,r,o){return Qn(2,arguments,this),this},e.set=function(n,s,r){return s.duration=0,s.parent=this,$n(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new xt(n,s,ne(this,r),1),this},e.call=function(n,s,r){return Te(this,xt.delayedCall(0,n,s),r)},e.staggerTo=function(n,s,r,o,h,l,c){return r.duration=s,r.stagger=r.stagger||o,r.onComplete=l,r.onCompleteParams=c,r.parent=this,new xt(n,r,ne(this,h)),this},e.staggerFrom=function(n,s,r,o,h,l,c){return r.runBackwards=1,$n(r).immediateRender=Bt(r.immediateRender),this.staggerTo(n,s,r,o,h,l,c)},e.staggerFromTo=function(n,s,r,o,h,l,c,u){return o.startAt=r,$n(o).immediateRender=Bt(o.immediateRender),this.staggerTo(n,s,o,h,l,c,u)},e.render=function(n,s,r){var o=this._time,h=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=n<=0?0:Ct(n),u=this._zTime<0!=n<0&&(this._initted||!l),d,f,m,p,g,y,b,_,x,w,A,T;if(this!==ot&&c>h&&n>=0&&(c=h),c!==this._tTime||r||u){if(o!==this._time&&l&&(c+=this._time-o,n+=this._time-o),d=c,x=this._start,_=this._ts,y=!_,u&&(l||(o=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(A=this._yoyo,g=l+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,s,r);if(d=Ct(c%g),c===h?(p=this._repeat,d=l):(p=~~(c/g),p&&p===c/g&&(d=l,p--),d>l&&(d=l)),w=pn(this._tTime,g),!o&&this._tTime&&w!==p&&(w=p),A&&p&1&&(d=l-d,T=1),p!==w&&!this._lock){var E=A&&w&1,C=E===(A&&p&1);if(p<w&&(E=!E),o=E?0:l,this._lock=1,this.render(o||(T?0:Ct(p*g)),s,!l)._lock=0,this._tTime=c,!s&&this.parent&&le(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),o&&o!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,h=this._tDur,C&&(this._lock=2,o=E?l:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Ql(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Vu(this,Ct(o),Ct(d)),b&&(c-=d-(d=b._start))),this._tTime=c,this._time=d,this._act=!_,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&d&&!s&&(le(this,"onStart"),this._tTime!==c))return this;if(d>=o&&n>=0)for(f=this._first;f;){if(m=f._next,(f._act||d>=f._start)&&f._ts&&b!==f){if(f.parent!==this)return this.render(n,s,r);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,r),d!==this._time||!this._ts&&!y){b=0,m&&(c+=this._zTime=-nt);break}}f=m}else{f=this._last;for(var O=n<0?n:d;f;){if(m=f._prev,(f._act||O<=f._end)&&f._ts&&b!==f){if(f.parent!==this)return this.render(n,s,r);if(f.render(f._ts>0?(O-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(O-f._start)*f._ts,s,r||Pt&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!y){b=0,m&&(c+=this._zTime=O?-nt:nt);break}}f=m}}if(b&&!s&&(this.pause(),b.render(d>=o?0:-nt)._zTime=d>=o?1:-1,this._ts))return this._start=x,Rr(this),this.render(n,s,r);this._onUpdate&&!s&&le(this,"onUpdate",!0),(c===h&&this._tTime>=this.totalDuration()||!c&&o)&&(x===this._start||Math.abs(_)!==Math.abs(this._ts))&&(this._lock||((n||!l)&&(c===h&&this._ts>0||!c&&this._ts<0)&&ai(this,1),!s&&!(n<0&&!o)&&(c||o||!h)&&(le(this,c===h&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<h&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var r=this;if(We(s)||(s=ne(this,s,n)),!(n instanceof yn)){if(Rt(n))return n.forEach(function(o){return r.add(o,s)}),this;if(At(n))return this.addLabel(n,s);if(lt(n))n=xt.delayedCall(0,n);else return this}return this!==n?Te(this,n,s):this},e.getChildren=function(n,s,r,o){n===void 0&&(n=!0),s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=-ae);for(var h=[],l=this._first;l;)l._start>=o&&(l instanceof xt?s&&h.push(l):(r&&h.push(l),n&&h.push.apply(h,l.getChildren(!0,s,r)))),l=l._next;return h},e.getById=function(n){for(var s=this.getChildren(1,1,1),r=s.length;r--;)if(s[r].vars.id===n)return s[r]},e.remove=function(n){return At(n)?this.removeLabel(n):lt(n)?this.killTweensOf(n):(Pr(this,n),n===this._recent&&(this._recent=this._last),Ti(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ct(Gt.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),a.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=ne(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,r){var o=xt.delayedCall(0,s||as,r);return o.data="isPause",this._hasPause=1,Te(this,o,ne(this,n))},e.removePause=function(n){var s=this._first;for(n=ne(this,n);s;)s._start===n&&s.data==="isPause"&&ai(s),s=s._next},e.killTweensOf=function(n,s,r){for(var o=this.getTweensOf(n,r),h=o.length;h--;)Qe!==o[h]&&o[h].kill(n,s);return this},e.getTweensOf=function(n,s){for(var r=[],o=he(n),h=this._first,l=We(s),c;h;)h instanceof xt?zu(h._targets,o)&&(l?(!Qe||h._initted&&h._ts)&&h.globalTime(0)<=s&&h.globalTime(h.totalDuration())>s:!s||h.isActive())&&r.push(h):(c=h.getTweensOf(o,s)).length&&r.push.apply(r,c),h=h._next;return r},e.tweenTo=function(n,s){s=s||{};var r=this,o=ne(r,n),h=s,l=h.startAt,c=h.onStart,u=h.onStartParams,d=h.immediateRender,f,m=xt.to(r,ue({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(l&&"time"in l?l.time:r._time))/r.timeScale())||nt,onStart:function(){if(r.pause(),!f){var g=s.duration||Math.abs((o-(l&&"time"in l?l.time:r._time))/r.timeScale());m._dur!==g&&mn(m,g,0,1).render(m._time,!0,!0),f=1}c&&c.apply(m,u||[])}},s));return d?m.render(0):m},e.tweenFromTo=function(n,s,r){return this.tweenTo(s,ue({startAt:{time:ne(this,n)}},r))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),lh(this,ne(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),lh(this,ne(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+nt)},e.shiftChildren=function(n,s,r){r===void 0&&(r=0);for(var o=this._first,h=this.labels,l;o;)o._start>=r&&(o._start+=n,o._end+=n),o=o._next;if(s)for(l in h)h[l]>=r&&(h[l]+=n);return Ti(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return a.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,r;s;)r=s._next,this.remove(s),s=r;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Ti(this)},e.totalDuration=function(n){var s=0,r=this,o=r._last,h=ae,l,c,u;if(arguments.length)return r.timeScale((r._repeat<0?r.duration():r.totalDuration())/(r.reversed()?-n:n));if(r._dirty){for(u=r.parent;o;)l=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>h&&r._sort&&o._ts&&!r._lock?(r._lock=1,Te(r,o,c-o._delay,1)._lock=0):h=c,c<0&&o._ts&&(s-=c,(!u&&!r._dp||u&&u.smoothChildTiming)&&(r._start+=c/r._ts,r._time-=c,r._tTime-=c),r.shiftChildren(-c,!1,-1/0),h=0),o._end>s&&o._ts&&(s=o._end),o=l;mn(r,r===ot&&r._time>s?r._time:s,1,1),r._dirty=0}return r._tDur},t.updateRoot=function(n){if(ot._ts&&(Il(ot,vr(n,ot)),zl=Gt.frame),Gt.frame>=rh){rh+=qt.autoSleep||120;var s=ot._first;if((!s||!s._ts)&&qt.autoSleep&&Gt._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Gt.sleep()}}},t}(yn);ue(Ft.prototype,{_lock:0,_hasPause:0,_forcing:0});var nd=function(t,e,i,n,s,r,o){var h=new Ut(this._pt,t,e,0,1,ac,null,s),l=0,c=0,u,d,f,m,p,g,y,b;for(h.b=i,h.e=n,i+="",n+="",(y=~n.indexOf("random("))&&(n=hs(n)),r&&(b=[i,n],r(b,t,e),i=b[0],n=b[1]),d=i.match(Dr)||[];u=Dr.exec(n);)m=u[0],p=n.substring(l,u.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),m!==d[c++]&&(g=parseFloat(d[c-1])||0,h._pt={_next:h._pt,p:p||c===1?p:",",s:g,c:m.charAt(1)==="="?hn(g,m)-g:parseFloat(m)-g,m:f&&f<4?Math.round:0},l=Dr.lastIndex);return h.c=l<n.length?n.substring(l,n.length):"",h.fp=o,(Cl.test(n)||y)&&(h.e=0),this._pt=h,h},xa=function(t,e,i,n,s,r,o,h,l,c){lt(n)&&(n=n(s||0,t,r));var u=t[e],d=i!=="get"?i:lt(u)?l?t[e.indexOf("set")||!lt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():u,f=lt(u)?l?hd:rc:wa,m;if(At(n)&&(~n.indexOf("random(")&&(n=hs(n)),n.charAt(1)==="="&&(m=hn(d,n)+(Ot(d)||0),(m||m===0)&&(n=m))),!c||d!==n||Ho)return!isNaN(d*n)&&n!==""?(m=new Ut(this._pt,t,e,+d||0,n-(d||0),typeof u=="boolean"?cd:oc,0,f),l&&(m.fp=l),o&&m.modifier(o,this,t),this._pt=m):(!u&&!(e in t)&&ma(e,n),nd.call(this,t,e,d,n,f,h||qt.stringFilter,l))},sd=function(t,e,i,n,s){if(lt(t)&&(t=ts(t,s,e,i,n)),!Ae(t)||t.style&&t.nodeType||Rt(t)||Al(t))return At(t)?ts(t,s,e,i,n):t;var r={},o;for(o in t)r[o]=ts(t[o],s,e,i,n);return r},ic=function(t,e,i,n,s,r){var o,h,l,c;if(Wt[t]&&(o=new Wt[t]).init(s,o.rawVars?e[t]:sd(e[t],n,s,r,i),i,n,r)!==!1&&(i._pt=h=new Ut(i._pt,s,t,0,1,o.render,o,0,o.priority),i!==rn))for(l=i._ptLookup[i._targets.indexOf(s)],c=o._props.length;c--;)l[o._props[c]]=h;return o},Qe,Ho,ba=function a(t,e,i){var n=t.vars,s=n.ease,r=n.startAt,o=n.immediateRender,h=n.lazy,l=n.onUpdate,c=n.onUpdateParams,u=n.callbackScope,d=n.runBackwards,f=n.yoyoEase,m=n.keyframes,p=n.autoRevert,g=t._dur,y=t._startAt,b=t._targets,_=t.parent,x=_&&_.data==="nested"?_.vars.targets:b,w=t._overwrite==="auto"&&!da,A=t.timeline,T,E,C,O,P,V,N,U,D,W,Y,Q,yt;if(A&&(!m||!s)&&(s="none"),t._ease=Si(s,fn.ease),t._yEase=f?$l(Si(f===!0?s:f,fn.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!A&&!!n.runBackwards,!A||m&&!n.stagger){if(U=b[0]?Mi(b[0]).harness:0,Q=U&&n[U.prop],T=wr(n,ga),y&&(y._zTime<0&&y.progress(1),e<0&&d&&o&&!p?y.render(-1,!0):y.revert(d&&g?ar:Pu),y._lazy=0),r){if(ai(t._startAt=xt.set(b,ue({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!y&&Bt(h),startAt:null,delay:0,onUpdate:l,onUpdateParams:c,callbackScope:u,stagger:0},r))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Pt||!o&&!p)&&t._startAt.revert(ar),o&&g&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(d&&g&&!y){if(e&&(o=!1),C=ue({overwrite:!1,data:"isFromStart",lazy:o&&!y&&Bt(h),immediateRender:o,stagger:0,parent:_},T),Q&&(C[U.prop]=Q),ai(t._startAt=xt.set(b,C)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Pt?t._startAt.revert(ar):t._startAt.render(-1,!0)),t._zTime=e,!o)a(t._startAt,nt,nt);else if(!e)return}for(t._pt=t._ptCache=0,h=g&&Bt(h)||h&&!g,E=0;E<b.length;E++){if(P=b[E],N=P._gsap||_a(b)[E]._gsap,t._ptLookup[E]=W={},No[N.id]&&si.length&&br(),Y=x===b?E:x.indexOf(P),U&&(D=new U).init(P,Q||T,t,Y,x)!==!1&&(t._pt=O=new Ut(t._pt,P,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(bt){W[bt]=O}),D.priority&&(V=1)),!U||Q)for(C in T)Wt[C]&&(D=ic(C,T,t,Y,P,x))?D.priority&&(V=1):W[C]=O=xa.call(t,P,C,"get",T[C],Y,x,0,n.stringFilter);t._op&&t._op[E]&&t.kill(P,t._op[E]),w&&t._pt&&(Qe=t,ot.killTweensOf(P,W,t.globalTime(e)),yt=!t.parent,Qe=0),t._pt&&h&&(No[N.id]=1)}V&&hc(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!yt,m&&e<=0&&A.render(ae,!0,!0)},rd=function(t,e,i,n,s,r,o){var h=(t._pt&&t._ptCache||(t._ptCache={}))[e],l,c,u,d;if(!h)for(h=t._ptCache[e]=[],u=t._ptLookup,d=t._targets.length;d--;){if(l=u[d][e],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return Ho=1,t.vars[e]="+=0",ba(t,o),Ho=0,1;h.push(l)}for(d=h.length;d--;)c=h[d],l=c._pt||c,l.s=(n||n===0)&&!s?n:l.s+(n||0)+r*l.c,l.c=i-l.s,c.e&&(c.e=dt(i)+Ot(c.e)),c.b&&(c.b=l.s+Ot(c.b))},od=function(t,e){var i=t[0]?Mi(t[0]).harness:0,n=i&&i.aliases,s,r,o,h;if(!n)return e;s=Ci({},e);for(r in n)if(r in s)for(h=n[r].split(","),o=h.length;o--;)s[h[o]]=s[r];return s},ad=function(t,e,i,n){var s=e.ease||n||"power1.inOut",r,o;if(Rt(e))o=i[t]||(i[t]=[]),e.forEach(function(h,l){return o.push({t:l/(e.length-1)*100,v:h,e:s})});else for(r in e)o=i[r]||(i[r]=[]),r==="ease"||o.push({t:parseFloat(t),v:e[r],e:s})},ts=function(t,e,i,n,s){return lt(t)?t.call(e,i,n,s):At(t)&&~t.indexOf("random(")?hs(t):t},nc=ya+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",sc={};Vt(nc+",id,stagger,delay,duration,paused,scrollTrigger",function(a){return sc[a]=1});var xt=function(a){Ml(t,a);function t(i,n,s,r){var o;typeof n=="number"&&(s.duration=n,n=s,s=null),o=a.call(this,r?n:$n(n))||this;var h=o.vars,l=h.duration,c=h.delay,u=h.immediateRender,d=h.stagger,f=h.overwrite,m=h.keyframes,p=h.defaults,g=h.scrollTrigger,y=h.yoyoEase,b=n.parent||ot,_=(Rt(i)||Al(i)?We(i[0]):"length"in n)?[i]:he(i),x,w,A,T,E,C,O,P;if(o._targets=_.length?_a(_):xr("GSAP target "+i+" not found. https://greensock.com",!qt.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,m||d||zs(l)||zs(c)){if(n=o.vars,x=o.timeline=new Ft({data:"nested",defaults:p||{},targets:b&&b.data==="nested"?b.vars.targets:_}),x.kill(),x.parent=x._dp=De(o),x._start=0,d||zs(l)||zs(c)){if(T=_.length,O=d&&Wl(d),Ae(d))for(E in d)~nc.indexOf(E)&&(P||(P={}),P[E]=d[E]);for(w=0;w<T;w++)A=wr(n,sc),A.stagger=0,y&&(A.yoyoEase=y),P&&Ci(A,P),C=_[w],A.duration=+ts(l,De(o),w,C,_),A.delay=(+ts(c,De(o),w,C,_)||0)-o._delay,!d&&T===1&&A.delay&&(o._delay=c=A.delay,o._start+=c,A.delay=0),x.to(C,A,O?O(w,C,_):0),x._ease=q.none;x.duration()?l=c=0:o.timeline=0}else if(m){$n(ue(x.vars.defaults,{ease:"none"})),x._ease=Si(m.ease||n.ease||"none");var V=0,N,U,D;if(Rt(m))m.forEach(function(W){return x.to(_,W,">")}),x.duration();else{A={};for(E in m)E==="ease"||E==="easeEach"||ad(E,m[E],A,m.easeEach);for(E in A)for(N=A[E].sort(function(W,Y){return W.t-Y.t}),V=0,w=0;w<N.length;w++)U=N[w],D={ease:U.e,duration:(U.t-(w?N[w-1].t:0))/100*l},D[E]=U.v,x.to(_,D,V),V+=D.duration;x.duration()<l&&x.to({},{duration:l-x.duration()})}}l||o.duration(l=x.duration())}else o.timeline=0;return f===!0&&!da&&(Qe=De(o),ot.killTweensOf(_),Qe=0),Te(b,De(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(u||!l&&!m&&o._start===Ct(b._time)&&Bt(u)&&Fu(De(o))&&b.data!=="nested")&&(o._tTime=-nt,o.render(Math.max(0,-c)||0)),g&&Vl(De(o),g),o}var e=t.prototype;return e.render=function(n,s,r){var o=this._time,h=this._tDur,l=this._dur,c=n<0,u=n>h-nt&&!c?h:n<nt?0:n,d,f,m,p,g,y,b,_,x;if(!l)Bu(this,n,s,r);else if(u!==this._tTime||!n||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=u,_=this.timeline,this._repeat){if(p=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+n,s,r);if(d=Ct(u%p),u===h?(m=this._repeat,d=l):(m=~~(u/p),m&&m===u/p&&(d=l,m--),d>l&&(d=l)),y=this._yoyo&&m&1,y&&(x=this._yEase,d=l-d),g=pn(this._tTime,p),d===o&&!r&&this._initted)return this._tTime=u,this;m!==g&&(_&&this._yEase&&Ql(_,y),this.vars.repeatRefresh&&!y&&!this._lock&&(this._lock=r=1,this.render(Ct(p*m),!0).invalidate()._lock=0))}if(!this._initted){if(Ul(this,c?n:d,r,s,u))return this._tTime=0,this;if(o!==this._time)return this;if(l!==this._dur)return this.render(n,s,r)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(x||this._ease)(d/l),this._from&&(this.ratio=b=1-b),d&&!o&&!s&&(le(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(b,f.d),f=f._next;_&&_.render(n<0?n:!d&&y?-nt:_._dur*_._ease(d/this._dur),s,r)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(c&&Fo(this,n,s,r),le(this,"onUpdate")),this._repeat&&m!==g&&this.vars.onRepeat&&!s&&this.parent&&le(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&Fo(this,n,!0,!0),(n||!l)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&ai(this,1),!s&&!(c&&!o)&&(u||o||y)&&(le(this,u===h?"onComplete":"onReverseComplete",!0),this._prom&&!(u<h&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),a.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,r,o){ls||Gt.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||ba(this,h),l=this._ease(h/this._dur),rd(this,n,s,r,o,l,h)?this.resetTo(n,s,r,o):(zr(this,0),this.parent||Dl(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?qn(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Qe&&Qe.vars.overwrite!==!0)._first||qn(this),this.parent&&r!==this.timeline.totalDuration()&&mn(this,this._dur*this.timeline._tDur/r,0,1),this}var o=this._targets,h=n?he(n):o,l=this._ptLookup,c=this._pt,u,d,f,m,p,g,y;if((!s||s==="all")&&Iu(o,h))return s==="all"&&(this._pt=0),qn(this);for(u=this._op=this._op||[],s!=="all"&&(At(s)&&(p={},Vt(s,function(b){return p[b]=1}),s=p),s=od(o,s)),y=o.length;y--;)if(~h.indexOf(o[y])){d=l[y],s==="all"?(u[y]=s,m=d,f={}):(f=u[y]=u[y]||{},m=s);for(p in m)g=d&&d[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&Pr(this,g,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&c&&qn(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return Qn(1,arguments)},t.delayedCall=function(n,s,r,o){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:o})},t.fromTo=function(n,s,r){return Qn(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,r){return ot.killTweensOf(n,s,r)},t}(yn);ue(xt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Vt("staggerTo,staggerFrom,staggerFromTo",function(a){xt[a]=function(){var t=new Ft,e=Bo.call(arguments,0);return e.splice(a==="staggerFromTo"?5:4,0,0),t[a].apply(t,e)}});var wa=function(t,e,i){return t[e]=i},rc=function(t,e,i){return t[e](i)},hd=function(t,e,i,n){return t[e](n.fp,i)},ld=function(t,e,i){return t.setAttribute(e,i)},va=function(t,e){return lt(t[e])?rc:fa(t[e])&&t.setAttribute?ld:wa},oc=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},cd=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ac=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Ma=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ud=function(t,e,i,n){for(var s=this._pt,r;s;)r=s._next,s.p===n&&s.modifier(t,e,i),s=r},dd=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?Pr(this,e,"_pt"):e.dep||(i=1),e=n;return!i},fd=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},hc=function(t){for(var e=t._pt,i,n,s,r;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:r)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:r=e,e=i}t._pt=s},Ut=function(){function a(e,i,n,s,r,o,h,l,c){this.t=i,this.s=s,this.c=r,this.p=n,this.r=o||oc,this.d=h||this,this.set=l||wa,this.pr=c||0,this._next=e,e&&(e._prev=this)}var t=a.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=fd,this.m=i,this.mt=s,this.tween=n},a}();Vt(ya+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(a){return ga[a]=1});Yt.TweenMax=Yt.TweenLite=xt;Yt.TimelineLite=Yt.TimelineMax=Ft;ot=new Ft({sortChildren:!1,defaults:fn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});qt.stringFilter=Zl;var _n=[],lr={},pd=[],uh=0,jr=function(t){return(lr[t]||pd).map(function(e){return e()})},jo=function(){var t=Date.now(),e=[];t-uh>2&&(jr("matchMediaInit"),_n.forEach(function(i){var n=i.queries,s=i.conditions,r,o,h,l;for(o in n)r=se.matchMedia(n[o]).matches,r&&(h=1),r!==s[o]&&(s[o]=r,l=1);l&&(i.revert(),h&&e.push(i))}),jr("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i)}),uh=t,jr("matchMedia"))},lc=function(){function a(e,i){this.selector=i&&Vo(i),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=a.prototype;return t.add=function(i,n,s){lt(i)&&(s=n,n=i,i=lt);var r=this,o=function(){var l=gt,c=r.selector,u;return l&&l!==r&&l.data.push(r),s&&(r.selector=Vo(s)),gt=r,u=n.apply(r,arguments),lt(u)&&r._r.push(u),gt=l,r.selector=c,r.isReverted=!1,u};return r.last=o,i===lt?o(r):i?r[i]=o:o},t.ignore=function(i){var n=gt;gt=null,i(this),gt=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof a?i.push.apply(i,n.getTweens()):n instanceof xt&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i){var r=this.getTweens();this.data.forEach(function(h){h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(l){return r.splice(r.indexOf(l),1)}))}),r.map(function(h){return{g:h.globalTime(0),t:h}}).sort(function(h,l){return l.g-h.g||-1}).forEach(function(h){return h.t.revert(i)}),this.data.forEach(function(h){return!(h instanceof yn)&&h.revert&&h.revert(i)}),this._r.forEach(function(h){return h(i,s)}),this.isReverted=!0}else this.data.forEach(function(h){return h.kill&&h.kill()});if(this.clear(),n){var o=_n.indexOf(this);~o&&_n.splice(o,1)}},t.revert=function(i){this.kill(i||{})},a}(),md=function(){function a(e){this.contexts=[],this.scope=e}var t=a.prototype;return t.add=function(i,n,s){Ae(i)||(i={matches:i});var r=new lc(0,s||this.scope),o=r.conditions={},h,l,c;this.contexts.push(r),n=r.add("onMatch",n),r.queries=i;for(l in i)l==="all"?c=1:(h=se.matchMedia(i[l]),h&&(_n.indexOf(r)<0&&_n.push(r),(o[l]=h.matches)&&(c=1),h.addListener?h.addListener(jo):h.addEventListener("change",jo)));return c&&n(r),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},a}(),Mr={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return Ju(n)})},timeline:function(t){return new Ft(t)},getTweensOf:function(t,e){return ot.getTweensOf(t,e)},getProperty:function(t,e,i,n){At(t)&&(t=he(t)[0]);var s=Mi(t||{}).get,r=i?Fl:Nl;return i==="native"&&(i=""),t&&(e?r((Wt[e]&&Wt[e].get||s)(t,e,i,n)):function(o,h,l){return r((Wt[o]&&Wt[o].get||s)(t,o,h,l))})},quickSetter:function(t,e,i){if(t=he(t),t.length>1){var n=t.map(function(c){return Kt.quickSetter(c,e,i)}),s=n.length;return function(c){for(var u=s;u--;)n[u](c)}}t=t[0]||{};var r=Wt[e],o=Mi(t),h=o.harness&&(o.harness.aliases||{})[e]||e,l=r?function(c){var u=new r;rn._pt=0,u.init(t,i?c+i:c,rn,0,[t]),u.render(1,u),rn._pt&&Ma(1,rn)}:o.set(t,h);return r?l:function(c){return l(t,h,i?c+i:c,o,1)}},quickTo:function(t,e,i){var n,s=Kt.to(t,Ci((n={},n[e]="+=0.1",n.paused=!0,n),i||{})),r=function(h,l,c){return s.resetTo(e,h,l,c)};return r.tween=s,r},isTweening:function(t){return ot.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Si(t.ease,fn.ease)),oh(fn,t||{})},config:function(t){return oh(qt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,r=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!Wt[o]&&!Yt[o]&&xr(e+" effect requires "+o+" plugin.")}),Br[e]=function(o,h,l){return i(he(o),ue(h||{},s),l)},r&&(Ft.prototype[e]=function(o,h,l){return this.add(Br[e](o,Ae(h)?h:(l=h)&&{},this),l)})},registerEase:function(t,e){q[t]=Si(e)},parseEase:function(t,e){return arguments.length?Si(t,e):q},getById:function(t){return ot.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new Ft(t),n,s;for(i.smoothChildTiming=Bt(t.smoothChildTiming),ot.remove(i),i._dp=0,i._time=i._tTime=ot._time,n=ot._first;n;)s=n._next,(e||!(!n._dur&&n instanceof xt&&n.vars.onComplete===n._targets[0]))&&Te(i,n,n._start-n._delay),n=s;return Te(ot,i,0),i},context:function(t,e){return t?new lc(t,e):gt},matchMedia:function(t){return new md(t)},matchMediaRefresh:function(){return _n.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||jo()},addEventListener:function(t,e){var i=lr[t]||(lr[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=lr[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:Xu,wrapYoyo:Yu,distribute:Wl,random:ql,snap:Gl,normalize:qu,getUnit:Ot,clamp:Hu,splitColor:Kl,toArray:he,selector:Vo,mapRange:Yl,pipe:Wu,unitize:Gu,interpolate:Ku,shuffle:jl},install:Pl,effects:Br,ticker:Gt,updateRoot:Ft.updateRoot,plugins:Wt,globalTimeline:ot,core:{PropTween:Ut,globals:Rl,Tween:xt,Timeline:Ft,Animation:yn,getCache:Mi,_removeLinkedListItem:Pr,reverting:function(){return Pt},context:function(t){return t&&gt&&(gt.data.push(t),t._ctx=gt),gt},suppressOverwrites:function(t){return da=t}}};Vt("to,from,fromTo,delayedCall,set,killTweensOf",function(a){return Mr[a]=xt[a]});Gt.add(Ft.updateRoot);rn=Mr.to({},{duration:0});var gd=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},yd=function(t,e){var i=t._targets,n,s,r;for(n in e)for(s=i.length;s--;)r=t._ptLookup[s][n],r&&(r=r.d)&&(r._pt&&(r=gd(r,n)),r&&r.modifier&&r.modifier(e[n],t,i[s],n))},Wr=function(t,e){return{name:t,rawVars:1,init:function(n,s,r){r._onInit=function(o){var h,l;if(At(s)&&(h={},Vt(s,function(c){return h[c]=1}),s=h),e){h={};for(l in s)h[l]=e(s[l]);s=h}yd(o,s)}}}},Kt=Mr.registerPlugin({name:"attr",init:function(t,e,i,n,s){var r,o,h;this.tween=i;for(r in e)h=t.getAttribute(r)||"",o=this.add(t,"setAttribute",(h||0)+"",e[r],n,s,0,0,r),o.op=r,o.b=h,this._props.push(r)},render:function(t,e){for(var i=e._pt;i;)Pt?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Wr("roundProps",Uo),Wr("modifiers"),Wr("snap",Gl))||Mr;xt.version=Ft.version=Kt.version="3.11.4";Ol=1;Sl()&&gn();q.Power0;q.Power1;q.Power2;q.Power3;q.Power4;q.Linear;q.Quad;q.Cubic;q.Quart;q.Quint;q.Strong;q.Elastic;q.Back;q.SteppedEase;q.Bounce;q.Sine;q.Expo;q.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var dh,ti,ln,Ta,wi,fh,Sa,_d=function(){return typeof window<"u"},Ge={},bi=180/Math.PI,cn=Math.PI/180,Bi=Math.atan2,ph=1e8,Aa=/([A-Z])/g,xd=/(left|right|width|margin|padding|x)/i,bd=/[\s,\(]\S/,He={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wo=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},wd=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},vd=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Md=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},cc=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},uc=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Td=function(t,e,i){return t.style[e]=i},Sd=function(t,e,i){return t.style.setProperty(e,i)},Ad=function(t,e,i){return t._gsap[e]=i},Ed=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Cd=function(t,e,i,n,s){var r=t._gsap;r.scaleX=r.scaleY=i,r.renderTransform(s,r)},kd=function(t,e,i,n,s){var r=t._gsap;r[e]=i,r.renderTransform(s,r)},at="transform",_e=at+"Origin",Od=function(t,e){var i=this,n=this.target,s=n.style;if(t in Ge){if(this.tfm=this.tfm||{},t!=="transform"&&(t=He[t]||t,~t.indexOf(",")?t.split(",").forEach(function(r){return i.tfm[r]=Ve(n,r)}):this.tfm[t]=n._gsap.x?n._gsap[t]:Ve(n,t)),this.props.indexOf(at)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(_e,e,"")),t=at}(s||e)&&this.props.push(t,e,s[t])},dc=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Pd=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,r;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].replace(Aa,"-$1").toLowerCase());if(this.tfm){for(r in this.tfm)n[r]=this.tfm[r];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Sa(),s&&!s.isStart&&!i[at]&&(dc(i),n.uncache=1)}},fc=function(t,e){var i={target:t,props:[],revert:Pd,save:Od};return e&&e.split(",").forEach(function(n){return i.save(n)}),i},pc,Go=function(t,e){var i=ti.createElementNS?ti.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ti.createElement(t);return i.style?i:ti.createElement(t)},Se=function a(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(Aa,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&a(t,xn(e)||e,1)||""},mh="O,Moz,ms,Ms,Webkit".split(","),xn=function(t,e,i){var n=e||wi,s=n.style,r=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(mh[r]+t in s););return r<0?null:(r===3?"ms":r>=0?mh[r]:"")+t},qo=function(){_d()&&window.document&&(dh=window,ti=dh.document,ln=ti.documentElement,wi=Go("div")||{style:{}},Go("div"),at=xn(at),_e=at+"Origin",wi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",pc=!!xn("perspective"),Sa=Kt.core.reverting,Ta=1)},Gr=function a(t){var e=Go("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,s=this.style.cssText,r;if(ln.appendChild(e),e.appendChild(this),this.style.display="block",t)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=a}catch{}else this._gsapBBox&&(r=this._gsapBBox());return i&&(n?i.insertBefore(this,n):i.appendChild(this)),ln.removeChild(e),this.style.cssText=s,r},gh=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},mc=function(t){var e;try{e=t.getBBox()}catch{e=Gr.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Gr||(e=Gr.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+gh(t,["x","cx","x1"])||0,y:+gh(t,["y","cy","y1"])||0,width:0,height:0}:e},gc=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&mc(t))},cs=function(t,e){if(e){var i=t.style;e in Ge&&e!==_e&&(e=at),i.removeProperty?((e.substr(0,2)==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(e.replace(Aa,"-$1").toLowerCase())):i.removeAttribute(e)}},ei=function(t,e,i,n,s,r){var o=new Ut(t._pt,e,i,0,1,r?uc:cc);return t._pt=o,o.b=n,o.e=s,t._props.push(i),o},yh={deg:1,rad:1,turn:1},Rd={grid:1,flex:1},hi=function a(t,e,i,n){var s=parseFloat(i)||0,r=(i+"").trim().substr((s+"").length)||"px",o=wi.style,h=xd.test(e),l=t.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(h?"Width":"Height"),u=100,d=n==="px",f=n==="%",m,p,g,y;return n===r||!s||yh[n]||yh[r]?s:(r!=="px"&&!d&&(s=a(t,e,i,"px")),y=t.getCTM&&gc(t),(f||r==="%")&&(Ge[e]||~e.indexOf("adius"))?(m=y?t.getBBox()[h?"width":"height"]:t[c],dt(f?s/m*u:s/100*m)):(o[h?"width":"height"]=u+(d?r:n),p=~e.indexOf("adius")||n==="em"&&t.appendChild&&!l?t:t.parentNode,y&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===ti||!p.appendChild)&&(p=ti.body),g=p._gsap,g&&f&&g.width&&h&&g.time===Gt.time&&!g.uncache?dt(s/g.width*u):((f||r==="%")&&!Rd[Se(p,"display")]&&(o.position=Se(t,"position")),p===t&&(o.position="static"),p.appendChild(wi),m=wi[c],p.removeChild(wi),o.position="absolute",h&&f&&(g=Mi(p),g.time=Gt.time,g.width=p[c]),dt(d?m*s/u:m&&s?u/m*s:0))))},Ve=function(t,e,i,n){var s;return Ta||qo(),e in He&&e!=="transform"&&(e=He[e],~e.indexOf(",")&&(e=e.split(",")[0])),Ge[e]&&e!=="transform"?(s=ds(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Sr(Se(t,_e))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=Tr[e]&&Tr[e](t,e,i)||Se(t,e)||Ll(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?hi(t,e,s,i)+i:s},zd=function(t,e,i,n){if(!i||i==="none"){var s=xn(e,t,1),r=s&&Se(t,s,1);r&&r!==i?(e=s,i=r):e==="borderColor"&&(i=Se(t,"borderTopColor"))}var o=new Ut(this._pt,t.style,e,0,1,ac),h=0,l=0,c,u,d,f,m,p,g,y,b,_,x,w;if(o.b=i,o.e=n,i+="",n+="",n==="auto"&&(t.style[e]=n,n=Se(t,e)||n,t.style[e]=i),c=[i,n],Zl(c),i=c[0],n=c[1],d=i.match(sn)||[],w=n.match(sn)||[],w.length){for(;u=sn.exec(n);)g=u[0],b=n.substring(h,u.index),m?m=(m+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(m=1),g!==(p=d[l++]||"")&&(f=parseFloat(p)||0,x=p.substr((f+"").length),g.charAt(1)==="="&&(g=hn(f,g)+x),y=parseFloat(g),_=g.substr((y+"").length),h=sn.lastIndex-_.length,_||(_=_||qt.units[e]||x,h===n.length&&(n+=_,o.e+=_)),x!==_&&(f=hi(t,e,p,_)||0),o._pt={_next:o._pt,p:b||l===1?b:",",s:f,c:y-f,m:m&&m<4||e==="zIndex"?Math.round:0});o.c=h<n.length?n.substring(h,n.length):""}else o.r=e==="display"&&n==="none"?uc:cc;return Cl.test(n)&&(o.e=0),this._pt=o,o},_h={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ld=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=_h[i]||i,e[1]=_h[n]||n,e.join(" ")},Id=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,r=i._gsap,o,h,l;if(s==="all"||s===!0)n.cssText="",h=1;else for(s=s.split(","),l=s.length;--l>-1;)o=s[l],Ge[o]&&(h=1,o=o==="transformOrigin"?_e:at),cs(i,o);h&&(cs(i,at),r&&(r.svg&&i.removeAttribute("transform"),ds(i,1),r.uncache=1,dc(n)))}},Tr={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var r=t._pt=new Ut(t._pt,e,i,0,0,Id);return r.u=n,r.pr=-10,r.tween=s,t._props.push(i),1}}},us=[1,0,0,1,0,0],yc={},_c=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},xh=function(t){var e=Se(t,at);return _c(e)?us:e.substr(7).match(El).map(dt)},Ea=function(t,e){var i=t._gsap||Mi(t),n=t.style,s=xh(t),r,o,h,l;return i.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,s=[h.a,h.b,h.c,h.d,h.e,h.f],s.join(",")==="1,0,0,1,0,0"?us:s):(s===us&&!t.offsetParent&&t!==ln&&!i.svg&&(h=n.display,n.display="block",r=t.parentNode,(!r||!t.offsetParent)&&(l=1,o=t.nextElementSibling,ln.appendChild(t)),s=xh(t),h?n.display=h:cs(t,"display"),l&&(o?r.insertBefore(t,o):r?r.appendChild(t):ln.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Xo=function(t,e,i,n,s,r){var o=t._gsap,h=s||Ea(t,!0),l=o.xOrigin||0,c=o.yOrigin||0,u=o.xOffset||0,d=o.yOffset||0,f=h[0],m=h[1],p=h[2],g=h[3],y=h[4],b=h[5],_=e.split(" "),x=parseFloat(_[0])||0,w=parseFloat(_[1])||0,A,T,E,C;i?h!==us&&(T=f*g-m*p)&&(E=x*(g/T)+w*(-p/T)+(p*b-g*y)/T,C=x*(-m/T)+w*(f/T)-(f*b-m*y)/T,x=E,w=C):(A=mc(t),x=A.x+(~_[0].indexOf("%")?x/100*A.width:x),w=A.y+(~(_[1]||_[0]).indexOf("%")?w/100*A.height:w)),n||n!==!1&&o.smooth?(y=x-l,b=w-c,o.xOffset=u+(y*f+b*p)-y,o.yOffset=d+(y*m+b*g)-b):o.xOffset=o.yOffset=0,o.xOrigin=x,o.yOrigin=w,o.smooth=!!n,o.origin=e,o.originIsAbsolute=!!i,t.style[_e]="0px 0px",r&&(ei(r,o,"xOrigin",l,x),ei(r,o,"yOrigin",c,w),ei(r,o,"xOffset",u,o.xOffset),ei(r,o,"yOffset",d,o.yOffset)),t.setAttribute("data-svg-origin",x+" "+w)},ds=function(t,e){var i=t._gsap||new ec(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,r="px",o="deg",h=getComputedStyle(t),l=Se(t,_e)||"0",c,u,d,f,m,p,g,y,b,_,x,w,A,T,E,C,O,P,V,N,U,D,W,Y,Q,yt,bt,ct,It,fi,Nt,$t;return c=u=d=p=g=y=b=_=x=0,f=m=1,i.svg=!!(t.getCTM&&gc(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(n[at]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[at]!=="none"?h[at]:"")),n.scale=n.rotate=n.translate="none"),T=Ea(t,i.svg),i.svg&&(i.uncache?(Q=t.getBBox(),l=i.xOrigin-Q.x+"px "+(i.yOrigin-Q.y)+"px",Y=""):Y=!e&&t.getAttribute("data-svg-origin"),Xo(t,Y||l,!!Y||i.originIsAbsolute,i.smooth!==!1,T)),w=i.xOrigin||0,A=i.yOrigin||0,T!==us&&(P=T[0],V=T[1],N=T[2],U=T[3],c=D=T[4],u=W=T[5],T.length===6?(f=Math.sqrt(P*P+V*V),m=Math.sqrt(U*U+N*N),p=P||V?Bi(V,P)*bi:0,b=N||U?Bi(N,U)*bi+p:0,b&&(m*=Math.abs(Math.cos(b*cn))),i.svg&&(c-=w-(w*P+A*N),u-=A-(w*V+A*U))):($t=T[6],fi=T[7],bt=T[8],ct=T[9],It=T[10],Nt=T[11],c=T[12],u=T[13],d=T[14],E=Bi($t,It),g=E*bi,E&&(C=Math.cos(-E),O=Math.sin(-E),Y=D*C+bt*O,Q=W*C+ct*O,yt=$t*C+It*O,bt=D*-O+bt*C,ct=W*-O+ct*C,It=$t*-O+It*C,Nt=fi*-O+Nt*C,D=Y,W=Q,$t=yt),E=Bi(-N,It),y=E*bi,E&&(C=Math.cos(-E),O=Math.sin(-E),Y=P*C-bt*O,Q=V*C-ct*O,yt=N*C-It*O,Nt=U*O+Nt*C,P=Y,V=Q,N=yt),E=Bi(V,P),p=E*bi,E&&(C=Math.cos(E),O=Math.sin(E),Y=P*C+V*O,Q=D*C+W*O,V=V*C-P*O,W=W*C-D*O,P=Y,D=Q),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,y=180-y),f=dt(Math.sqrt(P*P+V*V+N*N)),m=dt(Math.sqrt(W*W+$t*$t)),E=Bi(D,W),b=Math.abs(E)>2e-4?E*bi:0,x=Nt?1/(Nt<0?-Nt:Nt):0),i.svg&&(Y=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!_c(Se(t,at)),Y&&t.setAttribute("transform",Y))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(f*=-1,b+=p<=0?180:-180,p+=p<=0?180:-180):(m*=-1,b+=b<=0?180:-180)),e=e||i.uncache,i.x=c-((i.xPercent=c&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+r,i.y=u-((i.yPercent=u&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+r,i.z=d+r,i.scaleX=dt(f),i.scaleY=dt(m),i.rotation=dt(p)+o,i.rotationX=dt(g)+o,i.rotationY=dt(y)+o,i.skewX=b+o,i.skewY=_+o,i.transformPerspective=x+r,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(n[_e]=Sr(l)),i.xOffset=i.yOffset=0,i.force3D=qt.force3D,i.renderTransform=i.svg?Fd:pc?xc:Nd,i.uncache=0,i},Sr=function(t){return(t=t.split(" "))[0]+" "+t[1]},qr=function(t,e,i){var n=Ot(e);return dt(parseFloat(e)+parseFloat(hi(t,"x",i+"px",n)))+n},Nd=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,xc(t,e)},mi="0deg",zn="0px",gi=") ",xc=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,r=i.x,o=i.y,h=i.z,l=i.rotation,c=i.rotationY,u=i.rotationX,d=i.skewX,f=i.skewY,m=i.scaleX,p=i.scaleY,g=i.transformPerspective,y=i.force3D,b=i.target,_=i.zOrigin,x="",w=y==="auto"&&t&&t!==1||y===!0;if(_&&(u!==mi||c!==mi)){var A=parseFloat(c)*cn,T=Math.sin(A),E=Math.cos(A),C;A=parseFloat(u)*cn,C=Math.cos(A),r=qr(b,r,T*C*-_),o=qr(b,o,-Math.sin(A)*-_),h=qr(b,h,E*C*-_+_)}g!==zn&&(x+="perspective("+g+gi),(n||s)&&(x+="translate("+n+"%, "+s+"%) "),(w||r!==zn||o!==zn||h!==zn)&&(x+=h!==zn||w?"translate3d("+r+", "+o+", "+h+") ":"translate("+r+", "+o+gi),l!==mi&&(x+="rotate("+l+gi),c!==mi&&(x+="rotateY("+c+gi),u!==mi&&(x+="rotateX("+u+gi),(d!==mi||f!==mi)&&(x+="skew("+d+", "+f+gi),(m!==1||p!==1)&&(x+="scale("+m+", "+p+gi),b.style[at]=x||"translate(0, 0)"},Fd=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,r=i.x,o=i.y,h=i.rotation,l=i.skewX,c=i.skewY,u=i.scaleX,d=i.scaleY,f=i.target,m=i.xOrigin,p=i.yOrigin,g=i.xOffset,y=i.yOffset,b=i.forceCSS,_=parseFloat(r),x=parseFloat(o),w,A,T,E,C;h=parseFloat(h),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,h+=c),h||l?(h*=cn,l*=cn,w=Math.cos(h)*u,A=Math.sin(h)*u,T=Math.sin(h-l)*-d,E=Math.cos(h-l)*d,l&&(c*=cn,C=Math.tan(l-c),C=Math.sqrt(1+C*C),T*=C,E*=C,c&&(C=Math.tan(c),C=Math.sqrt(1+C*C),w*=C,A*=C)),w=dt(w),A=dt(A),T=dt(T),E=dt(E)):(w=u,E=d,A=T=0),(_&&!~(r+"").indexOf("px")||x&&!~(o+"").indexOf("px"))&&(_=hi(f,"x",r,"px"),x=hi(f,"y",o,"px")),(m||p||g||y)&&(_=dt(_+m-(m*w+p*T)+g),x=dt(x+p-(m*A+p*E)+y)),(n||s)&&(C=f.getBBox(),_=dt(_+n/100*C.width),x=dt(x+s/100*C.height)),C="matrix("+w+","+A+","+T+","+E+","+_+","+x+")",f.setAttribute("transform",C),b&&(f.style[at]=C)},Dd=function(t,e,i,n,s){var r=360,o=At(s),h=parseFloat(s)*(o&&~s.indexOf("rad")?bi:1),l=h-n,c=n+l+"deg",u,d;return o&&(u=s.split("_")[1],u==="short"&&(l%=r,l!==l%(r/2)&&(l+=l<0?r:-r)),u==="cw"&&l<0?l=(l+r*ph)%r-~~(l/r)*r:u==="ccw"&&l>0&&(l=(l-r*ph)%r-~~(l/r)*r)),t._pt=d=new Ut(t._pt,e,i,n,l,wd),d.e=c,d.u="deg",t._props.push(i),d},bh=function(t,e){for(var i in e)t[i]=e[i];return t},Bd=function(t,e,i){var n=bh({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",r=i.style,o,h,l,c,u,d,f,m;n.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),r[at]=e,o=ds(i,1),cs(i,at),i.setAttribute("transform",l)):(l=getComputedStyle(i)[at],r[at]=e,o=ds(i,1),r[at]=l);for(h in Ge)l=n[h],c=o[h],l!==c&&s.indexOf(h)<0&&(f=Ot(l),m=Ot(c),u=f!==m?hi(i,h,l,m):parseFloat(l),d=parseFloat(c),t._pt=new Ut(t._pt,o,h,u,d-u,Wo),t._pt.u=m||0,t._props.push(h));bh(o,n)};Vt("padding,margin,Width,Radius",function(a,t){var e="Top",i="Right",n="Bottom",s="Left",r=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(o){return t<2?a+o:"border"+o+a});Tr[t>1?"border"+a:a]=function(o,h,l,c,u){var d,f;if(arguments.length<4)return d=r.map(function(m){return Ve(o,m,l)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},r.forEach(function(m,p){return f[m]=d[p]=d[p]||d[(p-1)/2|0]}),o.init(h,f,u)}});var bc={name:"css",register:qo,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var r=this._props,o=t.style,h=i.vars.startAt,l,c,u,d,f,m,p,g,y,b,_,x,w,A,T,E;Ta||qo(),this.styles=this.styles||fc(t),E=this.styles.props,this.tween=i;for(p in e)if(p!=="autoRound"&&(c=e[p],!(Wt[p]&&ic(p,e,i,n,t,s)))){if(f=typeof c,m=Tr[p],f==="function"&&(c=c.call(i,n,t,s),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=hs(c)),m)m(this,t,p,c,i)&&(T=1);else if(p.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(p)+"").trim(),c+="",ri.lastIndex=0,ri.test(l)||(g=Ot(l),y=Ot(c)),y?g!==y&&(l=hi(t,p,l,y)+y):g&&(c+=g),this.add(o,"setProperty",l,c,n,s,0,0,p),r.push(p),E.push(p,0,o[p]);else if(f!=="undefined"){if(h&&p in h?(l=typeof h[p]=="function"?h[p].call(i,n,t,s):h[p],At(l)&&~l.indexOf("random(")&&(l=hs(l)),Ot(l+"")||(l+=qt.units[p]||Ot(Ve(t,p))||""),(l+"").charAt(1)==="="&&(l=Ve(t,p))):l=Ve(t,p),d=parseFloat(l),b=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),b&&(c=c.substr(2)),u=parseFloat(c),p in He&&(p==="autoAlpha"&&(d===1&&Ve(t,"visibility")==="hidden"&&u&&(d=0),E.push("visibility",0,o.visibility),ei(this,o,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),p!=="scale"&&p!=="transform"&&(p=He[p],~p.indexOf(",")&&(p=p.split(",")[0]))),_=p in Ge,_){if(this.styles.save(p),x||(w=t._gsap,w.renderTransform&&!e.parseTransform||ds(t,e.parseTransform),A=e.smoothOrigin!==!1&&w.smooth,x=this._pt=new Ut(this._pt,o,at,0,1,w.renderTransform,w,0,-1),x.dep=1),p==="scale")this._pt=new Ut(this._pt,w,"scaleY",w.scaleY,(b?hn(w.scaleY,b+u):u)-w.scaleY||0,Wo),this._pt.u=0,r.push("scaleY",p),p+="X";else if(p==="transformOrigin"){E.push(_e,0,o[_e]),c=Ld(c),w.svg?Xo(t,c,0,A,0,this):(y=parseFloat(c.split(" ")[2])||0,y!==w.zOrigin&&ei(this,w,"zOrigin",w.zOrigin,y),ei(this,o,p,Sr(l),Sr(c)));continue}else if(p==="svgOrigin"){Xo(t,c,1,A,0,this);continue}else if(p in yc){Dd(this,w,p,d,b?hn(d,b+c):c);continue}else if(p==="smoothOrigin"){ei(this,w,"smooth",w.smooth,c);continue}else if(p==="force3D"){w[p]=c;continue}else if(p==="transform"){Bd(this,c,t);continue}}else p in o||(p=xn(p)||p);if(_||(u||u===0)&&(d||d===0)&&!bd.test(c)&&p in o)g=(l+"").substr((d+"").length),u||(u=0),y=Ot(c)||(p in qt.units?qt.units[p]:g),g!==y&&(d=hi(t,p,l,y)),this._pt=new Ut(this._pt,_?w:o,p,d,(b?hn(d,b+u):u)-d,!_&&(y==="px"||p==="zIndex")&&e.autoRound!==!1?Md:Wo),this._pt.u=y||0,g!==y&&y!=="%"&&(this._pt.b=l,this._pt.r=vd);else if(p in o)zd.call(this,t,p,l,b?b+c:c);else if(p in t)this.add(t,p,l||t[p],b?b+c:c,n,s);else if(p!=="parseTransform"){ma(p,c);continue}_||(p in o?E.push(p,0,o[p]):E.push(p,1,l||t[p])),r.push(p)}}T&&hc(this)},render:function(t,e){if(e.tween._time||!Sa())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Ve,aliases:He,getSetter:function(t,e,i){var n=He[e];return n&&n.indexOf(",")<0&&(e=n),e in Ge&&e!==_e&&(t._gsap.x||Ve(t,"x"))?i&&fh===i?e==="scale"?Ed:Ad:(fh=i||{})&&(e==="scale"?Cd:kd):t.style&&!fa(t.style[e])?Td:~e.indexOf("-")?Sd:va(t,e)},core:{_removeProperty:cs,_getMatrix:Ea}};Kt.utils.checkPrefix=xn;Kt.core.getStyleSaver=fc;(function(a,t,e,i){var n=Vt(a+","+t+","+e,function(s){Ge[s]=1});Vt(t,function(s){qt.units[s]="deg",yc[s]=1}),He[n[13]]=a+","+t,Vt(i,function(s){var r=s.split(":");He[r[1]]=n[r[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Vt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(a){qt.units[a]="px"});Kt.registerPlugin(bc);var j=Kt.registerPlugin(bc)||Kt;j.core.Tween;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const wc="149",Vi={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ui={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ar=0,Vd=1,Ud=2,wh=1,Hd=100,jd=204,Wd=205,Gd=3,qd=0,vc=300,fs=1e3,Yn=1001,Yo=1002,Ko=1003,Xd=1004,Yd=1005,Ca=1006,Kd=1007,ka=1008,Jd=1009,Zd=1015,Mc=1023,ps=2300,bn=2301,Xr=2302,vh=2400,Mh=2401,Th=2402,$d=2500,Qd=0,Tc=1,Jo=2,tf=3e3,ms=3001,ef=0,Be="srgb",Zo="srgb-linear",Yr=7680,nf=519,$o=35044;class As{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const n=this._listeners[t];if(n!==void 0){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const n=i.slice(0);for(let s=0,r=n.length;s<r;s++)n[s].call(this,t);t.target=null}}}const kt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Sh=1234567;const es=Math.PI/180,gs=180/Math.PI;function ce(){const a=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(kt[a&255]+kt[a>>8&255]+kt[a>>16&255]+kt[a>>24&255]+"-"+kt[t&255]+kt[t>>8&255]+"-"+kt[t>>16&15|64]+kt[t>>24&255]+"-"+kt[e&63|128]+kt[e>>8&255]+"-"+kt[e>>16&255]+kt[e>>24&255]+kt[i&255]+kt[i>>8&255]+kt[i>>16&255]+kt[i>>24&255]).toLowerCase()}function Mt(a,t,e){return Math.max(t,Math.min(e,a))}function Oa(a,t){return(a%t+t)%t}function sf(a,t,e,i,n){return i+(a-t)*(n-i)/(e-t)}function rf(a,t,e){return a!==t?(e-a)/(t-a):0}function is(a,t,e){return(1-e)*a+e*t}function of(a,t,e,i){return is(a,t,1-Math.exp(-e*i))}function af(a,t=1){return t-Math.abs(Oa(a,t*2)-t)}function hf(a,t,e){return a<=t?0:a>=e?1:(a=(a-t)/(e-t),a*a*(3-2*a))}function lf(a,t,e){return a<=t?0:a>=e?1:(a=(a-t)/(e-t),a*a*a*(a*(a*6-15)+10))}function cf(a,t){return a+Math.floor(Math.random()*(t-a+1))}function uf(a,t){return a+Math.random()*(t-a)}function df(a){return a*(.5-Math.random())}function ff(a){a!==void 0&&(Sh=a);let t=Sh+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function pf(a){return a*es}function mf(a){return a*gs}function gf(a){return(a&a-1)===0&&a!==0}function Sc(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function yf(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function _f(a,t,e,i,n){const s=Math.cos,r=Math.sin,o=s(e/2),h=r(e/2),l=s((t+i)/2),c=r((t+i)/2),u=s((t-i)/2),d=r((t-i)/2),f=s((i-t)/2),m=r((i-t)/2);switch(n){case"XYX":a.set(o*c,h*u,h*d,o*l);break;case"YZY":a.set(h*d,o*c,h*u,o*l);break;case"ZXZ":a.set(h*u,h*d,o*c,o*l);break;case"XZX":a.set(o*c,h*m,h*f,o*l);break;case"YXY":a.set(h*f,o*c,h*m,o*l);break;case"ZYZ":a.set(h*m,h*f,o*c,o*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function je(a,t){switch(t.constructor){case Float32Array:return a;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function it(a,t){switch(t.constructor){case Float32Array:return a;case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}var xf=Object.freeze({__proto__:null,DEG2RAD:es,RAD2DEG:gs,ceilPowerOfTwo:Sc,clamp:Mt,damp:of,degToRad:pf,denormalize:je,euclideanModulo:Oa,floorPowerOfTwo:yf,generateUUID:ce,inverseLerp:rf,isPowerOfTwo:gf,lerp:is,mapLinear:sf,normalize:it,pingpong:af,radToDeg:mf,randFloat:uf,randFloatSpread:df,randInt:cf,seededRandom:ff,setQuaternionFromProperEuler:_f,smootherstep:lf,smoothstep:hf});class z{constructor(t=0,e=0){z.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),s=this.x-t.x,r=this.y-t.y;return this.x=s*i-r*n+t.x,this.y=s*n+r*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class zi{constructor(){zi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,s,r,o,h,l){const c=this.elements;return c[0]=t,c[1]=n,c[2]=o,c[3]=e,c[4]=s,c[5]=h,c[6]=i,c[7]=r,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,s=this.elements,r=i[0],o=i[3],h=i[6],l=i[1],c=i[4],u=i[7],d=i[2],f=i[5],m=i[8],p=n[0],g=n[3],y=n[6],b=n[1],_=n[4],x=n[7],w=n[2],A=n[5],T=n[8];return s[0]=r*p+o*b+h*w,s[3]=r*g+o*_+h*A,s[6]=r*y+o*x+h*T,s[1]=l*p+c*b+u*w,s[4]=l*g+c*_+u*A,s[7]=l*y+c*x+u*T,s[2]=d*p+f*b+m*w,s[5]=d*g+f*_+m*A,s[8]=d*y+f*x+m*T,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],h=t[6],l=t[7],c=t[8];return e*r*c-e*o*l-i*s*c+i*o*h+n*s*l-n*r*h}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],h=t[6],l=t[7],c=t[8],u=c*r-o*l,d=o*h-c*s,f=l*s-r*h,m=e*u+i*d+n*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return t[0]=u*p,t[1]=(n*l-c*i)*p,t[2]=(o*i-n*r)*p,t[3]=d*p,t[4]=(c*e-n*h)*p,t[5]=(n*s-o*e)*p,t[6]=f*p,t[7]=(i*h-l*e)*p,t[8]=(r*e-i*s)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,s,r,o){const h=Math.cos(s),l=Math.sin(s);return this.set(i*h,i*l,-i*(h*r+l*o)+r+t,-n*l,n*h,-n*(-l*r+h*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(Kr.makeScale(t,e)),this}rotate(t){return this.premultiply(Kr.makeRotation(-t)),this}translate(t,e){return this.premultiply(Kr.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<9;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Kr=new zi;function bf(a){for(let t=a.length-1;t>=0;--t)if(a[t]>=65535)return!0;return!1}function Qo(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function Ai(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function cr(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}const Jr={[Be]:{[Zo]:Ai},[Zo]:{[Be]:cr}},zt={legacyMode:!0,get workingColorSpace(){return Zo},set workingColorSpace(a){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(a,t,e){if(this.legacyMode||t===e||!t||!e)return a;if(Jr[t]&&Jr[t][e]!==void 0){const i=Jr[t][e];return a.r=i(a.r),a.g=i(a.g),a.b=i(a.b),a}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(a,t){return this.convert(a,this.workingColorSpace,t)},toWorkingColorSpace:function(a,t){return this.convert(a,t,this.workingColorSpace)}},Ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_t={r:0,g:0,b:0},me={h:0,s:0,l:0},Ls={h:0,s:0,l:0};function Zr(a,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?a+(t-a)*6*e:e<1/2?t:e<2/3?a+(t-a)*6*(2/3-e):a}function Is(a,t){return t.r=a.r,t.g=a.g,t.b=a.b,t}class St{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,e===void 0&&i===void 0?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Be){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,zt.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=zt.workingColorSpace){return this.r=t,this.g=e,this.b=i,zt.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=zt.workingColorSpace){if(t=Oa(t,1),e=Mt(e,0,1),i=Mt(i,0,1),e===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+e):i+e-i*e,r=2*i-s;this.r=Zr(r,s,t+1/3),this.g=Zr(r,s,t),this.b=Zr(r,s,t-1/3)}return zt.toWorkingColorSpace(this,n),this}setStyle(t,e=Be){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,zt.toWorkingColorSpace(this,e),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,zt.toWorkingColorSpace(this,e),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const h=parseFloat(s[1])/360,l=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return i(s[4]),this.setHSL(h,l,c,e)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=n[1],r=s.length;if(r===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,zt.toWorkingColorSpace(this,e),this;if(r===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,zt.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=Be){const i=Ac[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ai(t.r),this.g=Ai(t.g),this.b=Ai(t.b),this}copyLinearToSRGB(t){return this.r=cr(t.r),this.g=cr(t.g),this.b=cr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Be){return zt.fromWorkingColorSpace(Is(this,_t),t),Mt(_t.r*255,0,255)<<16^Mt(_t.g*255,0,255)<<8^Mt(_t.b*255,0,255)<<0}getHexString(t=Be){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=zt.workingColorSpace){zt.fromWorkingColorSpace(Is(this,_t),e);const i=_t.r,n=_t.g,s=_t.b,r=Math.max(i,n,s),o=Math.min(i,n,s);let h,l;const c=(o+r)/2;if(o===r)h=0,l=0;else{const u=r-o;switch(l=c<=.5?u/(r+o):u/(2-r-o),r){case i:h=(n-s)/u+(n<s?6:0);break;case n:h=(s-i)/u+2;break;case s:h=(i-n)/u+4;break}h/=6}return t.h=h,t.s=l,t.l=c,t}getRGB(t,e=zt.workingColorSpace){return zt.fromWorkingColorSpace(Is(this,_t),e),t.r=_t.r,t.g=_t.g,t.b=_t.b,t}getStyle(t=Be){return zt.fromWorkingColorSpace(Is(this,_t),t),t!==Be?`color(${t} ${_t.r} ${_t.g} ${_t.b})`:`rgb(${_t.r*255|0},${_t.g*255|0},${_t.b*255|0})`}offsetHSL(t,e,i){return this.getHSL(me),me.h+=t,me.s+=e,me.l+=i,this.setHSL(me.h,me.s,me.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(me),t.getHSL(Ls);const i=is(me.h,Ls.h,e),n=is(me.s,Ls.s,e),s=is(me.l,Ls.l,e);return this.setHSL(i,n,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}St.NAMES=Ac;let Hi;class wf{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Hi===void 0&&(Hi=Qo("canvas")),Hi.width=t.width,Hi.height=t.height;const i=Hi.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Hi}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Qo("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height),s=n.data;for(let r=0;r<s.length;r++)s[r]=Ai(s[r]/255)*255;return i.putImageData(n,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Ai(e[i]/255)*255):e[i]=Ai(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class vf{constructor(t=null){this.isSource=!0,this.uuid=ce(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let s;if(Array.isArray(n)){s=[];for(let r=0,o=n.length;r<o;r++)n[r].isDataTexture?s.push($r(n[r].image)):s.push($r(n[r]))}else s=$r(n);i.url=s}return e||(t.images[this.uuid]=i),i}}function $r(a){return typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap?wf.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Mf=0;class xe extends As{constructor(t=xe.DEFAULT_IMAGE,e=xe.DEFAULT_MAPPING,i=Yn,n=Yn,s=Ca,r=ka,o=Mc,h=Jd,l=xe.DEFAULT_ANISOTROPY,c=tf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mf++}),this.uuid=ce(),this.name="",this.source=new vf(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=s,this.minFilter=r,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=h,this.offset=new z(0,0),this.repeat=new z(1,1),this.center=new z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==vc)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case fs:t.x=t.x-Math.floor(t.x);break;case Yn:t.x=t.x<0?0:1;break;case Yo:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case fs:t.y=t.y-Math.floor(t.y);break;case Yn:t.y=t.y<0?0:1;break;case Yo:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}xe.DEFAULT_IMAGE=null;xe.DEFAULT_MAPPING=vc;xe.DEFAULT_ANISOTROPY=1;class oe{constructor(t=0,e=0,i=0,n=1){oe.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,s=this.w,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n+r[12]*s,this.y=r[1]*e+r[5]*i+r[9]*n+r[13]*s,this.z=r[2]*e+r[6]*i+r[10]*n+r[14]*s,this.w=r[3]*e+r[7]*i+r[11]*n+r[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,s;const h=t.elements,l=h[0],c=h[4],u=h[8],d=h[1],f=h[5],m=h[9],p=h[2],g=h[6],y=h[10];if(Math.abs(c-d)<.01&&Math.abs(u-p)<.01&&Math.abs(m-g)<.01){if(Math.abs(c+d)<.1&&Math.abs(u+p)<.1&&Math.abs(m+g)<.1&&Math.abs(l+f+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const _=(l+1)/2,x=(f+1)/2,w=(y+1)/2,A=(c+d)/4,T=(u+p)/4,E=(m+g)/4;return _>x&&_>w?_<.01?(i=0,n=.707106781,s=.707106781):(i=Math.sqrt(_),n=A/i,s=T/i):x>w?x<.01?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(x),i=A/n,s=E/n):w<.01?(i=.707106781,n=.707106781,s=0):(s=Math.sqrt(w),i=T/s,n=E/s),this.set(i,n,s,e),this}let b=Math.sqrt((g-m)*(g-m)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(b)<.001&&(b=1),this.x=(g-m)/b,this.y=(u-p)/b,this.z=(d-c)/b,this.w=Math.acos((l+f+y-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ee{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,s,r,o){let h=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3];const d=s[r+0],f=s[r+1],m=s[r+2],p=s[r+3];if(o===0){t[e+0]=h,t[e+1]=l,t[e+2]=c,t[e+3]=u;return}if(o===1){t[e+0]=d,t[e+1]=f,t[e+2]=m,t[e+3]=p;return}if(u!==p||h!==d||l!==f||c!==m){let g=1-o;const y=h*d+l*f+c*m+u*p,b=y>=0?1:-1,_=1-y*y;if(_>Number.EPSILON){const w=Math.sqrt(_),A=Math.atan2(w,y*b);g=Math.sin(g*A)/w,o=Math.sin(o*A)/w}const x=o*b;if(h=h*g+d*x,l=l*g+f*x,c=c*g+m*x,u=u*g+p*x,g===1-o){const w=1/Math.sqrt(h*h+l*l+c*c+u*u);h*=w,l*=w,c*=w,u*=w}}t[e]=h,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,n,s,r){const o=i[n],h=i[n+1],l=i[n+2],c=i[n+3],u=s[r],d=s[r+1],f=s[r+2],m=s[r+3];return t[e]=o*m+c*u+h*f-l*d,t[e+1]=h*m+c*d+l*u-o*f,t[e+2]=l*m+c*f+o*d-h*u,t[e+3]=c*m-o*u-h*d-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const i=t._x,n=t._y,s=t._z,r=t._order,o=Math.cos,h=Math.sin,l=o(i/2),c=o(n/2),u=o(s/2),d=h(i/2),f=h(n/2),m=h(s/2);switch(r){case"XYZ":this._x=d*c*u+l*f*m,this._y=l*f*u-d*c*m,this._z=l*c*m+d*f*u,this._w=l*c*u-d*f*m;break;case"YXZ":this._x=d*c*u+l*f*m,this._y=l*f*u-d*c*m,this._z=l*c*m-d*f*u,this._w=l*c*u+d*f*m;break;case"ZXY":this._x=d*c*u-l*f*m,this._y=l*f*u+d*c*m,this._z=l*c*m+d*f*u,this._w=l*c*u-d*f*m;break;case"ZYX":this._x=d*c*u-l*f*m,this._y=l*f*u+d*c*m,this._z=l*c*m-d*f*u,this._w=l*c*u+d*f*m;break;case"YZX":this._x=d*c*u+l*f*m,this._y=l*f*u+d*c*m,this._z=l*c*m-d*f*u,this._w=l*c*u-d*f*m;break;case"XZY":this._x=d*c*u-l*f*m,this._y=l*f*u-d*c*m,this._z=l*c*m+d*f*u,this._w=l*c*u+d*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],s=e[8],r=e[1],o=e[5],h=e[9],l=e[2],c=e[6],u=e[10],d=i+o+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-h)*f,this._y=(s-l)*f,this._z=(r-n)*f}else if(i>o&&i>u){const f=2*Math.sqrt(1+i-o-u);this._w=(c-h)/f,this._x=.25*f,this._y=(n+r)/f,this._z=(s+l)/f}else if(o>u){const f=2*Math.sqrt(1+o-i-u);this._w=(s-l)/f,this._x=(n+r)/f,this._y=.25*f,this._z=(h+c)/f}else{const f=2*Math.sqrt(1+u-i-o);this._w=(r-n)/f,this._x=(s+l)/f,this._y=(h+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Mt(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,s=t._z,r=t._w,o=e._x,h=e._y,l=e._z,c=e._w;return this._x=i*c+r*o+n*l-s*h,this._y=n*c+r*h+s*o-i*l,this._z=s*c+r*l+i*h-n*o,this._w=r*c-i*o-n*h-s*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,n=this._y,s=this._z,r=this._w;let o=r*t._w+i*t._x+n*t._y+s*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=r,this._x=i,this._y=n,this._z=s,this;const h=1-o*o;if(h<=Number.EPSILON){const f=1-e;return this._w=f*r+e*this._w,this._x=f*i+e*this._x,this._y=f*n+e*this._y,this._z=f*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(h),c=Math.atan2(l,o),u=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=r*u+this._w*d,this._x=i*u+this._x*d,this._y=n*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(s),i*Math.cos(s),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class v{constructor(t=0,e=0,i=0){v.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Ah.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Ah.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*n,this.y=s[1]*e+s[4]*i+s[7]*n,this.z=s[2]*e+s[5]*i+s[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,s=t.elements,r=1/(s[3]*e+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*n+s[12])*r,this.y=(s[1]*e+s[5]*i+s[9]*n+s[13])*r,this.z=(s[2]*e+s[6]*i+s[10]*n+s[14])*r,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,s=t.x,r=t.y,o=t.z,h=t.w,l=h*e+r*n-o*i,c=h*i+o*e-s*n,u=h*n+s*i-r*e,d=-s*e-r*i-o*n;return this.x=l*h+d*-s+c*-o-u*-r,this.y=c*h+d*-r+u*-s-l*-o,this.z=u*h+d*-o+l*-r-c*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*n,this.y=s[1]*e+s[5]*i+s[9]*n,this.z=s[2]*e+s[6]*i+s[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,s=t.z,r=e.x,o=e.y,h=e.z;return this.x=n*h-s*o,this.y=s*r-i*h,this.z=i*o-n*r,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Qr.copy(this).projectOnVector(t),this.sub(Qr)}reflect(t){return this.sub(Qr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Mt(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Qr=new v,Ah=new Ee;class vn{constructor(t=new v(1/0,1/0,1/0),e=new v(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,s=-1/0,r=-1/0,o=-1/0;for(let h=0,l=t.length;h<l;h+=3){const c=t[h],u=t[h+1],d=t[h+2];c<e&&(e=c),u<i&&(i=u),d<n&&(n=d),c>s&&(s=c),u>r&&(r=u),d>o&&(o=d)}return this.min.set(e,i,n),this.max.set(s,r,o),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,s=-1/0,r=-1/0,o=-1/0;for(let h=0,l=t.count;h<l;h++){const c=t.getX(h),u=t.getY(h),d=t.getZ(h);c<e&&(e=c),u<i&&(i=u),d<n&&(n=d),c>s&&(s=c),u>r&&(r=u),d>o&&(o=d)}return this.min.set(e,i,n),this.max.set(s,r,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=yi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0)if(e&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let r=0,o=s.count;r<o;r++)yi.fromBufferAttribute(s,r).applyMatrix4(t.matrixWorld),this.expandByPoint(yi)}else i.boundingBox===null&&i.computeBoundingBox(),to.copy(i.boundingBox),to.applyMatrix4(t.matrixWorld),this.union(to);const n=t.children;for(let s=0,r=n.length;s<r;s++)this.expandByObject(n[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,yi),yi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ln),Ns.subVectors(this.max,Ln),ji.subVectors(t.a,Ln),Wi.subVectors(t.b,Ln),Gi.subVectors(t.c,Ln),qe.subVectors(Wi,ji),Xe.subVectors(Gi,Wi),_i.subVectors(ji,Gi);let e=[0,-qe.z,qe.y,0,-Xe.z,Xe.y,0,-_i.z,_i.y,qe.z,0,-qe.x,Xe.z,0,-Xe.x,_i.z,0,-_i.x,-qe.y,qe.x,0,-Xe.y,Xe.x,0,-_i.y,_i.x,0];return!eo(e,ji,Wi,Gi,Ns)||(e=[1,0,0,0,1,0,0,0,1],!eo(e,ji,Wi,Gi,Ns))?!1:(Fs.crossVectors(qe,Xe),e=[Fs.x,Fs.y,Fs.z],eo(e,ji,Wi,Gi,Ns))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return yi.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(yi).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Re[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Re[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Re[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Re[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Re[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Re[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Re[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Re[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Re),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Re=[new v,new v,new v,new v,new v,new v,new v,new v],yi=new v,to=new vn,ji=new v,Wi=new v,Gi=new v,qe=new v,Xe=new v,_i=new v,Ln=new v,Ns=new v,Fs=new v,xi=new v;function eo(a,t,e,i,n){for(let s=0,r=a.length-3;s<=r;s+=3){xi.fromArray(a,s);const o=n.x*Math.abs(xi.x)+n.y*Math.abs(xi.y)+n.z*Math.abs(xi.z),h=t.dot(xi),l=e.dot(xi),c=i.dot(xi);if(Math.max(-Math.max(h,l,c),Math.min(h,l,c))>o)return!1}return!0}const Tf=new vn,In=new v,io=new v;class Mn{constructor(t=new v,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):Tf.setFromPoints(t).getCenter(i);let n=0;for(let s=0,r=t.length;s<r;s++)n=Math.max(n,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;In.subVectors(t,this.center);const e=In.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),n=(i-this.radius)*.5;this.center.addScaledVector(In,n/i),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(io.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(In.copy(t.center).add(io)),this.expandByPoint(In.copy(t.center).sub(io))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ze=new v,no=new v,Ds=new v,Ye=new v,so=new v,Bs=new v,ro=new v;class Pa{constructor(t=new v,e=new v(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ze)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ze.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ze.copy(this.direction).multiplyScalar(e).add(this.origin),ze.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){no.copy(t).add(e).multiplyScalar(.5),Ds.copy(e).sub(t).normalize(),Ye.copy(this.origin).sub(no);const s=t.distanceTo(e)*.5,r=-this.direction.dot(Ds),o=Ye.dot(this.direction),h=-Ye.dot(Ds),l=Ye.lengthSq(),c=Math.abs(1-r*r);let u,d,f,m;if(c>0)if(u=r*h-o,d=r*o-h,m=s*c,u>=0)if(d>=-m)if(d<=m){const p=1/c;u*=p,d*=p,f=u*(u+r*d+2*o)+d*(r*u+d+2*h)+l}else d=s,u=Math.max(0,-(r*d+o)),f=-u*u+d*(d+2*h)+l;else d=-s,u=Math.max(0,-(r*d+o)),f=-u*u+d*(d+2*h)+l;else d<=-m?(u=Math.max(0,-(-r*s+o)),d=u>0?-s:Math.min(Math.max(-s,-h),s),f=-u*u+d*(d+2*h)+l):d<=m?(u=0,d=Math.min(Math.max(-s,-h),s),f=d*(d+2*h)+l):(u=Math.max(0,-(r*s+o)),d=u>0?s:Math.min(Math.max(-s,-h),s),f=-u*u+d*(d+2*h)+l);else d=r>0?-s:s,u=Math.max(0,-(r*d+o)),f=-u*u+d*(d+2*h)+l;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),n&&n.copy(Ds).multiplyScalar(d).add(no),f}intersectSphere(t,e){ze.subVectors(t.center,this.origin);const i=ze.dot(this.direction),n=ze.dot(ze)-i*i,s=t.radius*t.radius;if(n>s)return null;const r=Math.sqrt(s-n),o=i-r,h=i+r;return o<0&&h<0?null:o<0?this.at(h,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,s,r,o,h;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(i=(t.min.x-d.x)*l,n=(t.max.x-d.x)*l):(i=(t.max.x-d.x)*l,n=(t.min.x-d.x)*l),c>=0?(s=(t.min.y-d.y)*c,r=(t.max.y-d.y)*c):(s=(t.max.y-d.y)*c,r=(t.min.y-d.y)*c),i>r||s>n||((s>i||isNaN(i))&&(i=s),(r<n||isNaN(n))&&(n=r),u>=0?(o=(t.min.z-d.z)*u,h=(t.max.z-d.z)*u):(o=(t.max.z-d.z)*u,h=(t.min.z-d.z)*u),i>h||o>n)||((o>i||i!==i)&&(i=o),(h<n||n!==n)&&(n=h),n<0)?null:this.at(i>=0?i:n,e)}intersectsBox(t){return this.intersectBox(t,ze)!==null}intersectTriangle(t,e,i,n,s){so.subVectors(e,t),Bs.subVectors(i,t),ro.crossVectors(so,Bs);let r=this.direction.dot(ro),o;if(r>0){if(n)return null;o=1}else if(r<0)o=-1,r=-r;else return null;Ye.subVectors(this.origin,t);const h=o*this.direction.dot(Bs.crossVectors(Ye,Bs));if(h<0)return null;const l=o*this.direction.dot(so.cross(Ye));if(l<0||h+l>r)return null;const c=-o*Ye.dot(ro);return c<0?null:this.at(c/r,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class X{constructor(){X.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,s,r,o,h,l,c,u,d,f,m,p,g){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=n,y[1]=s,y[5]=r,y[9]=o,y[13]=h,y[2]=l,y[6]=c,y[10]=u,y[14]=d,y[3]=f,y[7]=m,y[11]=p,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new X().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/qi.setFromMatrixColumn(t,0).length(),s=1/qi.setFromMatrixColumn(t,1).length(),r=1/qi.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,n=t.y,s=t.z,r=Math.cos(i),o=Math.sin(i),h=Math.cos(n),l=Math.sin(n),c=Math.cos(s),u=Math.sin(s);if(t.order==="XYZ"){const d=r*c,f=r*u,m=o*c,p=o*u;e[0]=h*c,e[4]=-h*u,e[8]=l,e[1]=f+m*l,e[5]=d-p*l,e[9]=-o*h,e[2]=p-d*l,e[6]=m+f*l,e[10]=r*h}else if(t.order==="YXZ"){const d=h*c,f=h*u,m=l*c,p=l*u;e[0]=d+p*o,e[4]=m*o-f,e[8]=r*l,e[1]=r*u,e[5]=r*c,e[9]=-o,e[2]=f*o-m,e[6]=p+d*o,e[10]=r*h}else if(t.order==="ZXY"){const d=h*c,f=h*u,m=l*c,p=l*u;e[0]=d-p*o,e[4]=-r*u,e[8]=m+f*o,e[1]=f+m*o,e[5]=r*c,e[9]=p-d*o,e[2]=-r*l,e[6]=o,e[10]=r*h}else if(t.order==="ZYX"){const d=r*c,f=r*u,m=o*c,p=o*u;e[0]=h*c,e[4]=m*l-f,e[8]=d*l+p,e[1]=h*u,e[5]=p*l+d,e[9]=f*l-m,e[2]=-l,e[6]=o*h,e[10]=r*h}else if(t.order==="YZX"){const d=r*h,f=r*l,m=o*h,p=o*l;e[0]=h*c,e[4]=p-d*u,e[8]=m*u+f,e[1]=u,e[5]=r*c,e[9]=-o*c,e[2]=-l*c,e[6]=f*u+m,e[10]=d-p*u}else if(t.order==="XZY"){const d=r*h,f=r*l,m=o*h,p=o*l;e[0]=h*c,e[4]=-u,e[8]=l*c,e[1]=d*u+p,e[5]=r*c,e[9]=f*u-m,e[2]=m*u-f,e[6]=o*c,e[10]=p*u+d}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Sf,t,Af)}lookAt(t,e,i){const n=this.elements;return Ht.subVectors(t,e),Ht.lengthSq()===0&&(Ht.z=1),Ht.normalize(),Ke.crossVectors(i,Ht),Ke.lengthSq()===0&&(Math.abs(i.z)===1?Ht.x+=1e-4:Ht.z+=1e-4,Ht.normalize(),Ke.crossVectors(i,Ht)),Ke.normalize(),Vs.crossVectors(Ht,Ke),n[0]=Ke.x,n[4]=Vs.x,n[8]=Ht.x,n[1]=Ke.y,n[5]=Vs.y,n[9]=Ht.y,n[2]=Ke.z,n[6]=Vs.z,n[10]=Ht.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,s=this.elements,r=i[0],o=i[4],h=i[8],l=i[12],c=i[1],u=i[5],d=i[9],f=i[13],m=i[2],p=i[6],g=i[10],y=i[14],b=i[3],_=i[7],x=i[11],w=i[15],A=n[0],T=n[4],E=n[8],C=n[12],O=n[1],P=n[5],V=n[9],N=n[13],U=n[2],D=n[6],W=n[10],Y=n[14],Q=n[3],yt=n[7],bt=n[11],ct=n[15];return s[0]=r*A+o*O+h*U+l*Q,s[4]=r*T+o*P+h*D+l*yt,s[8]=r*E+o*V+h*W+l*bt,s[12]=r*C+o*N+h*Y+l*ct,s[1]=c*A+u*O+d*U+f*Q,s[5]=c*T+u*P+d*D+f*yt,s[9]=c*E+u*V+d*W+f*bt,s[13]=c*C+u*N+d*Y+f*ct,s[2]=m*A+p*O+g*U+y*Q,s[6]=m*T+p*P+g*D+y*yt,s[10]=m*E+p*V+g*W+y*bt,s[14]=m*C+p*N+g*Y+y*ct,s[3]=b*A+_*O+x*U+w*Q,s[7]=b*T+_*P+x*D+w*yt,s[11]=b*E+_*V+x*W+w*bt,s[15]=b*C+_*N+x*Y+w*ct,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],s=t[12],r=t[1],o=t[5],h=t[9],l=t[13],c=t[2],u=t[6],d=t[10],f=t[14],m=t[3],p=t[7],g=t[11],y=t[15];return m*(+s*h*u-n*l*u-s*o*d+i*l*d+n*o*f-i*h*f)+p*(+e*h*f-e*l*d+s*r*d-n*r*f+n*l*c-s*h*c)+g*(+e*l*u-e*o*f-s*r*u+i*r*f+s*o*c-i*l*c)+y*(-n*o*c-e*h*u+e*o*d+n*r*u-i*r*d+i*h*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],h=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11],m=t[12],p=t[13],g=t[14],y=t[15],b=u*g*l-p*d*l+p*h*f-o*g*f-u*h*y+o*d*y,_=m*d*l-c*g*l-m*h*f+r*g*f+c*h*y-r*d*y,x=c*p*l-m*u*l+m*o*f-r*p*f-c*o*y+r*u*y,w=m*u*h-c*p*h-m*o*d+r*p*d+c*o*g-r*u*g,A=e*b+i*_+n*x+s*w;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/A;return t[0]=b*T,t[1]=(p*d*s-u*g*s-p*n*f+i*g*f+u*n*y-i*d*y)*T,t[2]=(o*g*s-p*h*s+p*n*l-i*g*l-o*n*y+i*h*y)*T,t[3]=(u*h*s-o*d*s-u*n*l+i*d*l+o*n*f-i*h*f)*T,t[4]=_*T,t[5]=(c*g*s-m*d*s+m*n*f-e*g*f-c*n*y+e*d*y)*T,t[6]=(m*h*s-r*g*s-m*n*l+e*g*l+r*n*y-e*h*y)*T,t[7]=(r*d*s-c*h*s+c*n*l-e*d*l-r*n*f+e*h*f)*T,t[8]=x*T,t[9]=(m*u*s-c*p*s-m*i*f+e*p*f+c*i*y-e*u*y)*T,t[10]=(r*p*s-m*o*s+m*i*l-e*p*l-r*i*y+e*o*y)*T,t[11]=(c*o*s-r*u*s-c*i*l+e*u*l+r*i*f-e*o*f)*T,t[12]=w*T,t[13]=(c*p*n-m*u*n+m*i*d-e*p*d-c*i*g+e*u*g)*T,t[14]=(m*o*n-r*p*n-m*i*h+e*p*h+r*i*g-e*o*g)*T,t[15]=(r*u*n-c*o*n+c*i*h-e*u*h-r*i*d+e*o*d)*T,this}scale(t){const e=this.elements,i=t.x,n=t.y,s=t.z;return e[0]*=i,e[4]*=n,e[8]*=s,e[1]*=i,e[5]*=n,e[9]*=s,e[2]*=i,e[6]*=n,e[10]*=s,e[3]*=i,e[7]*=n,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),s=1-i,r=t.x,o=t.y,h=t.z,l=s*r,c=s*o;return this.set(l*r+i,l*o-n*h,l*h+n*o,0,l*o+n*h,c*o+i,c*h-n*r,0,l*h-n*o,c*h+n*r,s*h*h+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,s,r){return this.set(1,i,s,0,t,1,r,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,s=e._x,r=e._y,o=e._z,h=e._w,l=s+s,c=r+r,u=o+o,d=s*l,f=s*c,m=s*u,p=r*c,g=r*u,y=o*u,b=h*l,_=h*c,x=h*u,w=i.x,A=i.y,T=i.z;return n[0]=(1-(p+y))*w,n[1]=(f+x)*w,n[2]=(m-_)*w,n[3]=0,n[4]=(f-x)*A,n[5]=(1-(d+y))*A,n[6]=(g+b)*A,n[7]=0,n[8]=(m+_)*T,n[9]=(g-b)*T,n[10]=(1-(d+p))*T,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let s=qi.set(n[0],n[1],n[2]).length();const r=qi.set(n[4],n[5],n[6]).length(),o=qi.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),t.x=n[12],t.y=n[13],t.z=n[14],ge.copy(this);const l=1/s,c=1/r,u=1/o;return ge.elements[0]*=l,ge.elements[1]*=l,ge.elements[2]*=l,ge.elements[4]*=c,ge.elements[5]*=c,ge.elements[6]*=c,ge.elements[8]*=u,ge.elements[9]*=u,ge.elements[10]*=u,e.setFromRotationMatrix(ge),i.x=s,i.y=r,i.z=o,this}makePerspective(t,e,i,n,s,r){const o=this.elements,h=2*s/(e-t),l=2*s/(i-n),c=(e+t)/(e-t),u=(i+n)/(i-n),d=-(r+s)/(r-s),f=-2*r*s/(r-s);return o[0]=h,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,i,n,s,r){const o=this.elements,h=1/(e-t),l=1/(i-n),c=1/(r-s),u=(e+t)*h,d=(i+n)*l,f=(r+s)*c;return o[0]=2*h,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const qi=new v,ge=new X,Sf=new v(0,0,0),Af=new v(1,1,1),Ke=new v,Vs=new v,Ht=new v,Eh=new X,Ch=new Ee;class Lr{constructor(t=0,e=0,i=0,n=Lr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,s=n[0],r=n[4],o=n[8],h=n[1],l=n[5],c=n[9],u=n[2],d=n[6],f=n[10];switch(e){case"XYZ":this._y=Math.asin(Mt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Mt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Mt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-r,l)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-Mt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-r,l));break;case"YZX":this._z=Math.asin(Mt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Mt(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Eh.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Eh,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Ch.setFromEuler(this),this.setFromQuaternion(Ch,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Lr.DEFAULT_ORDER="XYZ";class Ef{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Cf=0;const kh=new v,Xi=new Ee,Le=new X,Us=new v,Nn=new v,kf=new v,Of=new Ee,Oh=new v(1,0,0),Ph=new v(0,1,0),Rh=new v(0,0,1),Pf={type:"added"},zh={type:"removed"};class ft extends As{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Cf++}),this.uuid=ce(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ft.DEFAULT_UP.clone();const t=new v,e=new Lr,i=new Ee,n=new v(1,1,1);function s(){i.setFromEuler(e,!1)}function r(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new X},normalMatrix:{value:new zi}}),this.matrix=new X,this.matrixWorld=new X,this.matrixAutoUpdate=ft.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ft.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ef,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Xi.setFromAxisAngle(t,e),this.quaternion.multiply(Xi),this}rotateOnWorldAxis(t,e){return Xi.setFromAxisAngle(t,e),this.quaternion.premultiply(Xi),this}rotateX(t){return this.rotateOnAxis(Oh,t)}rotateY(t){return this.rotateOnAxis(Ph,t)}rotateZ(t){return this.rotateOnAxis(Rh,t)}translateOnAxis(t,e){return kh.copy(t).applyQuaternion(this.quaternion),this.position.add(kh.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Oh,t)}translateY(t){return this.translateOnAxis(Ph,t)}translateZ(t){return this.translateOnAxis(Rh,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Le.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Us.copy(t):Us.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Nn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Le.lookAt(Nn,Us,this.up):Le.lookAt(Us,Nn,this.up),this.quaternion.setFromRotationMatrix(Le),n&&(Le.extractRotation(n.matrixWorld),Xi.setFromRotationMatrix(Le),this.quaternion.premultiply(Xi.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Pf)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(zh)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(zh)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Le.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Le.multiply(t.parent.matrixWorld)),t.applyMatrix4(Le),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const r=this.children[i].getObjectByProperty(t,e);if(r!==void 0)return r}}getObjectsByProperty(t,e){let i=[];this[t]===e&&i.push(this);for(let n=0,s=this.children.length;n<s;n++){const r=this.children[n].getObjectsByProperty(t,e);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nn,t,kf),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nn,Of,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){const s=e[i];(s.matrixWorldAutoUpdate===!0||t===!0)&&s.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const n=this.children;for(let s=0,r=n.length;s<r;s++){const o=n[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function s(o,h){return o[h.uuid]===void 0&&(o[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(t.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const h=o.shapes;if(Array.isArray(h))for(let l=0,c=h.length;l<c;l++){const u=h[l];s(t.shapes,u)}else s(t.shapes,h)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let h=0,l=this.material.length;h<l;h++)o.push(s(t.materials,this.material[h]));n.material=o}else n.material=s(t.materials,this.material);if(this.children.length>0){n.children=[];for(let o=0;o<this.children.length;o++)n.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let o=0;o<this.animations.length;o++){const h=this.animations[o];n.animations.push(s(t.animations,h))}}if(e){const o=r(t.geometries),h=r(t.materials),l=r(t.textures),c=r(t.images),u=r(t.shapes),d=r(t.skeletons),f=r(t.animations),m=r(t.nodes);o.length>0&&(i.geometries=o),h.length>0&&(i.materials=h),l.length>0&&(i.textures=l),c.length>0&&(i.images=c),u.length>0&&(i.shapes=u),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=n,i;function r(o){const h=[];for(const l in o){const c=o[l];delete c.metadata,h.push(c)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const n=t.children[i];this.add(n.clone())}return this}}ft.DEFAULT_UP=new v(0,1,0);ft.DEFAULT_MATRIX_AUTO_UPDATE=!0;ft.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ye=new v,Ie=new v,oo=new v,Ne=new v,Yi=new v,Ki=new v,Lh=new v,ao=new v,ho=new v,lo=new v;class Ue{constructor(t=new v,e=new v,i=new v){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),ye.subVectors(t,e),n.cross(ye);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(t,e,i,n,s){ye.subVectors(n,e),Ie.subVectors(i,e),oo.subVectors(t,e);const r=ye.dot(ye),o=ye.dot(Ie),h=ye.dot(oo),l=Ie.dot(Ie),c=Ie.dot(oo),u=r*l-o*o;if(u===0)return s.set(-2,-1,-1);const d=1/u,f=(l*h-o*c)*d,m=(r*c-o*h)*d;return s.set(1-f-m,m,f)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Ne),Ne.x>=0&&Ne.y>=0&&Ne.x+Ne.y<=1}static getUV(t,e,i,n,s,r,o,h){return this.getBarycoord(t,e,i,n,Ne),h.set(0,0),h.addScaledVector(s,Ne.x),h.addScaledVector(r,Ne.y),h.addScaledVector(o,Ne.z),h}static isFrontFacing(t,e,i,n){return ye.subVectors(i,e),Ie.subVectors(t,e),ye.cross(Ie).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ye.subVectors(this.c,this.b),Ie.subVectors(this.a,this.b),ye.cross(Ie).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ue.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ue.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,s){return Ue.getUV(t,this.a,this.b,this.c,e,i,n,s)}containsPoint(t){return Ue.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ue.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,n=this.b,s=this.c;let r,o;Yi.subVectors(n,i),Ki.subVectors(s,i),ao.subVectors(t,i);const h=Yi.dot(ao),l=Ki.dot(ao);if(h<=0&&l<=0)return e.copy(i);ho.subVectors(t,n);const c=Yi.dot(ho),u=Ki.dot(ho);if(c>=0&&u<=c)return e.copy(n);const d=h*u-c*l;if(d<=0&&h>=0&&c<=0)return r=h/(h-c),e.copy(i).addScaledVector(Yi,r);lo.subVectors(t,s);const f=Yi.dot(lo),m=Ki.dot(lo);if(m>=0&&f<=m)return e.copy(s);const p=f*l-h*m;if(p<=0&&l>=0&&m<=0)return o=l/(l-m),e.copy(i).addScaledVector(Ki,o);const g=c*m-f*u;if(g<=0&&u-c>=0&&f-m>=0)return Lh.subVectors(s,n),o=(u-c)/(u-c+(f-m)),e.copy(n).addScaledVector(Lh,o);const y=1/(g+p+d);return r=p*y,o=d*y,e.copy(i).addScaledVector(Yi,r).addScaledVector(Ki,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Rf=0;class Ei extends As{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Rf++}),this.uuid=ce(),this.name="",this.type="Material",this.blending=wh,this.side=Ar,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=jd,this.blendDst=Wd,this.blendEquation=Hd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Gd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yr,this.stencilZFail=Yr,this.stencilZPass=Yr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==wh&&(i.blending=this.blending),this.side!==Ar&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function n(s){const r=[];for(const o in s){const h=s[o];delete h.metadata,r.push(h)}return r}if(e){const s=n(t.textures),r=n(t.images);s.length>0&&(i.textures=s),r.length>0&&(i.images=r)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const n=e.length;i=new Array(n);for(let s=0;s!==n;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class on extends Ei{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const mt=new v,Hs=new z;class Xt{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=$o,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Hs.fromBufferAttribute(this,e),Hs.applyMatrix3(t),this.setXY(e,Hs.x,Hs.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)mt.fromBufferAttribute(this,e),mt.applyMatrix3(t),this.setXYZ(e,mt.x,mt.y,mt.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)mt.fromBufferAttribute(this,e),mt.applyMatrix4(t),this.setXYZ(e,mt.x,mt.y,mt.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)mt.fromBufferAttribute(this,e),mt.applyNormalMatrix(t),this.setXYZ(e,mt.x,mt.y,mt.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)mt.fromBufferAttribute(this,e),mt.transformDirection(t),this.setXYZ(e,mt.x,mt.y,mt.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=je(e,this.array)),e}setX(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=je(e,this.array)),e}setY(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=je(e,this.array)),e}setZ(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=je(e,this.array)),e}setW(t,e){return this.normalized&&(e=it(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=it(e,this.array),i=it(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=it(e,this.array),i=it(i,this.array),n=it(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,s){return t*=this.itemSize,this.normalized&&(e=it(e,this.array),i=it(i,this.array),n=it(n,this.array),s=it(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==$o&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class zf extends Xt{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Lf extends Xt{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class ys extends Xt{constructor(t,e,i){super(new Float32Array(t),e,i)}}let If=0;const ie=new X,co=new ft,Ji=new v,jt=new vn,Fn=new vn,vt=new v;class di extends As{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:If++}),this.uuid=ce(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(bf(t)?Lf:zf)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new zi().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(t),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ie.makeRotationFromQuaternion(t),this.applyMatrix4(ie),this}rotateX(t){return ie.makeRotationX(t),this.applyMatrix4(ie),this}rotateY(t){return ie.makeRotationY(t),this.applyMatrix4(ie),this}rotateZ(t){return ie.makeRotationZ(t),this.applyMatrix4(ie),this}translate(t,e,i){return ie.makeTranslation(t,e,i),this.applyMatrix4(ie),this}scale(t,e,i){return ie.makeScale(t,e,i),this.applyMatrix4(ie),this}lookAt(t){return co.lookAt(t),co.updateMatrix(),this.applyMatrix4(co.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ji).negate(),this.translate(Ji.x,Ji.y,Ji.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ys(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new v(-1/0,-1/0,-1/0),new v(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,n=e.length;i<n;i++){const s=e[i];jt.setFromBufferAttribute(s),this.morphTargetsRelative?(vt.addVectors(this.boundingBox.min,jt.min),this.boundingBox.expandByPoint(vt),vt.addVectors(this.boundingBox.max,jt.max),this.boundingBox.expandByPoint(vt)):(this.boundingBox.expandByPoint(jt.min),this.boundingBox.expandByPoint(jt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Mn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new v,1/0);return}if(t){const i=this.boundingSphere.center;if(jt.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const o=e[s];Fn.setFromBufferAttribute(o),this.morphTargetsRelative?(vt.addVectors(jt.min,Fn.min),jt.expandByPoint(vt),vt.addVectors(jt.max,Fn.max),jt.expandByPoint(vt)):(jt.expandByPoint(Fn.min),jt.expandByPoint(Fn.max))}jt.getCenter(i);let n=0;for(let s=0,r=t.count;s<r;s++)vt.fromBufferAttribute(t,s),n=Math.max(n,i.distanceToSquared(vt));if(e)for(let s=0,r=e.length;s<r;s++){const o=e[s],h=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)vt.fromBufferAttribute(o,l),h&&(Ji.fromBufferAttribute(t,l),vt.add(Ji)),n=Math.max(n,i.distanceToSquared(vt))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.array,n=e.position.array,s=e.normal.array,r=e.uv.array,o=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*o),4));const h=this.getAttribute("tangent").array,l=[],c=[];for(let O=0;O<o;O++)l[O]=new v,c[O]=new v;const u=new v,d=new v,f=new v,m=new z,p=new z,g=new z,y=new v,b=new v;function _(O,P,V){u.fromArray(n,O*3),d.fromArray(n,P*3),f.fromArray(n,V*3),m.fromArray(r,O*2),p.fromArray(r,P*2),g.fromArray(r,V*2),d.sub(u),f.sub(u),p.sub(m),g.sub(m);const N=1/(p.x*g.y-g.x*p.y);isFinite(N)&&(y.copy(d).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(N),b.copy(f).multiplyScalar(p.x).addScaledVector(d,-g.x).multiplyScalar(N),l[O].add(y),l[P].add(y),l[V].add(y),c[O].add(b),c[P].add(b),c[V].add(b))}let x=this.groups;x.length===0&&(x=[{start:0,count:i.length}]);for(let O=0,P=x.length;O<P;++O){const V=x[O],N=V.start,U=V.count;for(let D=N,W=N+U;D<W;D+=3)_(i[D+0],i[D+1],i[D+2])}const w=new v,A=new v,T=new v,E=new v;function C(O){T.fromArray(s,O*3),E.copy(T);const P=l[O];w.copy(P),w.sub(T.multiplyScalar(T.dot(P))).normalize(),A.crossVectors(E,P);const N=A.dot(c[O])<0?-1:1;h[O*4]=w.x,h[O*4+1]=w.y,h[O*4+2]=w.z,h[O*4+3]=N}for(let O=0,P=x.length;O<P;++O){const V=x[O],N=V.start,U=V.count;for(let D=N,W=N+U;D<W;D+=3)C(i[D+0]),C(i[D+1]),C(i[D+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xt(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const n=new v,s=new v,r=new v,o=new v,h=new v,l=new v,c=new v,u=new v;if(t)for(let d=0,f=t.count;d<f;d+=3){const m=t.getX(d+0),p=t.getX(d+1),g=t.getX(d+2);n.fromBufferAttribute(e,m),s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,g),c.subVectors(r,s),u.subVectors(n,s),c.cross(u),o.fromBufferAttribute(i,m),h.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),o.add(c),h.add(c),l.add(c),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(p,h.x,h.y,h.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let d=0,f=e.count;d<f;d+=3)n.fromBufferAttribute(e,d+0),s.fromBufferAttribute(e,d+1),r.fromBufferAttribute(e,d+2),c.subVectors(r,s),u.subVectors(n,s),c.cross(u),i.setXYZ(d+0,c.x,c.y,c.z),i.setXYZ(d+1,c.x,c.y,c.z),i.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)vt.fromBufferAttribute(t,e),vt.normalize(),t.setXYZ(e,vt.x,vt.y,vt.z)}toNonIndexed(){function t(o,h){const l=o.array,c=o.itemSize,u=o.normalized,d=new l.constructor(h.length*c);let f=0,m=0;for(let p=0,g=h.length;p<g;p++){o.isInterleavedBufferAttribute?f=h[p]*o.data.stride+o.offset:f=h[p]*c;for(let y=0;y<c;y++)d[m++]=l[f++]}return new Xt(d,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new di,i=this.index.array,n=this.attributes;for(const o in n){const h=n[o],l=t(h,i);e.setAttribute(o,l)}const s=this.morphAttributes;for(const o in s){const h=[],l=s[o];for(let c=0,u=l.length;c<u;c++){const d=l[c],f=t(d,i);h.push(f)}e.morphAttributes[o]=h}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let o=0,h=r.length;o<h;o++){const l=r[o];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const l in h)h[l]!==void 0&&(t[l]=h[l]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const h in i){const l=i[h];t.data.attributes[h]=l.toJSON(t.data)}const n={};let s=!1;for(const h in this.morphAttributes){const l=this.morphAttributes[h],c=[];for(let u=0,d=l.length;u<d;u++){const f=l[u];c.push(f.toJSON(t.data))}c.length>0&&(n[h]=c,s=!0)}s&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const n=t.attributes;for(const l in n){const c=n[l];this.setAttribute(l,c.clone(e))}const s=t.morphAttributes;for(const l in s){const c=[],u=s[l];for(let d=0,f=u.length;d<f;d++)c.push(u[d].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let l=0,c=r.length;l<c;l++){const u=r[l];this.addGroup(u.start,u.count,u.materialIndex)}const o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());const h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ih=new X,Zi=new Pa,uo=new Mn,Dn=new v,Bn=new v,Vn=new v,fo=new v,js=new v,Ws=new z,Gs=new z,qs=new z,po=new v,Xs=new v;class Ir extends ft{constructor(t=new di,e=new on){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=n.length;s<r;s++){const o=n[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(t,e){const i=this.geometry,n=i.attributes.position,s=i.morphAttributes.position,r=i.morphTargetsRelative;e.fromBufferAttribute(n,t);const o=this.morphTargetInfluences;if(s&&o){js.set(0,0,0);for(let h=0,l=s.length;h<l;h++){const c=o[h],u=s[h];c!==0&&(fo.fromBufferAttribute(u,t),r?js.addScaledVector(fo,c):js.addScaledVector(fo.sub(e),c))}e.add(js)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const i=this.geometry,n=this.material,s=this.matrixWorld;if(n===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),uo.copy(i.boundingSphere),uo.applyMatrix4(s),t.ray.intersectsSphere(uo)===!1)||(Ih.copy(s).invert(),Zi.copy(t.ray).applyMatrix4(Ih),i.boundingBox!==null&&Zi.intersectsBox(i.boundingBox)===!1))return;let r;const o=i.index,h=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv2,u=i.groups,d=i.drawRange;if(o!==null)if(Array.isArray(n))for(let f=0,m=u.length;f<m;f++){const p=u[f],g=n[p.materialIndex],y=Math.max(p.start,d.start),b=Math.min(o.count,Math.min(p.start+p.count,d.start+d.count));for(let _=y,x=b;_<x;_+=3){const w=o.getX(_),A=o.getX(_+1),T=o.getX(_+2);r=Ys(this,g,t,Zi,l,c,w,A,T),r&&(r.faceIndex=Math.floor(_/3),r.face.materialIndex=p.materialIndex,e.push(r))}}else{const f=Math.max(0,d.start),m=Math.min(o.count,d.start+d.count);for(let p=f,g=m;p<g;p+=3){const y=o.getX(p),b=o.getX(p+1),_=o.getX(p+2);r=Ys(this,n,t,Zi,l,c,y,b,_),r&&(r.faceIndex=Math.floor(p/3),e.push(r))}}else if(h!==void 0)if(Array.isArray(n))for(let f=0,m=u.length;f<m;f++){const p=u[f],g=n[p.materialIndex],y=Math.max(p.start,d.start),b=Math.min(h.count,Math.min(p.start+p.count,d.start+d.count));for(let _=y,x=b;_<x;_+=3){const w=_,A=_+1,T=_+2;r=Ys(this,g,t,Zi,l,c,w,A,T),r&&(r.faceIndex=Math.floor(_/3),r.face.materialIndex=p.materialIndex,e.push(r))}}else{const f=Math.max(0,d.start),m=Math.min(h.count,d.start+d.count);for(let p=f,g=m;p<g;p+=3){const y=p,b=p+1,_=p+2;r=Ys(this,n,t,Zi,l,c,y,b,_),r&&(r.faceIndex=Math.floor(p/3),e.push(r))}}}}function Nf(a,t,e,i,n,s,r,o){let h;if(t.side===Vd?h=i.intersectTriangle(r,s,n,!0,o):h=i.intersectTriangle(n,s,r,t.side===Ar,o),h===null)return null;Xs.copy(o),Xs.applyMatrix4(a.matrixWorld);const l=e.ray.origin.distanceTo(Xs);return l<e.near||l>e.far?null:{distance:l,point:Xs.clone(),object:a}}function Ys(a,t,e,i,n,s,r,o,h){a.getVertexPosition(r,Dn),a.getVertexPosition(o,Bn),a.getVertexPosition(h,Vn);const l=Nf(a,t,e,i,Dn,Bn,Vn,po);if(l){n&&(Ws.fromBufferAttribute(n,r),Gs.fromBufferAttribute(n,o),qs.fromBufferAttribute(n,h),l.uv=Ue.getUV(po,Dn,Bn,Vn,Ws,Gs,qs,new z)),s&&(Ws.fromBufferAttribute(s,r),Gs.fromBufferAttribute(s,o),qs.fromBufferAttribute(s,h),l.uv2=Ue.getUV(po,Dn,Bn,Vn,Ws,Gs,qs,new z));const c={a:r,b:o,c:h,normal:new v,materialIndex:0};Ue.getNormal(Dn,Bn,Vn,c.normal),l.face=c}return l}class Ec extends ft{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new X,this.projectionMatrix=new X,this.projectionMatrixInverse=new X}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ra extends Ec{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=gs*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(es*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return gs*2*Math.atan(Math.tan(es*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,s,r){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(es*.5*this.fov)/this.zoom,i=2*e,n=this.aspect*i,s=-.5*n;const r=this.view;if(this.view!==null&&this.view.enabled){const h=r.fullWidth,l=r.fullHeight;s+=r.offsetX*n/h,e-=r.offsetY*i/l,n*=r.width/h,i*=r.height/l}const o=this.filmOffset;o!==0&&(s+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const mo=new v,Ff=new v,Df=new zi;class $i{constructor(t=new v(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=mo.subVectors(i,e).cross(Ff.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const i=t.delta(mo),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||Df.getNormalMatrix(t),n=this.coplanarPoint(mo).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Qi=new Mn,Ks=new v;class Bf{constructor(t=new $i,e=new $i,i=new $i,n=new $i,s=new $i,r=new $i){this.planes=[t,e,i,n,s,r]}set(t,e,i,n,s,r){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(s),o[5].copy(r),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],s=i[1],r=i[2],o=i[3],h=i[4],l=i[5],c=i[6],u=i[7],d=i[8],f=i[9],m=i[10],p=i[11],g=i[12],y=i[13],b=i[14],_=i[15];return e[0].setComponents(o-n,u-h,p-d,_-g).normalize(),e[1].setComponents(o+n,u+h,p+d,_+g).normalize(),e[2].setComponents(o+s,u+l,p+f,_+y).normalize(),e[3].setComponents(o-s,u-l,p-f,_-y).normalize(),e[4].setComponents(o-r,u-c,p-m,_-b).normalize(),e[5].setComponents(o+r,u+c,p+m,_+b).normalize(),this}intersectsObject(t){const e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Qi.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Qi)}intersectsSprite(t){return Qi.center.set(0,0,0),Qi.radius=.7071067811865476,Qi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Qi)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Ks.x=n.normal.x>0?t.max.x:t.min.x,Ks.y=n.normal.y>0?t.max.y:t.min.y,Ks.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Ks)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Cc extends Ec{constructor(t=-1,e=1,i=1,n=-1,s=.1,r=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=i-t,r=i+t,o=n+e,h=n-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,r=s+l*this.view.width,o-=c*this.view.offsetY,h=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,r,o,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class go extends ft{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Vf{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=$o,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ce()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,s=this.stride;n<s;n++)this.array[t+n]=e.array[i+n];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ce()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ce()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Lt=new v;class za{constructor(t,e,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Lt.fromBufferAttribute(this,e),Lt.applyMatrix4(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Lt.fromBufferAttribute(this,e),Lt.applyNormalMatrix(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Lt.fromBufferAttribute(this,e),Lt.transformDirection(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}setX(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=it(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=je(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=je(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=je(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=je(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=it(e,this.array),i=it(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=it(e,this.array),i=it(i,this.array),n=it(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=it(e,this.array),i=it(i,this.array),n=it(n,this.array),s=it(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[n+s])}return new Xt(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new za(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[n+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Nh=new v,Fh=new oe,Dh=new oe,Uf=new v,Bh=new X;class Hf extends Ir{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new X,this.bindMatrixInverse=new X}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new oe,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.fromBufferAttribute(e,i);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const i=this.skeleton,n=this.geometry;Fh.fromBufferAttribute(n.attributes.skinIndex,t),Dh.fromBufferAttribute(n.attributes.skinWeight,t),Nh.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const r=Dh.getComponent(s);if(r!==0){const o=Fh.getComponent(s);Bh.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),e.addScaledVector(Uf.copy(Nh).applyMatrix4(Bh),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}class kc extends ft{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jf extends xe{constructor(t=null,e=1,i=1,n,s,r,o,h,l=Ko,c=Ko,u,d){super(null,r,o,h,l,c,n,s,u,d),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Vh=new X,Wf=new X;class La{constructor(t=[],e=[]){this.uuid=ce(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new X)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new X;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let s=0,r=t.length;s<r;s++){const o=t[s]?t[s].matrixWorld:Wf;Vh.multiplyMatrices(o,e[s]),Vh.toArray(i,s*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new La(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Sc(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new jf(e,t,t,Mc,Zd);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,n=t.bones.length;i<n;i++){const s=t.bones[i];let r=e[s];r===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),r=new kc),this.bones.push(r),this.boneInverses.push(new X().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let n=0,s=e.length;n<s;n++){const r=e[n];t.bones.push(r.uuid);const o=i[n];t.boneInverses.push(o.toArray())}return t}}class Uh extends Xt{constructor(t,e,i,n=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Hh=new X,jh=new X,Js=[],Gf=new X,Un=new Ir;class qf extends Ir{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Uh(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let n=0;n<i;n++)this.setMatrixAt(n,Gf)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}raycast(t,e){const i=this.matrixWorld,n=this.count;if(Un.geometry=this.geometry,Un.material=this.material,Un.material!==void 0)for(let s=0;s<n;s++){this.getMatrixAt(s,Hh),jh.multiplyMatrices(i,Hh),Un.matrixWorld=jh,Un.raycast(t,Js);for(let r=0,o=Js.length;r<o;r++){const h=Js[r];h.instanceId=s,h.object=this,e.push(h)}Js.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Uh(new Float32Array(this.instanceMatrix.count*3),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Oc extends Ei{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Wh=new v,Gh=new v,qh=new X,yo=new Pa,Zs=new Mn;class Ia extends ft{constructor(t=new di,e=new Oc){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let n=1,s=e.count;n<s;n++)Wh.fromBufferAttribute(e,n-1),Gh.fromBufferAttribute(e,n),i[n]=i[n-1],i[n]+=Wh.distanceTo(Gh);t.setAttribute("lineDistance",new ys(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,s=t.params.Line.threshold,r=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Zs.copy(i.boundingSphere),Zs.applyMatrix4(n),Zs.radius+=s,t.ray.intersectsSphere(Zs)===!1)return;qh.copy(n).invert(),yo.copy(t.ray).applyMatrix4(qh);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=o*o,l=new v,c=new v,u=new v,d=new v,f=this.isLineSegments?2:1,m=i.index,g=i.attributes.position;if(m!==null){const y=Math.max(0,r.start),b=Math.min(m.count,r.start+r.count);for(let _=y,x=b-1;_<x;_+=f){const w=m.getX(_),A=m.getX(_+1);if(l.fromBufferAttribute(g,w),c.fromBufferAttribute(g,A),yo.distanceSqToSegment(l,c,d,u)>h)continue;d.applyMatrix4(this.matrixWorld);const E=t.ray.origin.distanceTo(d);E<t.near||E>t.far||e.push({distance:E,point:u.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,r.start),b=Math.min(g.count,r.start+r.count);for(let _=y,x=b-1;_<x;_+=f){if(l.fromBufferAttribute(g,_),c.fromBufferAttribute(g,_+1),yo.distanceSqToSegment(l,c,d,u)>h)continue;d.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(d);A<t.near||A>t.far||e.push({distance:A,point:u.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=n.length;s<r;s++){const o=n[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const Xh=new v,Yh=new v;class Xf extends Ia{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let n=0,s=e.count;n<s;n+=2)Xh.fromBufferAttribute(e,n),Yh.fromBufferAttribute(e,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+Xh.distanceTo(Yh);t.setAttribute("lineDistance",new ys(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Yf extends Ia{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Pc extends Ei{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Kh=new X,ta=new Pa,$s=new Mn,Qs=new v;class Kf extends ft{constructor(t=new di,e=new Pc){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,n=this.matrixWorld,s=t.params.Points.threshold,r=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$s.copy(i.boundingSphere),$s.applyMatrix4(n),$s.radius+=s,t.ray.intersectsSphere($s)===!1)return;Kh.copy(n).invert(),ta.copy(t.ray).applyMatrix4(Kh);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),h=o*o,l=i.index,u=i.attributes.position;if(l!==null){const d=Math.max(0,r.start),f=Math.min(l.count,r.start+r.count);for(let m=d,p=f;m<p;m++){const g=l.getX(m);Qs.fromBufferAttribute(u,g),Jh(Qs,g,h,n,t,e,this)}}else{const d=Math.max(0,r.start),f=Math.min(u.count,r.start+r.count);for(let m=d,p=f;m<p;m++)Qs.fromBufferAttribute(u,m),Jh(Qs,m,h,n,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const n=e[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=n.length;s<r;s++){const o=n[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Jh(a,t,e,i,n,s,r){const o=ta.distanceSqToPoint(a);if(o<e){const h=new v;ta.closestPointToPoint(a,h),h.applyMatrix4(i);const l=n.ray.origin.distanceTo(h);if(l<n.near||l>n.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:h,index:t,face:null,object:r})}}class Ce{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,n=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)i=this.getPoint(r/t),s+=i.distanceTo(n),e.push(s),n=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let n=0;const s=i.length;let r;e?r=e:r=t*i[s-1];let o=0,h=s-1,l;for(;o<=h;)if(n=Math.floor(o+(h-o)/2),l=i[n]-r,l<0)o=n+1;else if(l>0)h=n-1;else{h=n;break}if(n=h,i[n]===r)return n/(s-1);const c=i[n],d=i[n+1]-c,f=(r-c)/d;return(n+f)/(s-1)}getTangent(t,e){let n=t-1e-4,s=t+1e-4;n<0&&(n=0),s>1&&(s=1);const r=this.getPoint(n),o=this.getPoint(s),h=e||(r.isVector2?new z:new v);return h.copy(o).sub(r).normalize(),h}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new v,n=[],s=[],r=[],o=new v,h=new X;for(let f=0;f<=t;f++){const m=f/t;n[f]=this.getTangentAt(m,new v)}s[0]=new v,r[0]=new v;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),u=Math.abs(n[0].y),d=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),d<=l&&i.set(0,0,1),o.crossVectors(n[0],i).normalize(),s[0].crossVectors(n[0],o),r[0].crossVectors(n[0],s[0]);for(let f=1;f<=t;f++){if(s[f]=s[f-1].clone(),r[f]=r[f-1].clone(),o.crossVectors(n[f-1],n[f]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Mt(n[f-1].dot(n[f]),-1,1));s[f].applyMatrix4(h.makeRotationAxis(o,m))}r[f].crossVectors(n[f],s[f])}if(e===!0){let f=Math.acos(Mt(s[0].dot(s[t]),-1,1));f/=t,n[0].dot(o.crossVectors(s[0],s[t]))>0&&(f=-f);for(let m=1;m<=t;m++)s[m].applyMatrix4(h.makeRotationAxis(n[m],f*m)),r[m].crossVectors(n[m],s[m])}return{tangents:n,normals:s,binormals:r}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Na extends Ce{constructor(t=0,e=0,i=1,n=1,s=0,r=Math.PI*2,o=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=o,this.aRotation=h}getPoint(t,e){const i=e||new z,n=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=n;for(;s>n;)s-=n;s<Number.EPSILON&&(r?s=0:s=n),this.aClockwise===!0&&!r&&(s===n?s=-n:s=s-n);const o=this.aStartAngle+t*s;let h=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=h-this.aX,f=l-this.aY;h=d*c-f*u+this.aX,l=d*u+f*c+this.aY}return i.set(h,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Jf extends Na{constructor(t,e,i,n,s,r){super(t,e,i,i,n,s,r),this.isArcCurve=!0,this.type="ArcCurve"}}function Fa(){let a=0,t=0,e=0,i=0;function n(s,r,o,h){a=s,t=o,e=-3*s+3*r-2*o-h,i=2*s-2*r+o+h}return{initCatmullRom:function(s,r,o,h,l){n(r,o,l*(o-s),l*(h-r))},initNonuniformCatmullRom:function(s,r,o,h,l,c,u){let d=(r-s)/l-(o-s)/(l+c)+(o-r)/c,f=(o-r)/c-(h-r)/(c+u)+(h-o)/u;d*=c,f*=c,n(r,o,d,f)},calc:function(s){const r=s*s,o=r*s;return a+t*s+e*r+i*o}}}const tr=new v,_o=new Fa,xo=new Fa,bo=new Fa;class Zf extends Ce{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new v){const i=e,n=this.points,s=n.length,r=(s-(this.closed?0:1))*t;let o=Math.floor(r),h=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:h===0&&o===s-1&&(o=s-2,h=1);let l,c;this.closed||o>0?l=n[(o-1)%s]:(tr.subVectors(n[0],n[1]).add(n[0]),l=tr);const u=n[o%s],d=n[(o+1)%s];if(this.closed||o+2<s?c=n[(o+2)%s]:(tr.subVectors(n[s-1],n[s-2]).add(n[s-1]),c=tr),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(l.distanceToSquared(u),f),p=Math.pow(u.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(c),f);p<1e-4&&(p=1),m<1e-4&&(m=p),g<1e-4&&(g=p),_o.initNonuniformCatmullRom(l.x,u.x,d.x,c.x,m,p,g),xo.initNonuniformCatmullRom(l.y,u.y,d.y,c.y,m,p,g),bo.initNonuniformCatmullRom(l.z,u.z,d.z,c.z,m,p,g)}else this.curveType==="catmullrom"&&(_o.initCatmullRom(l.x,u.x,d.x,c.x,this.tension),xo.initCatmullRom(l.y,u.y,d.y,c.y,this.tension),bo.initCatmullRom(l.z,u.z,d.z,c.z,this.tension));return i.set(_o.calc(h),xo.calc(h),bo.calc(h)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(new v().fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Zh(a,t,e,i,n){const s=(i-t)*.5,r=(n-e)*.5,o=a*a,h=a*o;return(2*e-2*i+s+r)*h+(-3*e+3*i-2*s-r)*o+s*a+e}function $f(a,t){const e=1-a;return e*e*t}function Qf(a,t){return 2*(1-a)*a*t}function tp(a,t){return a*a*t}function ns(a,t,e,i){return $f(a,t)+Qf(a,e)+tp(a,i)}function ep(a,t){const e=1-a;return e*e*e*t}function ip(a,t){const e=1-a;return 3*e*e*a*t}function np(a,t){return 3*(1-a)*a*a*t}function sp(a,t){return a*a*a*t}function ss(a,t,e,i,n){return ep(a,t)+ip(a,e)+np(a,i)+sp(a,n)}class Rc extends Ce{constructor(t=new z,e=new z,i=new z,n=new z){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new z){const i=e,n=this.v0,s=this.v1,r=this.v2,o=this.v3;return i.set(ss(t,n.x,s.x,r.x,o.x),ss(t,n.y,s.y,r.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class rp extends Ce{constructor(t=new v,e=new v,i=new v,n=new v){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new v){const i=e,n=this.v0,s=this.v1,r=this.v2,o=this.v3;return i.set(ss(t,n.x,s.x,r.x,o.x),ss(t,n.y,s.y,r.y,o.y),ss(t,n.z,s.z,r.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Da extends Ce{constructor(t=new z,e=new z){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new z){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new z;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class op extends Ce{constructor(t=new v,e=new v){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new v){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class zc extends Ce{constructor(t=new z,e=new z,i=new z){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new z){const i=e,n=this.v0,s=this.v1,r=this.v2;return i.set(ns(t,n.x,s.x,r.x),ns(t,n.y,s.y,r.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class ap extends Ce{constructor(t=new v,e=new v,i=new v){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new v){const i=e,n=this.v0,s=this.v1,r=this.v2;return i.set(ns(t,n.x,s.x,r.x),ns(t,n.y,s.y,r.y),ns(t,n.z,s.z,r.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Lc extends Ce{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new z){const i=e,n=this.points,s=(n.length-1)*t,r=Math.floor(s),o=s-r,h=n[r===0?r:r-1],l=n[r],c=n[r>n.length-2?n.length-1:r+1],u=n[r>n.length-3?n.length-1:r+2];return i.set(Zh(o,h.x,l.x,c.x,u.x),Zh(o,h.y,l.y,c.y,u.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const n=t.points[e];this.points.push(new z().fromArray(n))}return this}}var Ic=Object.freeze({__proto__:null,ArcCurve:Jf,CatmullRomCurve3:Zf,CubicBezierCurve:Rc,CubicBezierCurve3:rp,EllipseCurve:Na,LineCurve:Da,LineCurve3:op,QuadraticBezierCurve:zc,QuadraticBezierCurve3:ap,SplineCurve:Lc});class hp extends Ce{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Da(e,t))}getPoint(t,e){const i=t*this.getLength(),n=this.getCurveLengths();let s=0;for(;s<n.length;){if(n[s]>=i){const r=n[s]-i,o=this.curves[s],h=o.getLength(),l=h===0?0:1-r/h;return o.getPointAt(l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let n=0,s=this.curves;n<s.length;n++){const r=s[n],o=r.isEllipseCurve?t*2:r.isLineCurve||r.isLineCurve3?1:r.isSplineCurve?t*r.points.length:t,h=r.getPoints(o);for(let l=0;l<h.length;l++){const c=h[l];i&&i.equals(c)||(e.push(c),i=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const n=t.curves[e];this.curves.push(new Ic[n.type]().fromJSON(n))}return this}}class ea extends hp{constructor(t){super(),this.type="Path",this.currentPoint=new z,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new Da(this.currentPoint.clone(),new z(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){const s=new zc(this.currentPoint.clone(),new z(t,e),new z(i,n));return this.curves.push(s),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,s,r){const o=new Rc(this.currentPoint.clone(),new z(t,e),new z(i,n),new z(s,r));return this.curves.push(o),this.currentPoint.set(s,r),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new Lc(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,s,r){const o=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(t+o,e+h,i,n,s,r),this}absarc(t,e,i,n,s,r){return this.absellipse(t,e,i,i,n,s,r),this}ellipse(t,e,i,n,s,r,o,h){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,i,n,s,r,o,h),this}absellipse(t,e,i,n,s,r,o,h){const l=new Na(t,e,i,n,s,r,o,h);if(this.curves.length>0){const u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ur extends ea{constructor(t){super(t),this.uuid=ce(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const n=t.holes[e];this.holes.push(new ea().fromJSON(n))}return this}}const lp={triangulate:function(a,t,e=2){const i=t&&t.length,n=i?t[0]*e:a.length;let s=Nc(a,0,n,e,!0);const r=[];if(!s||s.next===s.prev)return r;let o,h,l,c,u,d,f;if(i&&(s=pp(a,t,s,e)),a.length>80*e){o=l=a[0],h=c=a[1];for(let m=e;m<n;m+=e)u=a[m],d=a[m+1],u<o&&(o=u),d<h&&(h=d),u>l&&(l=u),d>c&&(c=d);f=Math.max(l-o,c-h),f=f!==0?32767/f:0}return _s(s,r,e,o,h,f,0),r}};function Nc(a,t,e,i,n){let s,r;if(n===Sp(a,t,e,i)>0)for(s=t;s<e;s+=i)r=$h(s,a[s],a[s+1],r);else for(s=e-i;s>=t;s-=i)r=$h(s,a[s],a[s+1],r);return r&&Nr(r,r.next)&&(bs(r),r=r.next),r}function ki(a,t){if(!a)return a;t||(t=a);let e=a,i;do if(i=!1,!e.steiner&&(Nr(e,e.next)||ht(e.prev,e,e.next)===0)){if(bs(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function _s(a,t,e,i,n,s,r){if(!a)return;!r&&s&&xp(a,i,n,s);let o=a,h,l;for(;a.prev!==a.next;){if(h=a.prev,l=a.next,s?up(a,i,n,s):cp(a)){t.push(h.i/e|0),t.push(a.i/e|0),t.push(l.i/e|0),bs(a),a=l.next,o=l.next;continue}if(a=l,a===o){r?r===1?(a=dp(ki(a),t,e),_s(a,t,e,i,n,s,2)):r===2&&fp(a,t,e,i,n,s):_s(ki(a),t,e,i,n,s,1);break}}}function cp(a){const t=a.prev,e=a,i=a.next;if(ht(t,e,i)>=0)return!1;const n=t.x,s=e.x,r=i.x,o=t.y,h=e.y,l=i.y,c=n<s?n<r?n:r:s<r?s:r,u=o<h?o<l?o:l:h<l?h:l,d=n>s?n>r?n:r:s>r?s:r,f=o>h?o>l?o:l:h>l?h:l;let m=i.next;for(;m!==t;){if(m.x>=c&&m.x<=d&&m.y>=u&&m.y<=f&&an(n,o,s,h,r,l,m.x,m.y)&&ht(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function up(a,t,e,i){const n=a.prev,s=a,r=a.next;if(ht(n,s,r)>=0)return!1;const o=n.x,h=s.x,l=r.x,c=n.y,u=s.y,d=r.y,f=o<h?o<l?o:l:h<l?h:l,m=c<u?c<d?c:d:u<d?u:d,p=o>h?o>l?o:l:h>l?h:l,g=c>u?c>d?c:d:u>d?u:d,y=ia(f,m,t,e,i),b=ia(p,g,t,e,i);let _=a.prevZ,x=a.nextZ;for(;_&&_.z>=y&&x&&x.z<=b;){if(_.x>=f&&_.x<=p&&_.y>=m&&_.y<=g&&_!==n&&_!==r&&an(o,c,h,u,l,d,_.x,_.y)&&ht(_.prev,_,_.next)>=0||(_=_.prevZ,x.x>=f&&x.x<=p&&x.y>=m&&x.y<=g&&x!==n&&x!==r&&an(o,c,h,u,l,d,x.x,x.y)&&ht(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=p&&_.y>=m&&_.y<=g&&_!==n&&_!==r&&an(o,c,h,u,l,d,_.x,_.y)&&ht(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=b;){if(x.x>=f&&x.x<=p&&x.y>=m&&x.y<=g&&x!==n&&x!==r&&an(o,c,h,u,l,d,x.x,x.y)&&ht(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function dp(a,t,e){let i=a;do{const n=i.prev,s=i.next.next;!Nr(n,s)&&Fc(n,i,i.next,s)&&xs(n,s)&&xs(s,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),bs(i),bs(i.next),i=a=s),i=i.next}while(i!==a);return ki(i)}function fp(a,t,e,i,n,s){let r=a;do{let o=r.next.next;for(;o!==r.prev;){if(r.i!==o.i&&vp(r,o)){let h=Dc(r,o);r=ki(r,r.next),h=ki(h,h.next),_s(r,t,e,i,n,s,0),_s(h,t,e,i,n,s,0);return}o=o.next}r=r.next}while(r!==a)}function pp(a,t,e,i){const n=[];let s,r,o,h,l;for(s=0,r=t.length;s<r;s++)o=t[s]*i,h=s<r-1?t[s+1]*i:a.length,l=Nc(a,o,h,i,!1),l===l.next&&(l.steiner=!0),n.push(wp(l));for(n.sort(mp),s=0;s<n.length;s++)e=gp(n[s],e);return e}function mp(a,t){return a.x-t.x}function gp(a,t){const e=yp(a,t);if(!e)return t;const i=Dc(e,a);return ki(i,i.next),ki(e,e.next)}function yp(a,t){let e=t,i=-1/0,n;const s=a.x,r=a.y;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){const d=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(d<=s&&d>i&&(i=d,n=e.x<e.next.x?e:e.next,d===s))return n}e=e.next}while(e!==t);if(!n)return null;const o=n,h=n.x,l=n.y;let c=1/0,u;e=n;do s>=e.x&&e.x>=h&&s!==e.x&&an(r<l?s:i,r,h,l,r<l?i:s,r,e.x,e.y)&&(u=Math.abs(r-e.y)/(s-e.x),xs(e,a)&&(u<c||u===c&&(e.x>n.x||e.x===n.x&&_p(n,e)))&&(n=e,c=u)),e=e.next;while(e!==o);return n}function _p(a,t){return ht(a.prev,a,t.prev)<0&&ht(t.next,a,a.next)<0}function xp(a,t,e,i){let n=a;do n.z===0&&(n.z=ia(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==a);n.prevZ.nextZ=null,n.prevZ=null,bp(n)}function bp(a){let t,e,i,n,s,r,o,h,l=1;do{for(e=a,a=null,s=null,r=0;e;){for(r++,i=e,o=0,t=0;t<l&&(o++,i=i.nextZ,!!i);t++);for(h=l;o>0||h>0&&i;)o!==0&&(h===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,o--):(n=i,i=i.nextZ,h--),s?s.nextZ=n:a=n,n.prevZ=s,s=n;e=i}s.nextZ=null,l*=2}while(r>1);return a}function ia(a,t,e,i,n){return a=(a-e)*n|0,t=(t-i)*n|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,a|t<<1}function wp(a){let t=a,e=a;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==a);return e}function an(a,t,e,i,n,s,r,o){return(n-r)*(t-o)>=(a-r)*(s-o)&&(a-r)*(i-o)>=(e-r)*(t-o)&&(e-r)*(s-o)>=(n-r)*(i-o)}function vp(a,t){return a.next.i!==t.i&&a.prev.i!==t.i&&!Mp(a,t)&&(xs(a,t)&&xs(t,a)&&Tp(a,t)&&(ht(a.prev,a,t.prev)||ht(a,t.prev,t))||Nr(a,t)&&ht(a.prev,a,a.next)>0&&ht(t.prev,t,t.next)>0)}function ht(a,t,e){return(t.y-a.y)*(e.x-t.x)-(t.x-a.x)*(e.y-t.y)}function Nr(a,t){return a.x===t.x&&a.y===t.y}function Fc(a,t,e,i){const n=ir(ht(a,t,e)),s=ir(ht(a,t,i)),r=ir(ht(e,i,a)),o=ir(ht(e,i,t));return!!(n!==s&&r!==o||n===0&&er(a,e,t)||s===0&&er(a,i,t)||r===0&&er(e,a,i)||o===0&&er(e,t,i))}function er(a,t,e){return t.x<=Math.max(a.x,e.x)&&t.x>=Math.min(a.x,e.x)&&t.y<=Math.max(a.y,e.y)&&t.y>=Math.min(a.y,e.y)}function ir(a){return a>0?1:a<0?-1:0}function Mp(a,t){let e=a;do{if(e.i!==a.i&&e.next.i!==a.i&&e.i!==t.i&&e.next.i!==t.i&&Fc(e,e.next,a,t))return!0;e=e.next}while(e!==a);return!1}function xs(a,t){return ht(a.prev,a,a.next)<0?ht(a,t,a.next)>=0&&ht(a,a.prev,t)>=0:ht(a,t,a.prev)<0||ht(a,a.next,t)<0}function Tp(a,t){let e=a,i=!1;const n=(a.x+t.x)/2,s=(a.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==a);return i}function Dc(a,t){const e=new na(a.i,a.x,a.y),i=new na(t.i,t.x,t.y),n=a.next,s=t.prev;return a.next=t,t.prev=a,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function $h(a,t,e,i){const n=new na(a,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function bs(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function na(a,t,e){this.i=a,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sp(a,t,e,i){let n=0;for(let s=t,r=e-i;s<e;s+=i)n+=(a[r]-a[s])*(a[s+1]+a[r+1]),r=s;return n}class un{static area(t){const e=t.length;let i=0;for(let n=e-1,s=0;s<e;n=s++)i+=t[n].x*t[s].y-t[s].x*t[n].y;return i*.5}static isClockWise(t){return un.area(t)<0}static triangulateShape(t,e){const i=[],n=[],s=[];Qh(t),tl(i,t);let r=t.length;e.forEach(Qh);for(let h=0;h<e.length;h++)n.push(r),r+=e[h].length,tl(i,e[h]);const o=lp.triangulate(i,n);for(let h=0;h<o.length;h+=3)s.push(o.slice(h,h+3));return s}}function Qh(a){const t=a.length;t>2&&a[t-1].equals(a[0])&&a.pop()}function tl(a,t){for(let e=0;e<t.length;e++)a.push(t[e].x),a.push(t[e].y)}class Ba extends di{constructor(t=new ur([new z(.5,.5),new z(-.5,.5),new z(-.5,-.5),new z(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,n=[],s=[];for(let o=0,h=t.length;o<h;o++){const l=t[o];r(l)}this.setAttribute("position",new ys(n,3)),this.setAttribute("uv",new ys(s,2)),this.computeVertexNormals();function r(o){const h=[],l=e.curveSegments!==void 0?e.curveSegments:12,c=e.steps!==void 0?e.steps:1,u=e.depth!==void 0?e.depth:1;let d=e.bevelEnabled!==void 0?e.bevelEnabled:!0,f=e.bevelThickness!==void 0?e.bevelThickness:.2,m=e.bevelSize!==void 0?e.bevelSize:f-.1,p=e.bevelOffset!==void 0?e.bevelOffset:0,g=e.bevelSegments!==void 0?e.bevelSegments:3;const y=e.extrudePath,b=e.UVGenerator!==void 0?e.UVGenerator:Ap;let _,x=!1,w,A,T,E;y&&(_=y.getSpacedPoints(c),x=!0,d=!1,w=y.computeFrenetFrames(c,!1),A=new v,T=new v,E=new v),d||(g=0,f=0,m=0,p=0);const C=o.extractPoints(l);let O=C.shape;const P=C.holes;if(!un.isClockWise(O)){O=O.reverse();for(let R=0,L=P.length;R<L;R++){const I=P[R];un.isClockWise(I)&&(P[R]=I.reverse())}}const N=un.triangulateShape(O,P),U=O;for(let R=0,L=P.length;R<L;R++){const I=P[R];O=O.concat(I)}function D(R,L,I){return L||console.error("THREE.ExtrudeGeometry: vec does not exist"),L.clone().multiplyScalar(I).add(R)}const W=O.length,Y=N.length;function Q(R,L,I){let H,F,K;const Z=R.x-L.x,rt=R.y-L.y,wt=I.x-R.x,pt=I.y-R.y,pi=Z*Z+rt*rt,En=Z*pt-rt*wt;if(Math.abs(En)>Number.EPSILON){const ee=Math.sqrt(pi),ks=Math.sqrt(wt*wt+pt*pt),Cn=L.x-rt/ee,kn=L.y+Z/ee,On=I.x-pt/ks,M=I.y+wt/ks,B=((On-Cn)*pt-(M-kn)*wt)/(Z*pt-rt*wt);H=Cn+Z*B-R.x,F=kn+rt*B-R.y;const ut=H*H+F*F;if(ut<=2)return new z(H,F);K=Math.sqrt(ut/2)}else{let ee=!1;Z>Number.EPSILON?wt>Number.EPSILON&&(ee=!0):Z<-Number.EPSILON?wt<-Number.EPSILON&&(ee=!0):Math.sign(rt)===Math.sign(pt)&&(ee=!0),ee?(H=-rt,F=Z,K=Math.sqrt(pi)):(H=Z,F=rt,K=Math.sqrt(pi/2))}return new z(H/K,F/K)}const yt=[];for(let R=0,L=U.length,I=L-1,H=R+1;R<L;R++,I++,H++)I===L&&(I=0),H===L&&(H=0),yt[R]=Q(U[R],U[I],U[H]);const bt=[];let ct,It=yt.concat();for(let R=0,L=P.length;R<L;R++){const I=P[R];ct=[];for(let H=0,F=I.length,K=F-1,Z=H+1;H<F;H++,K++,Z++)K===F&&(K=0),Z===F&&(Z=0),ct[H]=Q(I[H],I[K],I[Z]);bt.push(ct),It=It.concat(ct)}for(let R=0;R<g;R++){const L=R/g,I=f*Math.cos(L*Math.PI/2),H=m*Math.sin(L*Math.PI/2)+p;for(let F=0,K=U.length;F<K;F++){const Z=D(U[F],yt[F],H);fe(Z.x,Z.y,-I)}for(let F=0,K=P.length;F<K;F++){const Z=P[F];ct=bt[F];for(let rt=0,wt=Z.length;rt<wt;rt++){const pt=D(Z[rt],ct[rt],H);fe(pt.x,pt.y,-I)}}}const fi=m+p;for(let R=0;R<W;R++){const L=d?D(O[R],It[R],fi):O[R];x?(T.copy(w.normals[0]).multiplyScalar(L.x),A.copy(w.binormals[0]).multiplyScalar(L.y),E.copy(_[0]).add(T).add(A),fe(E.x,E.y,E.z)):fe(L.x,L.y,0)}for(let R=1;R<=c;R++)for(let L=0;L<W;L++){const I=d?D(O[L],It[L],fi):O[L];x?(T.copy(w.normals[R]).multiplyScalar(I.x),A.copy(w.binormals[R]).multiplyScalar(I.y),E.copy(_[R]).add(T).add(A),fe(E.x,E.y,E.z)):fe(I.x,I.y,u/c*R)}for(let R=g-1;R>=0;R--){const L=R/g,I=f*Math.cos(L*Math.PI/2),H=m*Math.sin(L*Math.PI/2)+p;for(let F=0,K=U.length;F<K;F++){const Z=D(U[F],yt[F],H);fe(Z.x,Z.y,u+I)}for(let F=0,K=P.length;F<K;F++){const Z=P[F];ct=bt[F];for(let rt=0,wt=Z.length;rt<wt;rt++){const pt=D(Z[rt],ct[rt],H);x?fe(pt.x,pt.y+_[c-1].y,_[c-1].x+I):fe(pt.x,pt.y,u+I)}}}Nt(),$t();function Nt(){const R=n.length/3;if(d){let L=0,I=W*L;for(let H=0;H<Y;H++){const F=N[H];Fi(F[2]+I,F[1]+I,F[0]+I)}L=c+g*2,I=W*L;for(let H=0;H<Y;H++){const F=N[H];Fi(F[0]+I,F[1]+I,F[2]+I)}}else{for(let L=0;L<Y;L++){const I=N[L];Fi(I[2],I[1],I[0])}for(let L=0;L<Y;L++){const I=N[L];Fi(I[0]+W*c,I[1]+W*c,I[2]+W*c)}}i.addGroup(R,n.length/3-R,0)}function $t(){const R=n.length/3;let L=0;An(U,L),L+=U.length;for(let I=0,H=P.length;I<H;I++){const F=P[I];An(F,L),L+=F.length}i.addGroup(R,n.length/3-R,1)}function An(R,L){let I=R.length;for(;--I>=0;){const H=I;let F=I-1;F<0&&(F=R.length-1);for(let K=0,Z=c+g*2;K<Z;K++){const rt=W*K,wt=W*(K+1),pt=L+H+rt,pi=L+F+rt,En=L+F+wt,ee=L+H+wt;Cs(pt,pi,En,ee)}}}function fe(R,L,I){h.push(R),h.push(L),h.push(I)}function Fi(R,L,I){Qt(R),Qt(L),Qt(I);const H=n.length/3,F=b.generateTopUV(i,n,H-3,H-2,H-1);te(F[0]),te(F[1]),te(F[2])}function Cs(R,L,I,H){Qt(R),Qt(L),Qt(H),Qt(L),Qt(I),Qt(H);const F=n.length/3,K=b.generateSideWallUV(i,n,F-6,F-3,F-2,F-1);te(K[0]),te(K[1]),te(K[3]),te(K[1]),te(K[2]),te(K[3])}function Qt(R){n.push(h[R*3+0]),n.push(h[R*3+1]),n.push(h[R*3+2])}function te(R){s.push(R.x),s.push(R.y)}}}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return Ep(e,i,t)}static fromJSON(t,e){const i=[];for(let s=0,r=t.shapes.length;s<r;s++){const o=e[t.shapes[s]];i.push(o)}const n=t.options.extrudePath;return n!==void 0&&(t.options.extrudePath=new Ic[n.type]().fromJSON(n)),new Ba(i,t.options)}}const Ap={generateTopUV:function(a,t,e,i,n){const s=t[e*3],r=t[e*3+1],o=t[i*3],h=t[i*3+1],l=t[n*3],c=t[n*3+1];return[new z(s,r),new z(o,h),new z(l,c)]},generateSideWallUV:function(a,t,e,i,n,s){const r=t[e*3],o=t[e*3+1],h=t[e*3+2],l=t[i*3],c=t[i*3+1],u=t[i*3+2],d=t[n*3],f=t[n*3+1],m=t[n*3+2],p=t[s*3],g=t[s*3+1],y=t[s*3+2];return Math.abs(o-c)<Math.abs(r-l)?[new z(r,1-h),new z(l,1-u),new z(d,1-m),new z(p,1-y)]:[new z(o,1-h),new z(c,1-u),new z(f,1-m),new z(g,1-y)]}};function Ep(a,t,e){if(e.shapes=[],Array.isArray(a))for(let i=0,n=a.length;i<n;i++){const s=a[i];e.shapes.push(s.uuid)}else e.shapes.push(a.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class Va extends Ei{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new St(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ef,this.normalScale=new z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Li extends Va{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new St(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new St(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new St(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function Je(a,t,e){return Bc(a)?new a.constructor(a.subarray(t,e!==void 0?e:a.length)):a.slice(t,e)}function nr(a,t,e){return!a||!e&&a.constructor===t?a:typeof t.BYTES_PER_ELEMENT=="number"?new t(a):Array.prototype.slice.call(a)}function Bc(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Cp(a){function t(n,s){return a[n]-a[s]}const e=a.length,i=new Array(e);for(let n=0;n!==e;++n)i[n]=n;return i.sort(t),i}function el(a,t,e){const i=a.length,n=new a.constructor(i);for(let s=0,r=0;r!==i;++s){const o=e[s]*t;for(let h=0;h!==t;++h)n[r++]=a[o+h]}return n}function Vc(a,t,e,i){let n=1,s=a[0];for(;s!==void 0&&s[i]===void 0;)s=a[n++];if(s===void 0)return;let r=s[i];if(r!==void 0)if(Array.isArray(r))do r=s[i],r!==void 0&&(t.push(s.time),e.push.apply(e,r)),s=a[n++];while(s!==void 0);else if(r.toArray!==void 0)do r=s[i],r!==void 0&&(t.push(s.time),r.toArray(e,e.length)),s=a[n++];while(s!==void 0);else do r=s[i],r!==void 0&&(t.push(s.time),e.push(r)),s=a[n++];while(s!==void 0)}class Es{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,n=e[i],s=e[i-1];i:{t:{let r;e:{n:if(!(t<n)){for(let o=i+2;;){if(n===void 0){if(t<s)break n;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=n,n=e[++i],t<n)break t}r=e.length;break e}if(!(t>=s)){const o=e[1];t<o&&(i=2,s=o);for(let h=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(n=s,s=e[--i-1],t>=s)break t}r=i,i=0;break e}break i}for(;i<r;){const o=i+r>>>1;t<e[o]?r=o:i=o+1}if(n=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,n)}return this.interpolate_(i,s,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=t*n;for(let r=0;r!==n;++r)e[r]=i[s+r];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kp extends Es{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:vh,endingEnd:vh}}intervalChanged_(t,e,i){const n=this.parameterPositions;let s=t-2,r=t+1,o=n[s],h=n[r];if(o===void 0)switch(this.getSettings_().endingStart){case Mh:s=t,o=2*e-i;break;case Th:s=n.length-2,o=e+n[s]-n[s+1];break;default:s=t,o=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Mh:r=t,h=2*i-e;break;case Th:r=1,h=i+n[1]-n[0];break;default:r=t-1,h=e}const l=(i-e)*.5,c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(h-i),this._offsetPrev=s*c,this._offsetNext=r*c}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,h=t*o,l=h-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,m=(i-e)/(n-e),p=m*m,g=p*m,y=-d*g+2*d*p-d*m,b=(1+d)*g+(-1.5-2*d)*p+(-.5+d)*m+1,_=(-1-f)*g+(1.5+f)*p+.5*m,x=f*g-f*p;for(let w=0;w!==o;++w)s[w]=y*r[c+w]+b*r[l+w]+_*r[h+w]+x*r[u+w];return s}}class Op extends Es{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,h=t*o,l=h-o,c=(i-e)/(n-e),u=1-c;for(let d=0;d!==o;++d)s[d]=r[l+d]*u+r[h+d]*c;return s}}class Pp extends Es{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}}class ke{constructor(t,e,i,n){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=nr(e,this.TimeBufferType),this.values=nr(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:nr(t.times,Array),values:nr(t.values,Array)};const n=t.getInterpolation();n!==t.DefaultInterpolation&&(i.interpolation=n)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Pp(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Op(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new kp(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case ps:e=this.InterpolantFactoryMethodDiscrete;break;case bn:e=this.InterpolantFactoryMethodLinear;break;case Xr:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ps;case this.InterpolantFactoryMethodLinear:return bn;case this.InterpolantFactoryMethodSmooth:return Xr}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const i=this.times,n=i.length;let s=0,r=n-1;for(;s!==n&&i[s]<t;)++s;for(;r!==-1&&i[r]>e;)--r;if(++r,s!==0||r!==n){s>=r&&(r=Math.max(r,1),s=r-1);const o=this.getValueSize();this.times=Je(i,s,r),this.values=Je(this.values,s*o,r*o)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let o=0;o!==s;o++){const h=i[o];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,h),t=!1;break}if(r!==null&&r>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,h,r),t=!1;break}r=h}if(n!==void 0&&Bc(n))for(let o=0,h=n.length;o!==h;++o){const l=n[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),t=!1;break}}return t}optimize(){const t=Je(this.times),e=Je(this.values),i=this.getValueSize(),n=this.getInterpolation()===Xr,s=t.length-1;let r=1;for(let o=1;o<s;++o){let h=!1;const l=t[o],c=t[o+1];if(l!==c&&(o!==1||l!==t[0]))if(n)h=!0;else{const u=o*i,d=u-i,f=u+i;for(let m=0;m!==i;++m){const p=e[u+m];if(p!==e[d+m]||p!==e[f+m]){h=!0;break}}}if(h){if(o!==r){t[r]=t[o];const u=o*i,d=r*i;for(let f=0;f!==i;++f)e[d+f]=e[u+f]}++r}}if(s>0){t[r]=t[s];for(let o=s*i,h=r*i,l=0;l!==i;++l)e[h+l]=e[o+l];++r}return r!==t.length?(this.times=Je(t,0,r),this.values=Je(e,0,r*i)):(this.times=t,this.values=e),this}clone(){const t=Je(this.times,0),e=Je(this.values,0),i=this.constructor,n=new i(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}ke.prototype.TimeBufferType=Float32Array;ke.prototype.ValueBufferType=Float32Array;ke.prototype.DefaultInterpolation=bn;class Tn extends ke{}Tn.prototype.ValueTypeName="bool";Tn.prototype.ValueBufferType=Array;Tn.prototype.DefaultInterpolation=ps;Tn.prototype.InterpolantFactoryMethodLinear=void 0;Tn.prototype.InterpolantFactoryMethodSmooth=void 0;class Uc extends ke{}Uc.prototype.ValueTypeName="color";class ws extends ke{}ws.prototype.ValueTypeName="number";class Rp extends Es{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,h=(i-e)/(n-e);let l=t*o;for(let c=l+o;l!==c;l+=4)Ee.slerpFlat(s,0,r,l-o,r,l,h);return s}}class Oi extends ke{InterpolantFactoryMethodLinear(t){return new Rp(this.times,this.values,this.getValueSize(),t)}}Oi.prototype.ValueTypeName="quaternion";Oi.prototype.DefaultInterpolation=bn;Oi.prototype.InterpolantFactoryMethodSmooth=void 0;class Sn extends ke{}Sn.prototype.ValueTypeName="string";Sn.prototype.ValueBufferType=Array;Sn.prototype.DefaultInterpolation=ps;Sn.prototype.InterpolantFactoryMethodLinear=void 0;Sn.prototype.InterpolantFactoryMethodSmooth=void 0;class vs extends ke{}vs.prototype.ValueTypeName="vector";class zp{constructor(t,e=-1,i,n=$d){this.name=t,this.tracks=i,this.duration=e,this.blendMode=n,this.uuid=ce(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,n=1/(t.fps||1);for(let r=0,o=i.length;r!==o;++r)e.push(Ip(i[r]).scale(n));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,r=i.length;s!==r;++s)e.push(ke.toJSON(i[s]));return n}static CreateFromMorphTargetSequence(t,e,i,n){const s=e.length,r=[];for(let o=0;o<s;o++){let h=[],l=[];h.push((o+s-1)%s,o,(o+1)%s),l.push(0,1,0);const c=Cp(h);h=el(h,1,c),l=el(l,1,c),!n&&h[0]===0&&(h.push(s),l.push(l[0])),r.push(new ws(".morphTargetInfluences["+e[o].name+"]",h,l).scale(1/i))}return new this(t,-1,r)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const n=t;i=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<i.length;n++)if(i[n].name===e)return i[n];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const n={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,h=t.length;o<h;o++){const l=t[o],c=l.name.match(s);if(c&&c.length>1){const u=c[1];let d=n[u];d||(n[u]=d=[]),d.push(l)}}const r=[];for(const o in n)r.push(this.CreateFromMorphTargetSequence(o,n[o],e,i));return r}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,d,f,m,p){if(f.length!==0){const g=[],y=[];Vc(f,g,y,m),g.length!==0&&p.push(new u(d,g,y))}},n=[],s=t.name||"default",r=t.fps||30,o=t.blendMode;let h=t.length||-1;const l=t.hierarchy||[];for(let u=0;u<l.length;u++){const d=l[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let p=0;p<d[m].morphTargets.length;p++)f[d[m].morphTargets[p]]=-1;for(const p in f){const g=[],y=[];for(let b=0;b!==d[m].morphTargets.length;++b){const _=d[m];g.push(_.time),y.push(_.morphTarget===p?1:0)}n.push(new ws(".morphTargetInfluence["+p+"]",g,y))}h=f.length*r}else{const f=".bones["+e[u].name+"]";i(vs,f+".position",d,"pos",n),i(Oi,f+".quaternion",d,"rot",n),i(vs,f+".scale",d,"scl",n)}}return n.length===0?null:new this(s,h,n,o)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,n=t.length;i!==n;++i){const s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Lp(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ws;case"vector":case"vector2":case"vector3":case"vector4":return vs;case"color":return Uc;case"quaternion":return Oi;case"bool":case"boolean":return Tn;case"string":return Sn}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function Ip(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Lp(a.type);if(a.times===void 0){const e=[],i=[];Vc(a.keys,e,i,"value"),a.times=e,a.values=i}return t.parse!==void 0?t.parse(a):new t(a.name,a.times,a.values,a.interpolation)}const wn={enabled:!1,files:{},add:function(a,t){this.enabled!==!1&&(this.files[a]=t)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class Np{constructor(t,e,i){const n=this;let s=!1,r=0,o=0,h;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(c){o++,s===!1&&n.onStart!==void 0&&n.onStart(c,r,o),s=!0},this.itemEnd=function(c){r++,n.onProgress!==void 0&&n.onProgress(c,r,o),r===o&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(c){n.onError!==void 0&&n.onError(c)},this.resolveURL=function(c){return h?h(c):c},this.setURLModifier=function(c){return h=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,d=l.length;u<d;u+=2){const f=l[u],m=l[u+1];if(f.global&&(f.lastIndex=0),f.test(c))return m}return null}}}const Fp=new Np;class Ii{constructor(t){this.manager=t!==void 0?t:Fp,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(n,s){i.load(t,n,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Fe={};class Dp extends Error{constructor(t,e){super(t),this.response=e}}class Ms extends Ii{constructor(t){super(t)}load(t,e,i,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=wn.get(t);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(Fe[t]!==void 0){Fe[t].push({onLoad:e,onProgress:i,onError:n});return}Fe[t]=[],Fe[t].push({onLoad:e,onProgress:i,onError:n});const r=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,h=this.responseType;fetch(r).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const c=Fe[t],u=l.body.getReader(),d=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),f=d?parseInt(d):0,m=f!==0;let p=0;const g=new ReadableStream({start(y){b();function b(){u.read().then(({done:_,value:x})=>{if(_)y.close();else{p+=x.byteLength;const w=new ProgressEvent("progress",{lengthComputable:m,loaded:p,total:f});for(let A=0,T=c.length;A<T;A++){const E=c[A];E.onProgress&&E.onProgress(w)}y.enqueue(x),b()}})}}});return new Response(g)}else throw new Dp(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(h){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{const u=/charset="?([^;"\s]*)"?/i.exec(o),d=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(d);return l.arrayBuffer().then(m=>f.decode(m))}}}).then(l=>{wn.add(t,l);const c=Fe[t];delete Fe[t];for(let u=0,d=c.length;u<d;u++){const f=c[u];f.onLoad&&f.onLoad(l)}}).catch(l=>{const c=Fe[t];if(c===void 0)throw this.manager.itemError(t),l;delete Fe[t];for(let u=0,d=c.length;u<d;u++){const f=c[u];f.onError&&f.onError(l)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Bp extends Ii{constructor(t){super(t)}load(t,e,i,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=wn.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const o=Qo("img");function h(){c(),wn.add(t,this),e&&e(this),s.manager.itemEnd(t)}function l(u){c(),n&&n(u),s.manager.itemError(t),s.manager.itemEnd(t)}function c(){o.removeEventListener("load",h,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",h,!1),o.addEventListener("error",l,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(t),o.src=t,o}}class Vp extends Ii{constructor(t){super(t)}load(t,e,i,n){const s=new xe,r=new Bp(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(t,function(o){s.image=o,s.needsUpdate=!0,e!==void 0&&e(s)},i,n),s}}class Ua extends ft{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new St(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}const wo=new X,il=new v,nl=new v;class Ha{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z(512,512),this.map=null,this.mapPass=null,this.matrix=new X,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bf,this._frameExtents=new z(1,1),this._viewportCount=1,this._viewports=[new oe(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;il.setFromMatrixPosition(t.matrixWorld),e.position.copy(il),nl.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(nl),e.updateMatrixWorld(),wo.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wo),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(wo)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Up extends Ha{constructor(){super(new Ra(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=gs*2*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(i!==e.fov||n!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=n,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Hp extends Ua{constructor(t,e,i=0,n=Math.PI/3,s=0,r=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ft.DEFAULT_UP),this.updateMatrix(),this.target=new ft,this.distance=i,this.angle=n,this.penumbra=s,this.decay=r,this.map=null,this.shadow=new Up}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const sl=new X,Hn=new v,vo=new v;class jp extends Ha{constructor(){super(new Ra(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z(4,2),this._viewportCount=6,this._viewports=[new oe(2,1,1,1),new oe(0,1,1,1),new oe(3,1,1,1),new oe(1,1,1,1),new oe(3,0,1,1),new oe(1,0,1,1)],this._cubeDirections=[new v(1,0,0),new v(-1,0,0),new v(0,0,1),new v(0,0,-1),new v(0,1,0),new v(0,-1,0)],this._cubeUps=[new v(0,1,0),new v(0,1,0),new v(0,1,0),new v(0,1,0),new v(0,0,1),new v(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,n=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Hn.setFromMatrixPosition(t.matrixWorld),i.position.copy(Hn),vo.copy(i.position),vo.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(vo),i.updateMatrixWorld(),n.makeTranslation(-Hn.x,-Hn.y,-Hn.z),sl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sl)}}class Wp extends Ua{constructor(t,e,i=0,n=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new jp}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Gp extends Ha{constructor(){super(new Cc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qp extends Ua{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ft.DEFAULT_UP),this.updateMatrix(),this.target=new ft,this.shadow=new Gp}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class sa{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Xp extends Ii{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=wn.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(t,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){wn.add(t,h),e&&e(h),s.manager.itemEnd(t)}).catch(function(h){n&&n(h),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}}const ja="\\[\\]\\.:\\/",Yp=new RegExp("["+ja+"]","g"),Wa="[^"+ja+"]",Kp="[^"+ja.replace("\\.","")+"]",Jp=/((?:WC+[\/:])*)/.source.replace("WC",Wa),Zp=/(WCOD+)?/.source.replace("WCOD",Kp),$p=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wa),Qp=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wa),tm=new RegExp("^"+Jp+Zp+$p+Qp+"$"),em=["material","materials","bones","map"];class im{constructor(t,e,i){const n=i||$.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];n!==void 0&&n.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=i.length;n!==s;++n)i[n].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class ${constructor(t,e,i){this.path=e,this.parsedPath=i||$.parseTrackName(e),this.node=$.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new $.Composite(t,e,i):new $(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Yp,"")}static parseTrackName(t){const e=tm.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const s=i.nodeName.substring(n+1);em.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(s){for(let r=0;r<s.length;r++){const o=s[r];if(o.name===e||o.uuid===e)return o;const h=i(o.children);if(h)return h}return null},n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let s=e.propertyIndex;if(t||(t=$.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let l=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let c=0;c<t.length;c++)if(t[c].name===l){l=c;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(l!==void 0){if(t[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[l]}}const r=t[n];if(r===void 0){const l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+n+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(h=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$.Composite=im;$.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$.prototype.GetterByBindingType=[$.prototype._getValue_direct,$.prototype._getValue_array,$.prototype._getValue_arrayElement,$.prototype._getValue_toArray];$.prototype.SetterByBindingTypeAndVersioning=[[$.prototype._setValue_direct,$.prototype._setValue_direct_setNeedsUpdate,$.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$.prototype._setValue_array,$.prototype._setValue_array_setNeedsUpdate,$.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$.prototype._setValue_arrayElement,$.prototype._setValue_arrayElement_setNeedsUpdate,$.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$.prototype._setValue_fromArray,$.prototype._setValue_fromArray_setNeedsUpdate,$.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rl{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Mt(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class nm{constructor(){this.type="ShapePath",this.color=new St,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new ea,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this}bezierCurveTo(t,e,i,n,s,r){return this.currentPath.bezierCurveTo(t,e,i,n,s,r),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(y){const b=[];for(let _=0,x=y.length;_<x;_++){const w=y[_],A=new ur;A.curves=w.curves,b.push(A)}return b}function i(y,b){const _=b.length;let x=!1;for(let w=_-1,A=0;A<_;w=A++){let T=b[w],E=b[A],C=E.x-T.x,O=E.y-T.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(T=b[A],C=-C,E=b[w],O=-O),y.y<T.y||y.y>E.y)continue;if(y.y===T.y){if(y.x===T.x)return!0}else{const P=O*(y.x-T.x)-C*(y.y-T.y);if(P===0)return!0;if(P<0)continue;x=!x}}else{if(y.y!==T.y)continue;if(E.x<=y.x&&y.x<=T.x||T.x<=y.x&&y.x<=E.x)return!0}}return x}const n=un.isClockWise,s=this.subPaths;if(s.length===0)return[];let r,o,h;const l=[];if(s.length===1)return o=s[0],h=new ur,h.curves=o.curves,l.push(h),l;let c=!n(s[0].getPoints());c=t?!c:c;const u=[],d=[];let f=[],m=0,p;d[m]=void 0,f[m]=[];for(let y=0,b=s.length;y<b;y++)o=s[y],p=o.getPoints(),r=n(p),r=t?!r:r,r?(!c&&d[m]&&m++,d[m]={s:new ur,p},d[m].s.curves=o.curves,c&&m++,f[m]=[]):f[m].push({h:o,p:p[0]});if(!d[0])return e(s);if(d.length>1){let y=!1,b=0;for(let _=0,x=d.length;_<x;_++)u[_]=[];for(let _=0,x=d.length;_<x;_++){const w=f[_];for(let A=0;A<w.length;A++){const T=w[A];let E=!0;for(let C=0;C<d.length;C++)i(T.p,d[C].p)&&(_!==C&&b++,E?(E=!1,u[C].push(T)):y=!0);E&&u[_].push(T)}}b>0&&y===!1&&(f=u)}let g;for(let y=0,b=d.length;y<b;y++){h=d[y].s,l.push(h),g=f[y];for(let _=0,x=g.length;_<x;_++)h.holes.push(g[_].h)}return l}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wc}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wc);const ol={type:"change"},Mo={type:"start"},al={type:"end"};class sm extends As{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new v,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Vi.ROTATE,MIDDLE:Vi.DOLLY,RIGHT:Vi.PAN},this.touches={ONE:Ui.ROTATE,TWO:Ui.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(M){M.addEventListener("keydown",pt),this._domElementKeyEvents=M},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(ol),i.update(),s=n.NONE},this.update=function(){const M=new v,B=new Ee().setFromUnitVectors(t.up,new v(0,1,0)),ut=B.clone().invert(),Et=new v,pe=new Ee,Di=2*Math.PI;return function(){const Xa=i.object.position;M.copy(Xa).sub(i.target),M.applyQuaternion(B),o.setFromVector3(M),i.autoRotate&&s===n.NONE&&C(T()),i.enableDamping?(o.theta+=h.theta*i.dampingFactor,o.phi+=h.phi*i.dampingFactor):(o.theta+=h.theta,o.phi+=h.phi);let Oe=i.minAzimuthAngle,Pe=i.maxAzimuthAngle;return isFinite(Oe)&&isFinite(Pe)&&(Oe<-Math.PI?Oe+=Di:Oe>Math.PI&&(Oe-=Di),Pe<-Math.PI?Pe+=Di:Pe>Math.PI&&(Pe-=Di),Oe<=Pe?o.theta=Math.max(Oe,Math.min(Pe,o.theta)):o.theta=o.theta>(Oe+Pe)/2?Math.max(Oe,o.theta):Math.min(Pe,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=l,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),i.enableDamping===!0?i.target.addScaledVector(c,i.dampingFactor):i.target.add(c),M.setFromSpherical(o),M.applyQuaternion(ut),Xa.copy(i.target).add(M),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,c.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),c.set(0,0,0)),l=1,u||Et.distanceToSquared(i.object.position)>r||8*(1-pe.dot(i.object.quaternion))>r?(i.dispatchEvent(ol),Et.copy(i.object.position),pe.copy(i.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ee),i.domElement.removeEventListener("pointerdown",I),i.domElement.removeEventListener("pointercancel",K),i.domElement.removeEventListener("wheel",wt),i.domElement.removeEventListener("pointermove",H),i.domElement.removeEventListener("pointerup",F),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",pt)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const r=1e-6,o=new rl,h=new rl;let l=1;const c=new v;let u=!1;const d=new z,f=new z,m=new z,p=new z,g=new z,y=new z,b=new z,_=new z,x=new z,w=[],A={};function T(){return 2*Math.PI/60/60*i.autoRotateSpeed}function E(){return Math.pow(.95,i.zoomSpeed)}function C(M){h.theta-=M}function O(M){h.phi-=M}const P=function(){const M=new v;return function(ut,Et){M.setFromMatrixColumn(Et,0),M.multiplyScalar(-ut),c.add(M)}}(),V=function(){const M=new v;return function(ut,Et){i.screenSpacePanning===!0?M.setFromMatrixColumn(Et,1):(M.setFromMatrixColumn(Et,0),M.crossVectors(i.object.up,M)),M.multiplyScalar(ut),c.add(M)}}(),N=function(){const M=new v;return function(ut,Et){const pe=i.domElement;if(i.object.isPerspectiveCamera){const Di=i.object.position;M.copy(Di).sub(i.target);let Os=M.length();Os*=Math.tan(i.object.fov/2*Math.PI/180),P(2*ut*Os/pe.clientHeight,i.object.matrix),V(2*Et*Os/pe.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(P(ut*(i.object.right-i.object.left)/i.object.zoom/pe.clientWidth,i.object.matrix),V(Et*(i.object.top-i.object.bottom)/i.object.zoom/pe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function U(M){i.object.isPerspectiveCamera?l/=M:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*M)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function D(M){i.object.isPerspectiveCamera?l*=M:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/M)),i.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(M){d.set(M.clientX,M.clientY)}function Y(M){b.set(M.clientX,M.clientY)}function Q(M){p.set(M.clientX,M.clientY)}function yt(M){f.set(M.clientX,M.clientY),m.subVectors(f,d).multiplyScalar(i.rotateSpeed);const B=i.domElement;C(2*Math.PI*m.x/B.clientHeight),O(2*Math.PI*m.y/B.clientHeight),d.copy(f),i.update()}function bt(M){_.set(M.clientX,M.clientY),x.subVectors(_,b),x.y>0?U(E()):x.y<0&&D(E()),b.copy(_),i.update()}function ct(M){g.set(M.clientX,M.clientY),y.subVectors(g,p).multiplyScalar(i.panSpeed),N(y.x,y.y),p.copy(g),i.update()}function It(M){M.deltaY<0?D(E()):M.deltaY>0&&U(E()),i.update()}function fi(M){let B=!1;switch(M.code){case i.keys.UP:M.ctrlKey||M.metaKey||M.shiftKey?O(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):N(0,i.keyPanSpeed),B=!0;break;case i.keys.BOTTOM:M.ctrlKey||M.metaKey||M.shiftKey?O(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):N(0,-i.keyPanSpeed),B=!0;break;case i.keys.LEFT:M.ctrlKey||M.metaKey||M.shiftKey?C(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):N(i.keyPanSpeed,0),B=!0;break;case i.keys.RIGHT:M.ctrlKey||M.metaKey||M.shiftKey?C(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):N(-i.keyPanSpeed,0),B=!0;break}B&&(M.preventDefault(),i.update())}function Nt(){if(w.length===1)d.set(w[0].pageX,w[0].pageY);else{const M=.5*(w[0].pageX+w[1].pageX),B=.5*(w[0].pageY+w[1].pageY);d.set(M,B)}}function $t(){if(w.length===1)p.set(w[0].pageX,w[0].pageY);else{const M=.5*(w[0].pageX+w[1].pageX),B=.5*(w[0].pageY+w[1].pageY);p.set(M,B)}}function An(){const M=w[0].pageX-w[1].pageX,B=w[0].pageY-w[1].pageY,ut=Math.sqrt(M*M+B*B);b.set(0,ut)}function fe(){i.enableZoom&&An(),i.enablePan&&$t()}function Fi(){i.enableZoom&&An(),i.enableRotate&&Nt()}function Cs(M){if(w.length==1)f.set(M.pageX,M.pageY);else{const ut=On(M),Et=.5*(M.pageX+ut.x),pe=.5*(M.pageY+ut.y);f.set(Et,pe)}m.subVectors(f,d).multiplyScalar(i.rotateSpeed);const B=i.domElement;C(2*Math.PI*m.x/B.clientHeight),O(2*Math.PI*m.y/B.clientHeight),d.copy(f)}function Qt(M){if(w.length===1)g.set(M.pageX,M.pageY);else{const B=On(M),ut=.5*(M.pageX+B.x),Et=.5*(M.pageY+B.y);g.set(ut,Et)}y.subVectors(g,p).multiplyScalar(i.panSpeed),N(y.x,y.y),p.copy(g)}function te(M){const B=On(M),ut=M.pageX-B.x,Et=M.pageY-B.y,pe=Math.sqrt(ut*ut+Et*Et);_.set(0,pe),x.set(0,Math.pow(_.y/b.y,i.zoomSpeed)),U(x.y),b.copy(_)}function R(M){i.enableZoom&&te(M),i.enablePan&&Qt(M)}function L(M){i.enableZoom&&te(M),i.enableRotate&&Cs(M)}function I(M){i.enabled!==!1&&(w.length===0&&(i.domElement.setPointerCapture(M.pointerId),i.domElement.addEventListener("pointermove",H),i.domElement.addEventListener("pointerup",F)),ks(M),M.pointerType==="touch"?pi(M):Z(M))}function H(M){i.enabled!==!1&&(M.pointerType==="touch"?En(M):rt(M))}function F(M){Cn(M),w.length===0&&(i.domElement.releasePointerCapture(M.pointerId),i.domElement.removeEventListener("pointermove",H),i.domElement.removeEventListener("pointerup",F)),i.dispatchEvent(al),s=n.NONE}function K(M){Cn(M)}function Z(M){let B;switch(M.button){case 0:B=i.mouseButtons.LEFT;break;case 1:B=i.mouseButtons.MIDDLE;break;case 2:B=i.mouseButtons.RIGHT;break;default:B=-1}switch(B){case Vi.DOLLY:if(i.enableZoom===!1)return;Y(M),s=n.DOLLY;break;case Vi.ROTATE:if(M.ctrlKey||M.metaKey||M.shiftKey){if(i.enablePan===!1)return;Q(M),s=n.PAN}else{if(i.enableRotate===!1)return;W(M),s=n.ROTATE}break;case Vi.PAN:if(M.ctrlKey||M.metaKey||M.shiftKey){if(i.enableRotate===!1)return;W(M),s=n.ROTATE}else{if(i.enablePan===!1)return;Q(M),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(Mo)}function rt(M){switch(s){case n.ROTATE:if(i.enableRotate===!1)return;yt(M);break;case n.DOLLY:if(i.enableZoom===!1)return;bt(M);break;case n.PAN:if(i.enablePan===!1)return;ct(M);break}}function wt(M){i.enabled===!1||i.enableZoom===!1||s!==n.NONE||(M.preventDefault(),i.dispatchEvent(Mo),It(M),i.dispatchEvent(al))}function pt(M){i.enabled===!1||i.enablePan===!1||fi(M)}function pi(M){switch(kn(M),w.length){case 1:switch(i.touches.ONE){case Ui.ROTATE:if(i.enableRotate===!1)return;Nt(),s=n.TOUCH_ROTATE;break;case Ui.PAN:if(i.enablePan===!1)return;$t(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(i.touches.TWO){case Ui.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;fe(),s=n.TOUCH_DOLLY_PAN;break;case Ui.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Fi(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(Mo)}function En(M){switch(kn(M),s){case n.TOUCH_ROTATE:if(i.enableRotate===!1)return;Cs(M),i.update();break;case n.TOUCH_PAN:if(i.enablePan===!1)return;Qt(M),i.update();break;case n.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;R(M),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;L(M),i.update();break;default:s=n.NONE}}function ee(M){i.enabled!==!1&&M.preventDefault()}function ks(M){w.push(M)}function Cn(M){delete A[M.pointerId];for(let B=0;B<w.length;B++)if(w[B].pointerId==M.pointerId){w.splice(B,1);return}}function kn(M){let B=A[M.pointerId];B===void 0&&(B=new z,A[M.pointerId]=B),B.set(M.pageX,M.pageY)}function On(M){const B=M.pointerId===w[0].pointerId?w[1]:w[0];return A[B.pointerId]}i.domElement.addEventListener("contextmenu",ee),i.domElement.addEventListener("pointerdown",I),i.domElement.addEventListener("pointercancel",K),i.domElement.addEventListener("wheel",wt,{passive:!1}),this.update()}}function hl(a,t){if(t===Qd)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(t===Jo||t===Tc){let e=a.getIndex();if(e===null){const r=[],o=a.getAttribute("position");if(o!==void 0){for(let h=0;h<o.count;h++)r.push(h);a.setIndex(r),e=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const i=e.count-2,n=[];if(t===Jo)for(let r=1;r<=i;r++)n.push(e.getX(0)),n.push(e.getX(r)),n.push(e.getX(r+1));else for(let r=0;r<i;r++)r%2===0?(n.push(e.getX(r)),n.push(e.getX(r+1)),n.push(e.getX(r+2))):(n.push(e.getX(r+2)),n.push(e.getX(r+1)),n.push(e.getX(r)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=a.clone();return s.setIndex(n),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),a}class rm extends Ii{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new cm(e)}),this.register(function(e){return new ym(e)}),this.register(function(e){return new _m(e)}),this.register(function(e){return new dm(e)}),this.register(function(e){return new fm(e)}),this.register(function(e){return new pm(e)}),this.register(function(e){return new mm(e)}),this.register(function(e){return new lm(e)}),this.register(function(e){return new gm(e)}),this.register(function(e){return new um(e)}),this.register(function(e){return new am(e)}),this.register(function(e){return new xm(e)}),this.register(function(e){return new bm(e)})}load(t,e,i,n){const s=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=sa.extractUrlBase(t),this.manager.itemStart(t);const o=function(l){n?n(l):console.error(l),s.manager.itemError(t),s.manager.itemEnd(t)},h=new Ms(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(l){try{s.parse(l,r,function(c){e(c),s.manager.itemEnd(t)},o)}catch(c){o(c)}},i,o)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,n){let s;const r={},o={},h=new TextDecoder;if(typeof t=="string")s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(h.decode(new Uint8Array(t,0,4))===Hc){try{r[J.KHR_BINARY_GLTF]=new wm(t)}catch(u){n&&n(u);return}s=JSON.parse(r[J.KHR_BINARY_GLTF].content)}else s=JSON.parse(h.decode(t));else s=t;if(s.asset===void 0||s.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Lm(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);o[u.name]=u,r[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case J.KHR_MATERIALS_UNLIT:r[u]=new hm;break;case J.KHR_DRACO_MESH_COMPRESSION:r[u]=new vm(s,this.dracoLoader);break;case J.KHR_TEXTURE_TRANSFORM:r[u]=new Mm;break;case J.KHR_MESH_QUANTIZATION:r[u]=new Tm;break;default:d.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(r),l.setPlugins(o),l.parse(i,n)}parseAsync(t,e){const i=this;return new Promise(function(n,s){i.parse(t,e,n,s)})}}function om(){let a={};return{get:function(t){return a[t]},add:function(t,e){a[t]=e},remove:function(t){delete a[t]},removeAll:function(){a={}}}}const J={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class am{constructor(t){this.parser=t,this.name=J.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let i=0,n=e.length;i<n;i++){const s=e[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,i="light:"+t;let n=e.cache.get(i);if(n)return n;const s=e.json,h=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let l;const c=new St(16777215);h.color!==void 0&&c.fromArray(h.color);const u=h.range!==void 0?h.range:0;switch(h.type){case"directional":l=new qp(c),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Wp(c),l.distance=u;break;case"spot":l=new Hp(c),l.distance=u,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,l.angle=h.spot.outerConeAngle,l.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return l.position.set(0,0,0),l.decay=2,$e(l,h),h.intensity!==void 0&&(l.intensity=h.intensity),l.name=e.createUniqueName(h.name||"light_"+t),n=Promise.resolve(l),e.cache.add(i,n),n}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,i=this.parser,s=i.json.nodes[t],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(h){return i._getNodeRef(e.cache,o,h)})}}class hm{constructor(){this.name=J.KHR_MATERIALS_UNLIT}getMaterialType(){return on}extendParams(t,e,i){const n=[];t.color=new St(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const r=s.baseColorFactor;t.color.fromArray(r),t.opacity=r[3]}s.baseColorTexture!==void 0&&n.push(i.assignTexture(t,"map",s.baseColorTexture,ms))}return Promise.all(n)}}class lm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name].emissiveStrength;return s!==void 0&&(e.emissiveIntensity=s),Promise.resolve()}}class cm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];if(r.clearcoatFactor!==void 0&&(e.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&s.push(i.assignTexture(e,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(e,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(e,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const o=r.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new z(o,o)}return Promise.all(s)}}class um{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];return r.iridescenceFactor!==void 0&&(e.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&s.push(i.assignTexture(e,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(e.iridescenceIOR=r.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(e,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(s)}}class dm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_SHEEN}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new St(0,0,0),e.sheenRoughness=0,e.sheen=1;const r=n.extensions[this.name];return r.sheenColorFactor!==void 0&&e.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&s.push(i.assignTexture(e,"sheenColorMap",r.sheenColorTexture,ms)),r.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(e,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(s)}}class fm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];return r.transmissionFactor!==void 0&&(e.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&s.push(i.assignTexture(e,"transmissionMap",r.transmissionTexture)),Promise.all(s)}}class pm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_VOLUME}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];e.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&s.push(i.assignTexture(e,"thicknessMap",r.thicknessTexture)),e.attenuationDistance=r.attenuationDistance||1/0;const o=r.attenuationColor||[1,1,1];return e.attenuationColor=new St(o[0],o[1],o[2]),Promise.all(s)}}class mm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_IOR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name];return e.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class gm{constructor(t){this.parser=t,this.name=J.KHR_MATERIALS_SPECULAR}getMaterialType(t){const i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Li}extendMaterialParams(t,e){const i=this.parser,n=i.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],r=n.extensions[this.name];e.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&s.push(i.assignTexture(e,"specularIntensityMap",r.specularTexture));const o=r.specularColorFactor||[1,1,1];return e.specularColor=new St(o[0],o[1],o[2]),r.specularColorTexture!==void 0&&s.push(i.assignTexture(e,"specularColorMap",r.specularColorTexture,ms)),Promise.all(s)}}class ym{constructor(t){this.parser=t,this.name=J.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,i=e.json,n=i.textures[t];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],r=e.options.ktx2Loader;if(!r){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,r)}}class _m{constructor(t){this.parser=t,this.name=J.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,i=this.parser,n=i.json,s=n.textures[t];if(!s.extensions||!s.extensions[e])return null;const r=s.extensions[e],o=n.images[r.source];let h=i.textureLoader;if(o.uri){const l=i.options.manager.getHandler(o.uri);l!==null&&(h=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(t,r.source,h);if(n.extensionsRequired&&n.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class xm{constructor(t){this.name=J.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){const n=i.extensions[this.name],s=this.parser.getDependency("buffer",n.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const h=n.byteOffset||0,l=n.byteLength||0,c=n.count,u=n.byteStride,d=new Uint8Array(o,h,l);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(c,u,d,n.mode,n.filter).then(function(f){return f.buffer}):r.ready.then(function(){const f=new ArrayBuffer(c*u);return r.decodeGltfBuffer(new Uint8Array(f),c,u,d,n.mode,n.filter),f})})}else return null}}class bm{constructor(t){this.name=J.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const n=e.meshes[i.mesh];for(const l of n.primitives)if(l.mode!==re.TRIANGLES&&l.mode!==re.TRIANGLE_STRIP&&l.mode!==re.TRIANGLE_FAN&&l.mode!==void 0)return null;const r=i.extensions[this.name].attributes,o=[],h={};for(const l in r)o.push(this.parser.getDependency("accessor",r[l]).then(c=>(h[l]=c,h[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(t)),Promise.all(o).then(l=>{const c=l.pop(),u=c.isGroup?c.children:[c],d=l[0].count,f=[];for(const m of u){const p=new X,g=new v,y=new Ee,b=new v(1,1,1),_=new qf(m.geometry,m.material,d);for(let x=0;x<d;x++)h.TRANSLATION&&g.fromBufferAttribute(h.TRANSLATION,x),h.ROTATION&&y.fromBufferAttribute(h.ROTATION,x),h.SCALE&&b.fromBufferAttribute(h.SCALE,x),_.setMatrixAt(x,p.compose(g,y,b));for(const x in h)x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&m.geometry.setAttribute(x,h[x]);ft.prototype.copy.call(_,m),_.frustumCulled=!1,this.parser.assignFinalMaterial(_),f.push(_)}return c.isGroup?(c.clear(),c.add(...f),c):f[0]}))}}const Hc="glTF",jn=12,ll={JSON:1313821514,BIN:5130562};class wm{constructor(t){this.name=J.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,jn),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Hc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-jn,s=new DataView(t,jn);let r=0;for(;r<n;){const o=s.getUint32(r,!0);r+=4;const h=s.getUint32(r,!0);if(r+=4,h===ll.JSON){const l=new Uint8Array(t,jn+r,o);this.content=i.decode(l)}else if(h===ll.BIN){const l=jn+r;this.body=t.slice(l,l+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class vm{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=J.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const i=this.json,n=this.dracoLoader,s=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,o={},h={},l={};for(const c in r){const u=ra[c]||c.toLowerCase();o[u]=r[c]}for(const c in t.attributes){const u=ra[c]||c.toLowerCase();if(r[c]!==void 0){const d=i.accessors[t.attributes[c]],f=dn[d.componentType];l[u]=f.name,h[u]=d.normalized===!0}}return e.getDependency("bufferView",s).then(function(c){return new Promise(function(u){n.decodeDracoFile(c,function(d){for(const f in d.attributes){const m=d.attributes[f],p=h[f];p!==void 0&&(m.normalized=p)}u(d)},o,l)})})}}class Mm{constructor(){this.name=J.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return e.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class Tm{constructor(){this.name=J.KHR_MESH_QUANTIZATION}}class jc extends Es{constructor(t,e,i,n){super(t,e,i,n)}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=t*n*3+n;for(let r=0;r!==n;r++)e[r]=i[s+r];return e}interpolate_(t,e,i,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,h=o*2,l=o*3,c=n-e,u=(i-e)/c,d=u*u,f=d*u,m=t*l,p=m-l,g=-2*f+3*d,y=f-d,b=1-g,_=y-d+u;for(let x=0;x!==o;x++){const w=r[p+x+o],A=r[p+x+h]*c,T=r[m+x+o],E=r[m+x]*c;s[x]=b*w+_*A+g*T+y*E}return s}}const Sm=new Ee;class Am extends jc{interpolate_(t,e,i,n){const s=super.interpolate_(t,e,i,n);return Sm.fromArray(s).normalize().toArray(s),s}}const re={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},cl={9728:Ko,9729:Ca,9984:Xd,9985:Kd,9986:Yd,9987:ka},ul={33071:Yn,33648:Yo,10497:fs},To={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ra={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ze={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Em={CUBICSPLINE:void 0,LINEAR:bn,STEP:ps},So={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Cm(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new Va({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ar})),a.DefaultMaterial}function Wn(a,t,e){for(const i in e.extensions)a[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function $e(a,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(a.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function km(a,t,e){let i=!1,n=!1,s=!1;for(let l=0,c=t.length;l<c;l++){const u=t[l];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(n=!0),u.COLOR_0!==void 0&&(s=!0),i&&n&&s)break}if(!i&&!n&&!s)return Promise.resolve(a);const r=[],o=[],h=[];for(let l=0,c=t.length;l<c;l++){const u=t[l];if(i){const d=u.POSITION!==void 0?e.getDependency("accessor",u.POSITION):a.attributes.position;r.push(d)}if(n){const d=u.NORMAL!==void 0?e.getDependency("accessor",u.NORMAL):a.attributes.normal;o.push(d)}if(s){const d=u.COLOR_0!==void 0?e.getDependency("accessor",u.COLOR_0):a.attributes.color;h.push(d)}}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(h)]).then(function(l){const c=l[0],u=l[1],d=l[2];return i&&(a.morphAttributes.position=c),n&&(a.morphAttributes.normal=u),s&&(a.morphAttributes.color=d),a.morphTargetsRelative=!0,a})}function Om(a,t){if(a.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)a.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(a.morphTargetInfluences.length===e.length){a.morphTargetDictionary={};for(let i=0,n=e.length;i<n;i++)a.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Pm(a){const t=a.extensions&&a.extensions[J.KHR_DRACO_MESH_COMPRESSION];let e;return t?e="draco:"+t.bufferView+":"+t.indices+":"+dl(t.attributes):e=a.indices+":"+dl(a.attributes)+":"+a.mode,e}function dl(a){let t="";const e=Object.keys(a).sort();for(let i=0,n=e.length;i<n;i++)t+=e[i]+":"+a[e[i]]+";";return t}function oa(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Rm(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const zm=new X;class Lm{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new om,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,n=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,s=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||n&&s<98?this.textureLoader=new Vp(this.options.manager):this.textureLoader=new Xp(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ms(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const i=this,n=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(r){const o={scene:r[0][n.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:n.asset,parser:i,userData:{}};Wn(s,o,n),$e(o,n),Promise.all(i._invokeAll(function(h){return h.afterRoot&&h.afterRoot(o)})).then(function(){t(o)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let n=0,s=e.length;n<s;n++){const r=e[n].joints;for(let o=0,h=r.length;o<h;o++)t[r[o]].isBone=!0}for(let n=0,s=t.length;n<s;n++){const r=t[n];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(i[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;const n=i.clone(),s=(r,o)=>{const h=this.associations.get(r);h!=null&&this.associations.set(o,h);for(const[l,c]of r.children.entries())s(c,o.children[l])};return s(i,n),n.name+="_instance_"+t.uses[e]++,n}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const n=t(e[i]);if(n)return n}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const i=[];for(let n=0;n<e.length;n++){const s=t(e[n]);s&&i.push(s)}return i}getDependency(t,e){const i=t+":"+e;let n=this.cache.get(i);if(!n){switch(t){case"scene":n=this.loadScene(e);break;case"node":n=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":n=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":n=this.loadAccessor(e);break;case"bufferView":n=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":n=this.loadBuffer(e);break;case"material":n=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":n=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":n=this.loadSkin(e);break;case"animation":n=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":n=this.loadCamera(e);break;default:if(n=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!n)throw new Error("Unknown type: "+t);break}this.cache.add(i,n)}return n}getDependencies(t){let e=this.cache.get(t);if(!e){const i=this,n=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(n.map(function(s,r){return i.getDependency(t,r)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[J.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(s,r){i.load(sa.resolveURL(e.uri,n.path),s,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){const n=e.byteLength||0,s=e.byteOffset||0;return i.slice(s,s+n)})}loadAccessor(t){const e=this,i=this.json,n=this.json.accessors[t];if(n.bufferView===void 0&&n.sparse===void 0){const r=To[n.type],o=dn[n.componentType],h=n.normalized===!0,l=new o(n.count*r);return Promise.resolve(new Xt(l,r,h))}const s=[];return n.bufferView!==void 0?s.push(this.getDependency("bufferView",n.bufferView)):s.push(null),n.sparse!==void 0&&(s.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(s).then(function(r){const o=r[0],h=To[n.type],l=dn[n.componentType],c=l.BYTES_PER_ELEMENT,u=c*h,d=n.byteOffset||0,f=n.bufferView!==void 0?i.bufferViews[n.bufferView].byteStride:void 0,m=n.normalized===!0;let p,g;if(f&&f!==u){const y=Math.floor(d/f),b="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+y+":"+n.count;let _=e.cache.get(b);_||(p=new l(o,y*f,n.count*f/c),_=new Vf(p,f/c),e.cache.add(b,_)),g=new za(_,h,d%f/c,m)}else o===null?p=new l(n.count*h):p=new l(o,d,n.count*h),g=new Xt(p,h,m);if(n.sparse!==void 0){const y=To.SCALAR,b=dn[n.sparse.indices.componentType],_=n.sparse.indices.byteOffset||0,x=n.sparse.values.byteOffset||0,w=new b(r[1],_,n.sparse.count*y),A=new l(r[2],x,n.sparse.count*h);o!==null&&(g=new Xt(g.array.slice(),g.itemSize,g.normalized));for(let T=0,E=w.length;T<E;T++){const C=w[T];if(g.setX(C,A[T*h]),h>=2&&g.setY(C,A[T*h+1]),h>=3&&g.setZ(C,A[T*h+2]),h>=4&&g.setW(C,A[T*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){const e=this.json,i=this.options,s=e.textures[t].source,r=e.images[s];let o=this.textureLoader;if(r.uri){const h=i.manager.getHandler(r.uri);h!==null&&(o=h)}return this.loadTextureImage(t,s,o)}loadTextureImage(t,e,i){const n=this,s=this.json,r=s.textures[t],o=s.images[e],h=(o.uri||o.bufferView)+":"+r.sampler;if(this.textureCache[h])return this.textureCache[h];const l=this.loadImageSource(e,i).then(function(c){c.flipY=!1,c.name=r.name||o.name||"";const d=(s.samplers||{})[r.sampler]||{};return c.magFilter=cl[d.magFilter]||Ca,c.minFilter=cl[d.minFilter]||ka,c.wrapS=ul[d.wrapS]||fs,c.wrapT=ul[d.wrapT]||fs,n.associations.set(c,{textures:t}),c}).catch(function(){return null});return this.textureCache[h]=l,l}loadImageSource(t,e){const i=this,n=this.json,s=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(u=>u.clone());const r=n.images[t],o=self.URL||self.webkitURL;let h=r.uri||"",l=!1;if(r.bufferView!==void 0)h=i.getDependency("bufferView",r.bufferView).then(function(u){l=!0;const d=new Blob([u],{type:r.mimeType});return h=o.createObjectURL(d),h});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const c=Promise.resolve(h).then(function(u){return new Promise(function(d,f){let m=d;e.isImageBitmapLoader===!0&&(m=function(p){const g=new xe(p);g.needsUpdate=!0,d(g)}),e.load(sa.resolveURL(u,s.path),m,void 0,f)})}).then(function(u){return l===!0&&o.revokeObjectURL(h),u.userData.mimeType=r.mimeType||Rm(r.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),u});return this.sourceCache[t]=c,c}assignTexture(t,e,i,n){const s=this;return this.getDependency("texture",i.index).then(function(r){if(!r)return null;if(i.texCoord!==void 0&&i.texCoord!=0&&!(e==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+e+" not yet supported."),s.extensions[J.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[J.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const h=s.associations.get(r);r=s.extensions[J.KHR_TEXTURE_TRANSFORM].extendTexture(r,o),s.associations.set(r,h)}}return n!==void 0&&(r.encoding=n),t[e]=r,r})}assignFinalMaterial(t){const e=t.geometry;let i=t.material;const n=e.attributes.tangent===void 0,s=e.attributes.color!==void 0,r=e.attributes.normal===void 0;if(t.isPoints){const o="PointsMaterial:"+i.uuid;let h=this.cache.get(o);h||(h=new Pc,Ei.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.sizeAttenuation=!1,this.cache.add(o,h)),i=h}else if(t.isLine){const o="LineBasicMaterial:"+i.uuid;let h=this.cache.get(o);h||(h=new Oc,Ei.prototype.copy.call(h,i),h.color.copy(i.color),this.cache.add(o,h)),i=h}if(n||s||r){let o="ClonedMaterial:"+i.uuid+":";n&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),r&&(o+="flat-shading:");let h=this.cache.get(o);h||(h=i.clone(),s&&(h.vertexColors=!0),r&&(h.flatShading=!0),n&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(o,h),this.associations.set(h,this.associations.get(i))),i=h}i.aoMap&&e.attributes.uv2===void 0&&e.attributes.uv!==void 0&&e.setAttribute("uv2",e.attributes.uv),t.material=i}getMaterialType(){return Va}loadMaterial(t){const e=this,i=this.json,n=this.extensions,s=i.materials[t];let r;const o={},h=s.extensions||{},l=[];if(h[J.KHR_MATERIALS_UNLIT]){const u=n[J.KHR_MATERIALS_UNLIT];r=u.getMaterialType(),l.push(u.extendParams(o,s,e))}else{const u=s.pbrMetallicRoughness||{};if(o.color=new St(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;o.color.fromArray(d),o.opacity=d[3]}u.baseColorTexture!==void 0&&l.push(e.assignTexture(o,"map",u.baseColorTexture,ms)),o.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,o.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(l.push(e.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),l.push(e.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),r=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(t)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(t,o)})))}s.doubleSided===!0&&(o.side=Ud);const c=s.alphaMode||So.OPAQUE;if(c===So.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===So.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&r!==on&&(l.push(e.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new z(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;o.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&r!==on&&(l.push(e.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&r!==on&&(o.emissive=new St().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&r!==on&&l.push(e.assignTexture(o,"emissiveMap",s.emissiveTexture,ms)),Promise.all(l).then(function(){const u=new r(o);return s.name&&(u.name=s.name),$e(u,s),e.associations.set(u,{materials:t}),s.extensions&&Wn(n,u,s),u})}createUniqueName(t){const e=$.sanitizeNodeName(t||"");let i=e;for(let n=1;this.nodeNamesUsed[i];++n)i=e+"_"+n;return this.nodeNamesUsed[i]=!0,i}loadGeometries(t){const e=this,i=this.extensions,n=this.primitiveCache;function s(o){return i[J.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,e).then(function(h){return fl(h,o,e)})}const r=[];for(let o=0,h=t.length;o<h;o++){const l=t[o],c=Pm(l),u=n[c];if(u)r.push(u.promise);else{let d;l.extensions&&l.extensions[J.KHR_DRACO_MESH_COMPRESSION]?d=s(l):d=fl(new di,l,e),n[c]={primitive:l,promise:d},r.push(d)}}return Promise.all(r)}loadMesh(t){const e=this,i=this.json,n=this.extensions,s=i.meshes[t],r=s.primitives,o=[];for(let h=0,l=r.length;h<l;h++){const c=r[h].material===void 0?Cm(this.cache):this.getDependency("material",r[h].material);o.push(c)}return o.push(e.loadGeometries(r)),Promise.all(o).then(function(h){const l=h.slice(0,h.length-1),c=h[h.length-1],u=[];for(let f=0,m=c.length;f<m;f++){const p=c[f],g=r[f];let y;const b=l[f];if(g.mode===re.TRIANGLES||g.mode===re.TRIANGLE_STRIP||g.mode===re.TRIANGLE_FAN||g.mode===void 0)y=s.isSkinnedMesh===!0?new Hf(p,b):new Ir(p,b),y.isSkinnedMesh===!0&&!y.geometry.attributes.skinWeight.normalized&&y.normalizeSkinWeights(),g.mode===re.TRIANGLE_STRIP?y.geometry=hl(y.geometry,Tc):g.mode===re.TRIANGLE_FAN&&(y.geometry=hl(y.geometry,Jo));else if(g.mode===re.LINES)y=new Xf(p,b);else if(g.mode===re.LINE_STRIP)y=new Ia(p,b);else if(g.mode===re.LINE_LOOP)y=new Yf(p,b);else if(g.mode===re.POINTS)y=new Kf(p,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(y.geometry.morphAttributes).length>0&&Om(y,s),y.name=e.createUniqueName(s.name||"mesh_"+t),$e(y,s),g.extensions&&Wn(n,y,g),e.assignFinalMaterial(y),u.push(y)}for(let f=0,m=u.length;f<m;f++)e.associations.set(u[f],{meshes:t,primitives:f});if(u.length===1)return u[0];const d=new go;e.associations.set(d,{meshes:t});for(let f=0,m=u.length;f<m;f++)d.add(u[f]);return d})}loadCamera(t){let e;const i=this.json.cameras[t],n=i[i.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new Ra(xf.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):i.type==="orthographic"&&(e=new Cc(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),$e(e,i),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],i=[];for(let n=0,s=e.joints.length;n<s;n++)i.push(this.getDependency("node",e.joints[n]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(n){const s=n.pop(),r=n,o=[],h=[];for(let l=0,c=r.length;l<c;l++){const u=r[l];if(u){o.push(u);const d=new X;s!==null&&d.fromArray(s.array,l*16),h.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[l])}return new La(o,h)})}loadAnimation(t){const i=this.json.animations[t],n=[],s=[],r=[],o=[],h=[];for(let l=0,c=i.channels.length;l<c;l++){const u=i.channels[l],d=i.samplers[u.sampler],f=u.target,m=f.node,p=i.parameters!==void 0?i.parameters[d.input]:d.input,g=i.parameters!==void 0?i.parameters[d.output]:d.output;n.push(this.getDependency("node",m)),s.push(this.getDependency("accessor",p)),r.push(this.getDependency("accessor",g)),o.push(d),h.push(f)}return Promise.all([Promise.all(n),Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(h)]).then(function(l){const c=l[0],u=l[1],d=l[2],f=l[3],m=l[4],p=[];for(let y=0,b=c.length;y<b;y++){const _=c[y],x=u[y],w=d[y],A=f[y],T=m[y];if(_===void 0)continue;_.updateMatrix();let E;switch(Ze[T.path]){case Ze.weights:E=ws;break;case Ze.rotation:E=Oi;break;case Ze.position:case Ze.scale:default:E=vs;break}const C=_.name?_.name:_.uuid,O=A.interpolation!==void 0?Em[A.interpolation]:bn,P=[];Ze[T.path]===Ze.weights?_.traverse(function(N){N.morphTargetInfluences&&P.push(N.name?N.name:N.uuid)}):P.push(C);let V=w.array;if(w.normalized){const N=oa(V.constructor),U=new Float32Array(V.length);for(let D=0,W=V.length;D<W;D++)U[D]=V[D]*N;V=U}for(let N=0,U=P.length;N<U;N++){const D=new E(P[N]+"."+Ze[T.path],x.array,V,O);A.interpolation==="CUBICSPLINE"&&(D.createInterpolant=function(Y){const Q=this instanceof Oi?Am:jc;return new Q(this.times,this.values,this.getValueSize()/3,Y)},D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(D)}}const g=i.name?i.name:"animation_"+t;return new zp(g,void 0,p)})}createNodeMesh(t){const e=this.json,i=this,n=e.nodes[t];return n.mesh===void 0?null:i.getDependency("mesh",n.mesh).then(function(s){const r=i._getNodeRef(i.meshCache,n.mesh,s);return n.weights!==void 0&&r.traverse(function(o){if(o.isMesh)for(let h=0,l=n.weights.length;h<l;h++)o.morphTargetInfluences[h]=n.weights[h]}),r})}loadNode(t){const e=this.json,i=this.extensions,n=this,s=e.nodes[t],r=s.name?n.createUniqueName(s.name):"";return function(){const o=[],h=n._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(t)});h&&o.push(h),s.camera!==void 0&&o.push(n.getDependency("camera",s.camera).then(function(d){return n._getNodeRef(n.cameraCache,s.camera,d)})),n._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(t)}).forEach(function(d){o.push(d)});const l=[],c=s.children||[];for(let d=0,f=c.length;d<f;d++)l.push(n.getDependency("node",c[d]));const u=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([Promise.all(o),Promise.all(l),u])}().then(function(o){const h=o[0],l=o[1],c=o[2];let u;if(s.isBone===!0?u=new kc:h.length>1?u=new go:h.length===1?u=h[0]:u=new ft,u!==h[0])for(let d=0,f=h.length;d<f;d++)u.add(h[d]);if(s.name&&(u.userData.name=s.name,u.name=r),$e(u,s),s.extensions&&Wn(i,u,s),s.matrix!==void 0){const d=new X;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=t,c!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(c,zm)});for(let d=0,f=l.length;d<f;d++)u.add(l[d]);return u})}loadScene(t){const e=this.extensions,i=this.json.scenes[t],n=this,s=new go;i.name&&(s.name=n.createUniqueName(i.name)),$e(s,i),i.extensions&&Wn(e,s,i);const r=i.nodes||[],o=[];for(let h=0,l=r.length;h<l;h++)o.push(n.getDependency("node",r[h]));return Promise.all(o).then(function(h){for(let c=0,u=h.length;c<u;c++)s.add(h[c]);const l=c=>{const u=new Map;for(const[d,f]of n.associations)(d instanceof Ei||d instanceof xe)&&u.set(d,f);return c.traverse(d=>{const f=n.associations.get(d);f!=null&&u.set(d,f)}),u};return n.associations=l(s),s})}}function Im(a,t,e){const i=t.attributes,n=new vn;if(i.POSITION!==void 0){const o=e.json.accessors[i.POSITION],h=o.min,l=o.max;if(h!==void 0&&l!==void 0){if(n.set(new v(h[0],h[1],h[2]),new v(l[0],l[1],l[2])),o.normalized){const c=oa(dn[o.componentType]);n.min.multiplyScalar(c),n.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=t.targets;if(s!==void 0){const o=new v,h=new v;for(let l=0,c=s.length;l<c;l++){const u=s[l];if(u.POSITION!==void 0){const d=e.json.accessors[u.POSITION],f=d.min,m=d.max;if(f!==void 0&&m!==void 0){if(h.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),h.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),h.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),d.normalized){const p=oa(dn[d.componentType]);h.multiplyScalar(p)}o.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(o)}a.boundingBox=n;const r=new Mn;n.getCenter(r.center),r.radius=n.min.distanceTo(n.max)/2,a.boundingSphere=r}function fl(a,t,e){const i=t.attributes,n=[];function s(r,o){return e.getDependency("accessor",r).then(function(h){a.setAttribute(o,h)})}for(const r in i){const o=ra[r]||r.toLowerCase();o in a.attributes||n.push(s(i[r],o))}if(t.indices!==void 0&&!a.index){const r=e.getDependency("accessor",t.indices).then(function(o){a.setIndex(o)});n.push(r)}return $e(a,t),Im(a,t,e),Promise.all(n).then(function(){return t.targets!==void 0?km(a,t.targets,e):a})}const Ao=new WeakMap;class Nm extends Ii{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,i,n){const s=new Ms(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,r=>{this.decodeDracoFile(r,e).catch(n)},i,n)}decodeDracoFile(t,e,i,n){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(t,s).then(e)}decodeGeometry(t,e){const i=JSON.stringify(e);if(Ao.has(t)){const h=Ao.get(t);if(h.key===i)return h.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const s=this.workerNextTaskID++,r=t.byteLength,o=this._getWorker(s,r).then(h=>(n=h,new Promise((l,c)=>{n._callbacks[s]={resolve:l,reject:c},n.postMessage({type:"decode",id:s,taskConfig:e,buffer:t},[t])}))).then(h=>this._createGeometry(h.geometry));return o.catch(()=>!0).then(()=>{n&&s&&this._releaseTask(n,s)}),Ao.set(t,{key:i,promise:o}),o}_createGeometry(t){const e=new di;t.index&&e.setIndex(new Xt(t.index.array,1));for(let i=0;i<t.attributes.length;i++){const n=t.attributes[i],s=n.name,r=n.array,o=n.itemSize;e.setAttribute(s,new Xt(r,o))}return e}_loadLibrary(t,e){const i=new Ms(this.manager);return i.setPath(this.decoderPath),i.setResponseType(e),i.setWithCredentials(this.withCredentials),new Promise((n,s)=>{i.load(t,n,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(i=>{const n=i[0];t||(this.decoderConfig.wasmBinary=i[1]);const s=Fm.toString(),r=["/* draco decoder */",n,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(s){const r=s.data;switch(r.type){case"decode":n._callbacks[r.id].resolve(r);break;case"error":n._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,s){return n._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[t]=e,i._taskLoad+=e,i})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Fm(){let a,t;onmessage=function(r){const o=r.data;switch(o.type){case"init":a=o.decoderConfig,t=new Promise(function(c){a.onModuleLoaded=function(u){c({draco:u})},DracoDecoderModule(a)});break;case"decode":const h=o.buffer,l=o.taskConfig;t.then(c=>{const u=c.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(h),h.byteLength);try{const m=e(u,d,f,l),p=m.attributes.map(g=>g.array.buffer);m.index&&p.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},p)}catch(m){console.error(m),self.postMessage({type:"error",id:o.id,error:m.message})}finally{u.destroy(f),u.destroy(d)}});break}};function e(r,o,h,l){const c=l.attributeIDs,u=l.attributeTypes;let d,f;const m=o.GetEncodedGeometryType(h);if(m===r.TRIANGULAR_MESH)d=new r.Mesh,f=o.DecodeBufferToMesh(h,d);else if(m===r.POINT_CLOUD)d=new r.PointCloud,f=o.DecodeBufferToPointCloud(h,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const p={index:null,attributes:[]};for(const g in c){const y=self[u[g]];let b,_;if(l.useUniqueIDs)_=c[g],b=o.GetAttributeByUniqueId(d,_);else{if(_=o.GetAttributeId(d,r[c[g]]),_===-1)continue;b=o.GetAttribute(d,_)}p.attributes.push(n(r,o,d,g,y,b))}return m===r.TRIANGULAR_MESH&&(p.index=i(r,o,d)),r.destroy(d),p}function i(r,o,h){const c=h.num_faces()*3,u=c*4,d=r._malloc(u);o.GetTrianglesUInt32Array(h,u,d);const f=new Uint32Array(r.HEAPF32.buffer,d,c).slice();return r._free(d),{array:f,itemSize:1}}function n(r,o,h,l,c,u){const d=u.num_components(),m=h.num_points()*d,p=m*c.BYTES_PER_ELEMENT,g=s(r,c),y=r._malloc(p);o.GetAttributeDataArrayForAllPoints(h,u,g,p,y);const b=new c(r.HEAPF32.buffer,y,m).slice();return r._free(y),{name:l,array:b,itemSize:d}}function s(r,o){switch(o){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}class Dm extends Ii{constructor(t){super(t)}load(t,e,i,n){const s=this,r=new Ms(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(o){const h=s.parse(JSON.parse(o));e&&e(h)},i,n)}parse(t){return new Bm(t)}}class Bm{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const i=[],n=Vm(t,e,this.data);for(let s=0,r=n.length;s<r;s++)i.push(...n[s].toShapes());return i}}function Vm(a,t,e){const i=Array.from(a),n=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n,r=[];let o=0,h=0;for(let l=0;l<i.length;l++){const c=i[l];if(c===`
`)o=0,h-=s;else{const u=Um(c,n,o,h,e);o+=u.offsetX,r.push(u.path)}}return r}function Um(a,t,e,i,n){const s=n.glyphs[a]||n.glyphs["?"];if(!s){console.error('THREE.Font: character "'+a+'" does not exists in font family '+n.familyName+".");return}const r=new nm;let o,h,l,c,u,d,f,m;if(s.o){const p=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,y=p.length;g<y;)switch(p[g++]){case"m":o=p[g++]*t+e,h=p[g++]*t+i,r.moveTo(o,h);break;case"l":o=p[g++]*t+e,h=p[g++]*t+i,r.lineTo(o,h);break;case"q":l=p[g++]*t+e,c=p[g++]*t+i,u=p[g++]*t+e,d=p[g++]*t+i,r.quadraticCurveTo(u,d,l,c);break;case"b":l=p[g++]*t+e,c=p[g++]*t+i,u=p[g++]*t+e,d=p[g++]*t+i,f=p[g++]*t+e,m=p[g++]*t+i,r.bezierCurveTo(u,d,f,m,l,c);break}}return{offsetX:s.ha*t,path:r}}class pl extends Ba{constructor(t,e={}){const i=e.font;if(i===void 0)super();else{const n=i.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}}const tt={ROOM:"room",BOOK_CV:"Book",BOOK1:"Book001",BOOK:"open_book",STAND:"Stand",SWITCH_BOARD:"SwitchBoard",SWITCH:"Switch",DRAGON:"dragon",CAMERA_TRIPOD:"camera_tripod",OFFICE_CHAIR:"office_chair",CPU:"CPU",WALL:"Wall",DRONE:"drone",FLAG:"BG_flag",APPLE:"apple",SPEAKER:"speaker",BALL:"ball",GIN:"gin"},dr={BOOK:{OPEN:"Animation"},DRONE:{HOVER:"hover"},FLAG:{MOVE:"Object_0"},DRAGON:{IDLE:"metarig|idol"}};let rs="light",Ts=null,aa=null,ii=null,ni=null;const ha=new Map;let sr=null,fr,Me,rr=!1,or=!1,Hm=window.matchMedia("(max-width: 992px)").matches,jm=document.querySelector(".experience-canvas");const Wm=document.getElementById("loader-wrapper");let vi=[{image:"textures/project-colorpop.jpg",url:"https://github.com/Copelli-Yoshovski-Associates/ColorPop_AI_Project"},{image:"textures/project-java-app.jpg",url:"https://github.com/yoshovski/store-management-software-unical"},{image:"textures/project-siliconsquare.jpg",url:"https://github.com/Silicon-Square/SiliconSquare"},{image:"textures/project-sorting.jpg",url:"https://github.com/Copelli-Yoshovski-Associates/Parallel-Sorting-Algorithms-MPI"},{image:"textures/project-thesis.jpg",url:"https://github.com/yoshovski/Thesis-ASP-Based-System-For-Humanitarian-Assistance"},{image:"textures/project-wordpress-plugin.jpg",url:"https://github.com/yoshovski/world-domi-map"}],Wc={x:.12,y:.2,z:.55},Gc={x:-1.54,y:.13,z:1.41},qc={x:1,y:.45,z:.01},Xc={x:.05,y:.05,z:0};const Jt=new G.Scene,Zt=new G.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,1e3);let pr={x:5.6,y:.5463638814987481,z:.8},Gm={x:-.8313297556598935,y:.9383399492446749,z:.7240714481613063};Zt.position.set(pr.x,pr.y,pr.z);const Ni=new G.WebGLRenderer({canvas:jm,antialias:!0});Ni.setSize(window.innerWidth,window.innerHeight);Ni.setPixelRatio(window.devicePixelRatio);Ni.shadowMap.enabled=!0;Ni.shadowMap.type=G.PCFSoftShadowMap;const de=new sm(Zt,Ni.domElement);de.enablePan=!1;de.minDistance=.9;de.maxDistance=1.6;de.minAzimuthAngle=.2;de.maxAzimuthAngle=Math.PI*.78;de.minPolarAngle=.3;de.maxPolarAngle=Math.PI/2;de.update();const qm=[tt.DRAGON,tt.CAMERA_TRIPOD,tt.OFFICE_CHAIR,tt.APPLE,tt.SPEAKER,tt.BALL,tt.GIN,tt.DRONE,tt.BOOK,tt.FLAG],Yc=new Nm;Yc.setDecoderPath("lib/draco/");const Kc=new rm;Kc.setDRACOLoader(Yc);Kc.load("models/room/room.glb",function(a){fr=a,Wm.style.display="none",Me=document.createElement("video"),Me.src="textures/drone.mp4",Me.muted=!0,Me.playsInline=!0,Me.autoplay=!0,Me.loop=!0;const t=new G.VideoTexture(Me);t.minFilter=G.NearestFilter,t.magFilter=G.NearestFilter,t.generateMipmaps=!1,t.encoding=G.sRGBEncoding,a.scene=a.scene.children[0],a.scene.children.forEach(e=>{if(su(e),e.name!==tt.WALL&&(e.castShadow=!0),e.receiveShadow=!0,e.children&&e.children.forEach(i=>{i.name!==tt.BOOK1&&i.name!==tt.SWITCH&&(i.castShadow=!0),i.receiveShadow=!0}),e.name===tt.STAND&&(e.children[0].material=new G.MeshBasicMaterial({map:t}),Me.play()),e.name===tt.BOOK_CV){Ts=e.children[0];const i=new G.TextureLoader().load("textures/book-inner.jpg");i.flipY=!1,e.material=new G.MeshStandardMaterial({color:16777215,map:i})}e.name===tt.SWITCH_BOARD&&(aa=e.children[0]),e.name===tt.APPLE&&e.material instanceof G.MeshStandardMaterial&&(e.material.emissive=new G.Color(16711680),e.material.emissiveIntensity=.4,e.material.needsUpdate=!0),qm.includes(e.name)&&nu(e),mr(a,tt.DRAGON,dr.DRAGON.IDLE)}),Jt.add(a.scene),Jc(),Ym(),$m(),Qm(),tg(),eg(),ig(a.scene)},function(a){console.error(a)});const Kn=new G.AmbientLight(16777215,.6);Jt.add(Kn);const Dt=new G.PointLight(16777215,2.5,10);Dt.position.set(.3,2,.5);Dt.castShadow=!0;Dt.shadow.radius=5;Dt.shadow.mapSize.width=2048;Dt.shadow.mapSize.height=2048;Dt.shadow.camera.far=2.5;Dt.shadow.bias=-.002;Jt.add(Dt);const ml=new G.PointLight(65280,30,.05),Er=new G.PointLight(16711680,0,1.1),Cr=new G.PointLight(16711680,0,1.1),kr=new G.PointLight(16711680,0,1.1),Or=new G.PointLight(16711680,0,1.1);Er.position.set(-.2,.6,.24);Cr.position.set(-.2,.6,.42);kr.position.set(-.2,.6,.01);Or.position.set(-.2,.6,-.14);Jt.add(Er);Jt.add(Cr);Jt.add(kr);Jt.add(Or);const Xm=new G.Clock;function Jc(){requestAnimationFrame(Jc);const a=Xm.getDelta();ha.forEach(t=>t.update(a)),Ni.render(Jt,Zt)}function Ym(){const a=new Dm;a.load("fonts/unione.json",function(t){const e=[new G.MeshPhongMaterial({color:1515303,flatShading:!0}),new G.MeshPhongMaterial({color:16777215})],i=new pl("STEFKO YOSHOVSKI",{font:t,size:.08,height:.01});ii=new G.Mesh(i,e),ii.rotation.y=Math.PI*.5,ii.position.set(-.27,.55,.5),Jt.add(ii)}),a.load("fonts/helvatica.json",function(t){const e=[new G.MeshPhongMaterial({color:1515303,flatShading:!0}),new G.MeshPhongMaterial({color:16777215})],i=new pl("Videomaker / Developer / Photographer",{font:t,size:.018,height:0});ni=new G.Mesh(i,e),ni.rotation.y=Math.PI*.5,ni.position.set(-.255,.5,.5),Jt.add(ni)})}function Km(a){a==="dark"?(aa.rotation.z=Math.PI/7,document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),j.to(Dt.color,{r:.2725490196078431,g:.23137254901960785,b:.6862745098039216}),j.to(Kn.color,{r:.17254901960784313,g:.23137254901960785,b:.6862745098039216}),j.to(Dt,{intensity:1.5}),j.to(Kn,{intensity:.3}),j.to(ml,{distance:.07}),j.to(ii.material[0].color,{r:8,g:8,b:8,duration:0}),j.to(ii.material[1].color,{r:5,g:5,b:5,duration:0}),j.to(ni.material[0].color,{r:8,g:8,b:8,duration:0}),j.to(ni.material[1].color,{r:5,g:5,b:5,duration:0}),j.to(Er,{intensity:.6}),j.to(Cr,{intensity:.6}),j.to(kr,{intensity:.6}),j.to(Or,{intensity:.6})):(aa.rotation.z=0,document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),j.to(Dt.color,{r:1,g:1,b:1}),j.to(Kn.color,{r:1,g:1,b:1}),j.to(Dt,{intensity:2.5}),j.to(Kn,{intensity:.6}),j.to(ml,{distance:.05}),j.to(ii.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),j.to(ii.material[1].color,{r:1,g:1,b:1,duration:0}),j.to(ni.material[0].color,{r:.09019607843137255,g:.12156862745098039,b:.15294117647058825,duration:0}),j.to(ni.material[1].color,{r:1,g:1,b:1,duration:0}),j.to(Er,{intensity:0}),j.to(Cr,{intensity:0}),j.to(kr,{intensity:0}),j.to(Or,{intensity:0}))}function Jm(){de.enabled=!0}function Ga(){de.enabled=!1}function qa(){document.getElementById("close-btn").style.display="block"}function Zm(){document.getElementById("close-btn").style.display="none"}function Zc(){Ts&&j.to(Ts.rotation,{x:0,duration:1.5})}function $c(){vi.length!==0&&vi.forEach((a,t)=>{j.to(a.mesh.material,{opacity:0,duration:1}),j.to(a.mesh.position,{y:a.y,duration:1}),j.to(a.mesh.scale,{x:0,y:0,z:0,duration:0,delay:1})})}function Qc(){Zc(),$c(),Zm(),j.to(Zt.position,{...pr,duration:1.5}),j.to(Zt.rotation,{...Gm,duration:1.5}),j.delayedCall(1.5,Jm),rs!=="dark"&&j.to(Dt,{intensity:2.5,duration:1.5})}function $m(){document.getElementById("logo").addEventListener("click",function(a){a.preventDefault(),Qc()})}function tu(){Ts&&(j.to(Zt.position,{...Wc,duration:1.5}),j.to(Zt.rotation,{...Gc,duration:1.5}),j.to(Ts.rotation,{x:Math.PI,duration:1.5,delay:1.5}),rs!=="dark"&&j.to(Dt,{intensity:1,duration:1.5}))}function Qm(){document.getElementById("about-menu").addEventListener("click",function(a){a.preventDefault(),Ga(),$c(),tu(),j.delayedCall(1.5,qa)})}function tg(){vi.forEach((a,t)=>{const e=t%3,i=Math.floor(t/3),n=new G.PlaneGeometry(.71,.4),s=new G.MeshBasicMaterial({color:16777215,map:new G.TextureLoader().load(a.image),transparent:!0,opacity:0}),r=new G.Mesh(n,s);r.name="project",r.userData={url:a.url},r.position.set(.3+e*.8,1-i*.5,-1.15),r.scale.set(0,0,0),vi[t].mesh=r,vi[t].y=1-i*.5,Jt.add(r)}),document.getElementById("projects-menu").addEventListener("click",function(a){a.preventDefault(),Ga(),Zc(),j.to(Zt.position,{...qc,duration:1.5}),j.to(Zt.rotation,{...Xc,duration:1.5}),j.delayedCall(1.5,qa),vi.forEach((t,e)=>{t.mesh.scale.set(1,1,1),j.to(t.mesh.material,{opacity:1,duration:1.5,delay:1.5+e*.1}),j.to(t.mesh.position,{y:t.y+.05,duration:1,delay:1.5+e*.1})})})}function eg(){const a=new G.Vector2,t=new G.Raycaster;let e;window.addEventListener("click",function(i){if(or)return;or=!0;const n=rs==="light"?"dark":"light",s=document.getElementById("close-btn"),r=document.getElementById("projects-menu");if(i.target===s||s.contains(i.target)||i.target===r||r.contains(i.target))return or=!1,!1;if(a.x=i.clientX/window.innerWidth*2-1,a.y=-(i.clientY/window.innerHeight)*2+1,t.setFromCamera(a,Zt),e=t.intersectObjects(Jt.children),e.length>0){const o=e[0],h=eu(o.object);o.object.name==="project"&&o.object.userData.url&&window.open(o.object.userData.url),(o.object.name===tt.BOOK_CV||o.object.name===tt.BOOK1)&&(Ga(),tu(),j.delayedCall(1.5,qa)),(o.object.name===tt.SWITCH_BOARD||o.object.name===tt.SWITCH)&&(rs=n,Km(rs)),h.name===tt.SPEAKER&&(console.log("Speaker clicked"),Me?(rr=!rr,Me.muted=!rr,console.log(`Audio is now ${rr?"on":"off"}`)):console.error("Video element not found"))}setTimeout(()=>{or=!1,console.log("Click processing reset.")},100)})}function ig(a){Hm&&(a.scale.set(.95,.95,.95),Wc={x:.09,y:.23,z:.51},Gc={x:-1.57,y:0,z:1.57},qc={x:1.1,y:.82,z:.5},Xc={x:0,y:0,z:1.55},vi.forEach((t,e)=>{t.mesh.position.z=-1.13}),de.maxDistance=1.5,de.maxAzimuthAngle=Math.PI*.75)}document.getElementById("close-btn").addEventListener("click",a=>{a.preventDefault(),Qc()});document.getElementById("contact-btn").addEventListener("click",a=>{a.preventDefault(),document.querySelector(".contact-menu__dropdown").classList.toggle("contact-menu__dropdown--open")});document.addEventListener("mouseup",a=>{const t=document.querySelector(".contact-menu");t.contains(a.target)||t.querySelector(".contact-menu__dropdown").classList.remove("contact-menu__dropdown--open")});window.addEventListener("resize",()=>{Zt.aspect=window.innerWidth/window.innerHeight,Zt.updateProjectionMatrix(),Ni.setSize(window.innerWidth,window.innerHeight)});function mr(a,t,e,i=!0){const n=iu(a.scene,t);if(n.name===t){console.log("object found: ",n);const s=a.animations.map(h=>h.name);console.log("Available Animations: ",s);let r=ha.get(t);r||(r=new G.AnimationMixer(n),ha.set(t,r));const o=G.AnimationClip.findByName(a.animations,e);if(o){const h=r.clipAction(o);h.reset(),h.play(),i?h.setLoop(G.LoopRepeat):(h.setLoop(G.LoopOnce),h.clampWhenFinished=!0),console.log("Animation clip is playing"),n.userData.mixer=r}else console.error("Animation clip not found")}}function eu(a){for(;a.parent&&a.parent.name!==tt.ROOM;)a=a.parent;return a}function ng(a){const t=new G.Vector2,e=new G.Raycaster;t.x=a.clientX/window.innerWidth*2-1,t.y=-(a.clientY/window.innerHeight)*2+1,e.setFromCamera(t,Zt);const i=e.intersectObjects(Jt.children,!0);if(i.length>0){const n=i[0].object,s=eu(n);console.log("Hovered object:",s.name),s.name===tt.DRONE?sr!==s&&(sr=s,mr(fr,tt.DRONE,dr.DRONE.HOVER),mr(fr,tt.FLAG,dr.FLAG.MOVE),mr(fr,tt.BOOK,dr.BOOK.OPEN,!1)):sr=null}else sr=null}window.addEventListener("mousemove",ng);function iu(a,t){if(a.name===t)return a;for(let e=0;e<a.children.length;e++){const i=a.children[e],n=iu(i,t);if(n)return n}return null}function nu(a){a.castShadow=!0,a.receiveShadow=!0,a.children.forEach(t=>nu(t))}function su(a){a.material&&console.log(`Object: ${a.name}, Material:`,a.material),a.children.forEach(t=>su(t))}
